var rA=Object.defineProperty,iA=Object.defineProperties;var sA=Object.getOwnPropertyDescriptors;var pc=Object.getOwnPropertySymbols,oA=Object.getPrototypeOf,nI=Object.prototype.hasOwnProperty,rI=Object.prototype.propertyIsEnumerable,aA=Reflect.get;var tI=(t,e,n)=>e in t?rA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})nI.call(e,n)&&tI(t,n,e[n]);if(pc)for(var n of pc(e))rI.call(e,n)&&tI(t,n,e[n]);return t},we=(t,e)=>iA(t,sA(e));var O2=(t,e)=>{var n={};for(var r in t)nI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&pc)for(var r of pc(t))e.indexOf(r)<0&&rI.call(t,r)&&(n[r]=t[r]);return n};var Wn=(t,e,n)=>aA(oA(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{c(n.next(u))}catch(l){i(l)}},o=u=>{try{c(n.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);c((n=n.apply(t,e)).next())});function iI(t,e){return Object.is(t,e)}var Fe=null,gc=!1,mc=1,Kn=Symbol("SIGNAL");function se(t){let e=Fe;return Fe=t,e}function sI(){return Fe}var mo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ph(t){if(gc)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(t);let e=Fe.nextProducerIndex++;if(Ic(Fe),e<Fe.producerNode.length&&Fe.producerNode[e]!==t&&go(Fe)){let n=Fe.producerNode[e];_c(n,Fe.producerIndexOfThis[e])}Fe.producerNode[e]!==t&&(Fe.producerNode[e]=t,Fe.producerIndexOfThis[e]=go(Fe)?uI(t,Fe,e):0),Fe.producerLastReadVersion[e]=t.version}function cA(){mc++}function oI(t){if(!(go(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===mc)){if(!t.producerMustRecompute(t)&&!mh(t)){t.dirty=!1,t.lastCleanEpoch=mc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=mc}}function aI(t){if(t.liveConsumerNode===void 0)return;let e=gc;gc=!0;try{for(let n of t.liveConsumerNode)n.dirty||uA(n)}finally{gc=e}}function cI(){return Fe?.consumerAllowSignalWrites!==!1}function uA(t){t.dirty=!0,aI(t),t.consumerMarkedDirty?.(t)}function vc(t){return t&&(t.nextProducerIndex=0),se(t)}function gh(t,e){if(se(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(go(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)_c(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function mh(t){Ic(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(oI(n),r!==n.version))return!0}return!1}function yh(t){if(Ic(t),go(t))for(let e=0;e<t.producerNode.length;e++)_c(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function uI(t,e,n){if(lI(t),t.liveConsumerNode.length===0&&dI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=uI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function _c(t,e){if(lI(t),t.liveConsumerNode.length===1&&dI(t))for(let r=0;r<t.producerNode.length;r++)_c(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ic(i),i.producerIndexOfThis[r]=e}}function go(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ic(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function lI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function dI(t){return t.producerNode!==void 0}function hI(t){let e=Object.create(lA);e.computation=t;let n=()=>{if(oI(e),ph(e),e.value===yc)throw e.error;return e.value};return n[Kn]=e,n}var hh=Symbol("UNSET"),fh=Symbol("COMPUTING"),yc=Symbol("ERRORED"),lA=we(L({},mo),{value:hh,dirty:!0,error:null,equal:iI,producerMustRecompute(t){return t.value===hh||t.value===fh},producerRecomputeValue(t){if(t.value===fh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=fh;let n=vc(t),r;try{r=t.computation()}catch(i){r=yc,t.error=i}finally{gh(t,n)}if(e!==hh&&e!==yc&&r!==yc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function dA(){throw new Error}var fI=dA;function pI(){fI()}function gI(t){fI=t}var hA=null;function mI(t){let e=Object.create(vI);e.value=t;let n=()=>(ph(e),e.value);return n[Kn]=e,n}function vh(t,e){cI()||pI(),t.equal(t.value,e)||(t.value=e,fA(t))}function yI(t,e){cI()||pI(),vh(t,e(t.value))}var vI=we(L({},mo),{equal:iI,value:void 0});function fA(t){t.version++,cA(),aI(t),hA?.()}function J(t){return typeof t=="function"}function wi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wc=wi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ae=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof wc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{_I(s)}catch(o){e=e??[],o instanceof wc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new wc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_I(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mr(n,e)}remove(e){let{_finalizers:n}=this;n&&Mr(n,e),e instanceof t&&e._removeParent(this)}};Ae.EMPTY=(()=>{let t=new Ae;return t.closed=!0,t})();var _h=Ae.EMPTY;function Ec(t){return t instanceof Ae||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function _I(t){J(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ei={setTimeout(t,e,...n){let{delegate:r}=Ei;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ei;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Dc(t){Ei.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function yo(){}var II=Ih("C",void 0,void 0);function wI(t){return Ih("E",void 0,t)}function EI(t){return Ih("N",t,void 0)}function Ih(t,e,n){return{kind:t,value:e,error:n}}var xr=null;function Di(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!xr;if(e&&(xr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xr;if(xr=null,n)throw r}}else t()}function DI(t){Vt.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=t)}var Pr=class extends Ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ec(e)&&e.add(this)):this.destination=mA}static create(e,n,r){return new Ti(e,n,r)}next(e){this.isStopped?Eh(EI(e),this):this._next(e)}error(e){this.isStopped?Eh(wI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Eh(II,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pA=Function.prototype.bind;function wh(t,e){return pA.call(t,e)}var Dh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Tc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Tc(r)}else Tc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Tc(n)}}},Ti=class extends Pr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wh(e.next,s),error:e.error&&wh(e.error,s),complete:e.complete&&wh(e.complete,s)}):i=e}this.destination=new Dh(i)}};function Tc(t){Vt.useDeprecatedSynchronousErrorHandling?DI(t):Dc(t)}function gA(t){throw t}function Eh(t,e){let{onStoppedNotification:n}=Vt;n&&Ei.setTimeout(()=>n(t,e))}var mA={closed:!0,next:yo,error:gA,complete:yo};var bi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yt(t){return t}function bc(...t){return Th(t)}function Th(t){return t.length===0?yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=vA(n)?n:new Ti(n,r,i);return Di(()=>{let{operator:o,source:c}=this;s.add(o?o.call(s,c):c?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=TI(r),new r((i,s)=>{let o=new Ti({next:c=>{try{n(c)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[bi](){return this}pipe(...n){return Th(n)(this)}toPromise(n){return n=TI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function TI(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function yA(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function vA(t){return t&&t instanceof Pr||yA(t)&&Ec(t)}function bh(t){return J(t?.lift)}function de(t){return e=>{if(bh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(t,e,n,r,i){return new Ch(t,e,n,r,i)}var Ch=class extends Pr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ci(){return de((t,e)=>{let n=null;t._refCount++;let r=ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Si=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,bh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ae;let n=this.getSubject();e.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ae.EMPTY)}return e}refCount(){return Ci()(this)}};var bI=wi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Cc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new bI}next(n){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Di(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?_h:(this.currentObservers=null,s.push(n),new Ae(()=>{this.currentObservers=null,Mr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Cc(e,n),t})(),Cc=class extends Ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:_h}};var qe=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sh={now(){return(Sh.delegate||Date).now()},delegate:void 0};var Sc=class extends Ae{constructor(e,n){super()}schedule(e,n=0){return this}};var vo={setInterval(t,e,...n){let{delegate:r}=vo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=vo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ai=class extends Sc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return vo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&vo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ri=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ri.now=Sh.now;var Ni=class extends Ri{constructor(e,n=Ri.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ah=new Ni(Ai);var Ac=class extends Ai{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Rc=class extends Ni{};var Rh=new Rc(Ac);var vt=new ae(t=>t.complete());function CI(t){return t&&J(t.schedule)}function SI(t){return t[t.length-1]}function Nc(t){return J(SI(t))?t.pop():void 0}function Qn(t){return CI(SI(t))?t.pop():void 0}function Mc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function AI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Or(t){return this instanceof Or?(this.v=t,this):new Or(t)}function NI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(C){return Promise.resolve(C).then(v,p)}}function c(v,C){r[v]&&(i[v]=function(N){return new Promise(function(R,k){s.push([v,N,R,k])>1||u(v,N)})},C&&(i[v]=C(i[v])))}function u(v,C){try{l(r[v](C))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Or?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,C){v(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function MI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AI=="function"?AI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(l){s({value:l,done:c})},o)}}var xc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pc(t){return J(t?.then)}function Oc(t){return J(t[bi])}function kc(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function Lc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _A(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fc=_A();function Vc(t){return J(t?.[Fc])}function Uc(t){return NI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Or(n.read());if(i)return yield Or(void 0);yield yield Or(r)}}finally{n.releaseLock()}})}function jc(t){return J(t?.getReader)}function xe(t){if(t instanceof ae)return t;if(t!=null){if(Oc(t))return IA(t);if(xc(t))return wA(t);if(Pc(t))return EA(t);if(kc(t))return xI(t);if(Vc(t))return DA(t);if(jc(t))return TA(t)}throw Lc(t)}function IA(t){return new ae(e=>{let n=t[bi]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wA(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function EA(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Dc)})}function DA(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function xI(t){return new ae(e=>{bA(t,e).catch(n=>e.error(n))})}function TA(t){return xI(Uc(t))}function bA(t,e){var n,r,i,s;return RI(this,void 0,void 0,function*(){try{for(n=MI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function dt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Yn(t,e=0){return de((n,r)=>{n.subscribe(ce(r,i=>dt(r,t,()=>r.next(i),e),()=>dt(r,t,()=>r.complete(),e),i=>dt(r,t,()=>r.error(i),e)))})}function Zn(t,e=0){return de((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function PI(t,e){return xe(t).pipe(Zn(e),Yn(e))}function OI(t,e){return xe(t).pipe(Zn(e),Yn(e))}function kI(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function LI(t,e){return new ae(n=>{let r;return dt(n,e,()=>{r=t[Fc](),dt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Bc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{dt(n,e,()=>{let r=t[Symbol.asyncIterator]();dt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function FI(t,e){return Bc(Uc(t),e)}function VI(t,e){if(t!=null){if(Oc(t))return PI(t,e);if(xc(t))return kI(t,e);if(Pc(t))return OI(t,e);if(kc(t))return Bc(t,e);if(Vc(t))return LI(t,e);if(jc(t))return FI(t,e)}throw Lc(t)}function Re(t,e){return e?VI(t,e):xe(t)}function G(...t){let e=Qn(t);return Re(t,e)}function Mi(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function Nh(t){return!!t&&(t instanceof ae||J(t.lift)&&J(t.subscribe))}var In=wi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return de((n,r)=>{let i=0;n.subscribe(ce(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:CA}=Array;function SA(t,e){return CA(e)?t(...e):t(e)}function $c(t){return ne(e=>SA(t,e))}var{isArray:AA}=Array,{getPrototypeOf:RA,prototype:NA,keys:MA}=Object;function Hc(t){if(t.length===1){let e=t[0];if(AA(e))return{args:e,keys:null};if(xA(e)){let n=MA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function xA(t){return t&&typeof t=="object"&&RA(t)===NA}function zc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function _o(...t){let e=Qn(t),n=Nc(t),{args:r,keys:i}=Hc(t);if(r.length===0)return Re([],e);let s=new ae(PA(r,e,i?o=>zc(i,o):yt));return n?s.pipe($c(n)):s}function PA(t,e,n=yt){return r=>{UI(e,()=>{let{length:i}=t,s=new Array(i),o=i,c=i;for(let u=0;u<i;u++)UI(e,()=>{let l=Re(t[u],e),h=!1;l.subscribe(ce(r,p=>{s[u]=p,h||(h=!0,c--),c||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function UI(t,e,n){t?dt(n,t,e):e()}function jI(t,e,n,r,i,s,o,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;xe(n(N,h++)).subscribe(ce(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?dt(e,o,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(ce(e,v,()=>{p=!0,m()})),()=>{c?.()}}function Pe(t,e,n=1/0){return J(e)?Pe((r,i)=>ne((s,o)=>e(r,s,i,o))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),de((r,i)=>jI(r,i,t,n)))}function xi(t=1/0){return Pe(yt,t)}function BI(){return xi(1)}function Pi(...t){return BI()(Re(t,Qn(t)))}function qc(t){return new ae(e=>{xe(t()).subscribe(e)})}function OA(...t){let e=Nc(t),{args:n,keys:r}=Hc(t),i=new ae(s=>{let{length:o}=n;if(!o){s.complete();return}let c=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;xe(n[h]).subscribe(ce(s,m=>{p||(p=!0,l--),c[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?zc(r,c):c),s.complete())}))}});return e?i.pipe($c(e)):i}function _t(t,e){return de((n,r)=>{let i=0;n.subscribe(ce(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Jn(t){return de((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ce(n,void 0,void 0,o=>{s=xe(t(o,Jn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function $I(t,e,n,r,i){return(s,o)=>{let c=n,u=e,l=0;s.subscribe(ce(o,h=>{let p=l++;u=c?t(u,h,p):(c=!0,h),r&&o.next(u)},i&&(()=>{c&&o.next(u),o.complete()})))}}function kr(t,e){return J(e)?Pe(t,e,1):Pe(t,1)}function Xn(t){return de((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function wn(t){return t<=0?()=>vt:de((e,n)=>{let r=0;e.subscribe(ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Mh(t){return ne(()=>t)}function Gc(t=kA){return de((e,n)=>{let r=!1;e.subscribe(ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function kA(){return new In}function Io(t){return de((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Kt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,s)=>t(i,s,r)):yt,wn(1),n?Xn(e):Gc(()=>new In))}function Oi(t){return t<=0?()=>vt:de((e,n)=>{let r=[];e.subscribe(ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function xh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,s)=>t(i,s,r)):yt,Oi(1),n?Xn(e):Gc(()=>new In))}function Wc(t,e){return de($I(t,e,arguments.length>=2,!0))}function Kc(...t){let e=Qn(t);return de((n,r)=>{(e?Pi(t,n,e):Pi(t,n)).subscribe(r)})}function Rt(t,e){return de((n,r)=>{let i=null,s=0,o=!1,c=()=>o&&!i&&r.complete();n.subscribe(ce(r,u=>{i?.unsubscribe();let l=0,h=s++;xe(t(u,h)).subscribe(i=ce(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{o=!0,c()}))})}function Ph(t){return de((e,n)=>{xe(t).subscribe(ce(n,()=>n.complete(),yo)),!n.closed&&e.subscribe(n)})}function Ve(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?de((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let c=!0;i.subscribe(ce(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yt}var bw="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(Bf(e,n)),this.code=e}};function Bf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Po(t){return{toString:t}.toString()}var Qc="__parameters__";function LA(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Cw(t,e,n){return Po(()=>{let r=LA(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return c.annotation=o,c;function c(u,l,h){let p=u.hasOwnProperty(Qc)?u[Qc]:Object.defineProperty(u,Qc,{value:[]})[Qc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Kh=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function FA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function HI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var VA=ve({__forward_ref__:ve});function Sw(t){return t.__forward_ref__=Sw,t.toString=function(){return ft(this())},t}function st(t){return Aw(t)?t():t}function Aw(t){return typeof t=="function"&&t.hasOwnProperty(VA)&&t.__forward_ref__===Sw}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Oo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ru(t){return zI(t,Nw)||zI(t,Mw)}function Rw(t){return Ru(t)!==null}function zI(t,e){return t.hasOwnProperty(e)?t[e]:null}function UA(t){let e=t&&(t[Nw]||t[Mw]);return e||null}function qI(t){return t&&(t.hasOwnProperty(GI)||t.hasOwnProperty(jA))?t[GI]:null}var Nw=ve({\u0275prov:ve}),GI=ve({\u0275inj:ve}),Mw=ve({ngInjectableDef:ve}),jA=ve({ngInjectorDef:ve}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function xw(t){return t&&!!t.\u0275providers}var BA=ve({\u0275cmp:ve}),$A=ve({\u0275dir:ve}),HA=ve({\u0275pipe:ve}),zA=ve({\u0275mod:ve}),su=ve({\u0275fac:ve}),Eo=ve({__NG_ELEMENT_ID__:ve}),WI=ve({__NG_ENV_ID__:ve});function $f(t){return typeof t=="string"?t:t==null?"":String(t)}function qA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():$f(t)}function GA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function Hf(t,e){throw new $(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{}),Qh;function Pw(){return Qh}function ht(t){let e=Qh;return Qh=t,e}function Ow(t,e,n){let r=Ru(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&re.Optional)return null;if(e!==void 0)return e;Hf(t,"Injector")}var WA={},Do=WA,Yh="__NG_DI_FLAG__",ou="ngTempTokenPath",KA="ngTokenPath",QA=/\n/gm,YA="\u0275",KI="__source",Ui;function ZA(){return Ui}function er(t){let e=Ui;return Ui=t,e}function JA(t,e=re.Default){if(Ui===void 0)throw new $(-203,!1);return Ui===null?Ow(t,void 0,e):Ui.get(t,e&re.Optional?null:void 0,e)}function W(t,e=re.Default){return(Pw()||JA)(st(t),e)}function O(t,e=re.Default){return W(t,Nu(e))}function Nu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zh(t){let e=[];for(let n=0;n<t.length;n++){let r=st(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=re.Default;for(let o=0;o<r.length;o++){let c=r[o],u=XA(c);typeof u=="number"?u===-1?i=c.token:s|=u:i=c}e.push(W(i,s))}else e.push(W(r))}return e}function kw(t,e){return t[Yh]=e,t.prototype[Yh]=e,t}function XA(t){return t[Yh]}function eR(t,e,n,r){let i=t[ou];throw e[KI]&&i.unshift(e[KI]),t.message=tR(`
`+t.message,i,n,r),t[KA]=i,t[ou]=null,t}function tR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==YA?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let c=e[o];s.push(o+":"+(typeof c=="string"?JSON.stringify(c):ft(c)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(QA,`
  `)}`}var Oe=kw(Cw("Optional"),8);var Lw=kw(Cw("SkipSelf"),4);function Fr(t,e){let n=t.hasOwnProperty(su);return n?t[su]:null}function zf(t,e){t.forEach(n=>Array.isArray(n)?zf(n,e):e(n))}function Fw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function au(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function rR(t,e,n){let r=ko(t,e);return r>=0?t[r|1]=n:(r=~r,nR(t,r,e,n)),r}function Oh(t,e){let n=ko(t,e);if(n>=0)return t[n|1]}function ko(t,e){return iR(t,e,1)}function iR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Bi={},Nt=[],$i=new j(""),Vw=new j("",-1),Uw=new j(""),cu=class{get(e,n=Do){if(n===Do){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}},jw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(jw||{}),Zt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zt||{}),rr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(rr||{});function sR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Jh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],c=n[r++];t.setAttribute(e,o,c,s)}else{let s=i,o=n[++r];oR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Bw(t){return t===3||t===4||t===6}function oR(t){return t.charCodeAt(0)===64}function To(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?QI(t,n,i,null,e[++r]):QI(t,n,i,null,null))}}return t}function QI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let c=t[s++];if(typeof c=="number"){if(c===e){o=-1;break}else if(c>e){o=s-1;break}}}for(;s<t.length;){let c=t[s];if(typeof c=="number")break;if(c===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var $w="ng-template";function aR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&sR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(qf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function qf(t){return t.type===4&&t.value!==$w}function cR(t,e,n){let r=t.type===4&&!n?$w:t.value;return e===r}function uR(t,e,n){let r=4,i=t.attrs,s=i!==null?hR(i):0,o=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!o&&!Ut(r)&&!Ut(u))return!1;if(o&&Ut(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!cR(t,u,n)||u===""&&e.length===1){if(Ut(r))return!1;o=!0}}else if(r&8){if(i===null||!aR(t,i,u,n)){if(Ut(r))return!1;o=!0}}else{let l=e[++c],h=lR(u,i,qf(t),n);if(h===-1){if(Ut(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ut(r))return!1;o=!0}}}}return Ut(r)||o}function Ut(t){return(t&1)===0}function lR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return fR(e,t)}function dR(t,e,n=!1){for(let r=0;r<e.length;r++)if(uR(t,e[r],n))return!0;return!1}function hR(t){for(let e=0;e<t.length;e++){let n=t[e];if(Bw(n))return e}return t.length}function fR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function YI(t,e){return t?":not("+e.trim()+")":e}function pR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let c=t[++n];i+="["+o+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ut(o)&&(e+=YI(s,i),i=""),r=o,s=s||!Ut(r);n++}return i!==""&&(e+=YI(s,i)),e}function gR(t){return t.map(pR).join(",")}function mR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ut(i))break;i=s}r++}return{attrs:e,classes:n}}function Hw(t){return Po(()=>{let e=Qw(t),n=we(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===jw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zt.Emulated,styles:t.styles||Nt,_:null,schemas:t.schemas||null,tView:null,id:""});Yw(n);let r=t.dependencies;return n.directiveDefs=JI(r,!1),n.pipeDefs=JI(r,!0),n.id=_R(n),n})}function yR(t){return ir(t)||qw(t)}function vR(t){return t!==null}function Lo(t){return Po(()=>({type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ZI(t,e){if(t==null)return Bi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,c=rr.None;Array.isArray(i)?(c=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=c!==rr.None?[r,c]:r,e[s]=o):n[s]=r}return n}function Mu(t){return Po(()=>{let e=Qw(t);return Yw(e),e})}function zw(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ir(t){return t[BA]||null}function qw(t){return t[$A]||null}function Gw(t){return t[HA]||null}function Ww(t){let e=ir(t)||qw(t)||Gw(t);return e!==null?e.standalone:!1}function Kw(t,e){let n=t[zA]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function Qw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Bi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ZI(t.inputs,e),outputs:ZI(t.outputs),debugInfo:null}}function Yw(t){t.features?.forEach(e=>e(t))}function JI(t,e){if(!t)return null;let n=e?Gw:yR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(vR)}function _R(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function xt(t){return{\u0275providers:t}}function IR(...t){return{\u0275providers:Zw(!0,t),\u0275fromNgModule:!0}}function Zw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return zf(e,o=>{let c=o;Xh(c,s,[],r)&&(i||=[],i.push(c))}),i!==void 0&&Jw(i,s),n}function Jw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Gf(i,s=>{e(s,r)})}}function Xh(t,e,n,r){if(t=st(t),!t)return!1;let i=null,s=qI(t),o=!s&&ir(t);if(!s&&!o){let u=t.ngModule;if(s=qI(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let c=r.has(i);if(o){if(c)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Xh(l,e,n,r)}}else if(s){if(s.imports!=null&&!c){r.add(i);let l;try{zf(s.imports,h=>{Xh(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Jw(l,e)}if(!c){let l=Fr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:Uw,useValue:i,multi:!0},i),e({provide:$i,useValue:()=>W(i),multi:!0},i)}let u=s.providers;if(u!=null&&!c){let l=t;Gf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Gf(t,e){for(let n of t)xw(n)&&(n=n.\u0275providers),Array.isArray(n)?Gf(n,e):e(n)}var wR=ve({provide:String,useValue:ve});function Xw(t){return t!==null&&typeof t=="object"&&wR in t}function ER(t){return!!(t&&t.useExisting)}function DR(t){return!!(t&&t.useFactory)}function Hi(t){return typeof t=="function"}function TR(t){return!!t.useClass}var xu=new j(""),eu={},bR={},kh;function Wf(){return kh===void 0&&(kh=new cu),kh}var It=class{},bo=class extends It{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tf(e,o=>this.processProvider(o)),this.records.set(Vw,ki(void 0,this)),i.has("environment")&&this.records.set(It,ki(void 0,this));let s=this.records.get(xu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Uw,Nt,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=er(this),r=ht(void 0),i;try{return e()}finally{er(n),ht(r)}}get(e,n=Do,r=re.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(WI))return e[WI](this);r=Nu(r);let i,s=er(this),o=ht(void 0);try{if(!(r&re.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=NR(e)&&Ru(e);l&&this.injectableDefInScope(l)?u=ki(ef(e),eu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=r&re.Self?Wf():this.parent;return n=r&re.Optional&&n===Do?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[ou]=c[ou]||[]).unshift(ft(e)),s)throw c;return eR(c,e,"R3InjectorError",this.source)}else throw c}finally{ht(o),er(s)}}resolveInjectorInitializers(){let e=se(null),n=er(this),r=ht(void 0),i;try{let s=this.get($i,Nt,re.Self);for(let o of s)o()}finally{er(n),ht(r),se(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=st(e);let n=Hi(e)?e:st(e&&e.provide),r=SR(e);if(!Hi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ki(void 0,eu,!0),i.factory=()=>Zh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=se(null);try{return n.value===eu&&(n.value=bR,n.value=n.factory()),typeof n.value=="object"&&n.value&&RR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=st(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ef(t){let e=Ru(t),n=e!==null?e.factory:Fr(t);if(n!==null)return n;if(t instanceof j)throw new $(204,!1);if(t instanceof Function)return CR(t);throw new $(204,!1)}function CR(t){if(t.length>0)throw new $(204,!1);let n=UA(t);return n!==null?()=>n.factory(t):()=>new t}function SR(t){if(Xw(t))return ki(void 0,t.useValue);{let e=eE(t);return ki(e,eu)}}function eE(t,e,n){let r;if(Hi(t)){let i=st(t);return Fr(i)||ef(i)}else if(Xw(t))r=()=>st(t.useValue);else if(DR(t))r=()=>t.useFactory(...Zh(t.deps||[]));else if(ER(t))r=()=>W(st(t.useExisting));else{let i=st(t&&(t.useClass||t.provide));if(AR(t))r=()=>new i(...Zh(t.deps));else return Fr(i)||ef(i)}return r}function ki(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AR(t){return!!t.deps}function RR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function NR(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function tf(t,e){for(let n of t)Array.isArray(n)?tf(n,e):n&&xw(n)?tf(n.\u0275providers,e):e(n)}function en(t,e){t instanceof bo&&t.assertNotDestroyed();let n,r=er(t),i=ht(void 0);try{return e()}finally{er(r),ht(i)}}function tE(){return Pw()!==void 0||ZA()!=null}function MR(t){if(!tE())throw new $(-203,!1)}function xR(t){return typeof t=="function"}var Tn=0,ee=1,Q=2,ct=3,jt=4,$t=5,Co=6,uu=7,Je=8,zi=9,Jt=10,Xe=11,So=12,XI=13,ts=14,Bt=15,qi=16,Li=17,Gi=18,Pu=19,nE=20,tr=21,Lh=22,Mt=23,wt=25,rE=1;var Vr=7,lu=8,du=9,at=10,hu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(hu||{});function nr(t){return Array.isArray(t)&&typeof t[rE]=="object"}function bn(t){return Array.isArray(t)&&t[rE]===!0}function iE(t){return(t.flags&4)!==0}function Ou(t){return t.componentOffset>-1}function Kf(t){return(t.flags&1)===1}function sr(t){return!!t.template}function nf(t){return(t[Q]&512)!==0}var rf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Fo(){return oE}function oE(t){return t.type.prototype.ngOnChanges&&(t.setInput=OR),PR}Fo.ngInherit=!0;function PR(){let t=cE(this),e=t?.current;if(e){let n=t.previous;if(n===Bi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function OR(t,e,n,r,i){let s=this.declaredInputs[r],o=cE(t)||kR(t,{previous:Bi,current:null}),c=o.current||(o.current={}),u=o.previous,l=u[s];c[s]=new rf(l&&l.currentValue,n,u===Bi),sE(t,e,i,n)}var aE="__ngSimpleChanges__";function cE(t){return t[aE]||null}function kR(t,e){return t[aE]=e}var ew=null;var Qt=function(t,e,n){ew?.(t,e,n)},LR="svg",FR="math";function Xt(t){for(;Array.isArray(t);)t=t[Tn];return t}function VR(t,e){return Xt(e[t])}function Pt(t,e){return Xt(e[t.index])}function Qf(t,e){return t.data[e]}function UR(t,e){return t[e]}function cr(t,e){let n=e[t];return nr(n)?n:n[Tn]}function Yf(t){return(t[Q]&128)===128}function jR(t){return bn(t[ct])}function Wi(t,e){return e==null?null:t[e]}function uE(t){t[Li]=0}function lE(t){t[Q]&1024||(t[Q]|=1024,Yf(t)&&Lu(t))}function BR(t,e){for(;t>0;)e=e[ts],t--;return e}function ku(t){return!!(t[Q]&9216||t[Mt]?.dirty)}function sf(t){t[Jt].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),ku(t)&&Lu(t)}function Lu(t){t[Jt].changeDetectionScheduler?.notify(0);let e=Ur(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Yf(e)));)e=Ur(e)}function dE(t,e){if((t[Q]&256)===256)throw new $(911,!1);t[tr]===null&&(t[tr]=[]),t[tr].push(e)}function $R(t,e){if(t[tr]===null)return;let n=t[tr].indexOf(e);n!==-1&&t[tr].splice(n,1)}function Ur(t){let e=t[ct];return bn(e)?e[ct]:e}var oe={lFrame:IE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var hE=!1;function HR(){return oe.lFrame.elementDepthCount}function zR(){oe.lFrame.elementDepthCount++}function qR(){oe.lFrame.elementDepthCount--}function fE(){return oe.bindingsEnabled}function GR(){return oe.skipHydrationRootTNode!==null}function WR(t){return oe.skipHydrationRootTNode===t}function KR(){oe.skipHydrationRootTNode=null}function _e(){return oe.lFrame.lView}function Et(){return oe.lFrame.tView}function X4(t){return oe.lFrame.contextLView=t,t[Je]}function eG(t){return oe.lFrame.contextLView=null,t}function Dt(){let t=pE();for(;t!==null&&t.type===64;)t=t.parent;return t}function pE(){return oe.lFrame.currentTNode}function QR(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vo(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function gE(){return oe.lFrame.isParent}function YR(){oe.lFrame.isParent=!1}function mE(){return hE}function tw(t){hE=t}function ZR(){let t=oe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JR(t){return oe.lFrame.bindingIndex=t}function Fu(){return oe.lFrame.bindingIndex++}function XR(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eN(){return oe.lFrame.inI18n}function tN(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,of(e)}function nN(){return oe.lFrame.currentDirectiveIndex}function of(t){oe.lFrame.currentDirectiveIndex=t}function rN(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function yE(t){oe.lFrame.currentQueryIndex=t}function iN(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function vE(t,e,n){if(n&re.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&re.Host);)if(i=iN(s),i===null||(s=s[ts],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=oe.lFrame=_E();return r.currentTNode=e,r.lView=t,!0}function Zf(t){let e=_E(),n=t[ee];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _E(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?IE(t):e}function IE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function wE(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var EE=wE;function Jf(){let t=wE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sN(t){return(oe.lFrame.contextLView=BR(t,oe.lFrame.contextLView))[Je]}function ns(){return oe.lFrame.selectedIndex}function jr(t){oe.lFrame.selectedIndex=t}function DE(){let t=oe.lFrame;return Qf(t.tView,t.selectedIndex)}function oN(){return oe.lFrame.currentNamespace}var TE=!0;function Xf(){return TE}function ep(t){TE=t}function aN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=oE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function tp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function tu(t,e,n){bE(t,e,3,n)}function nu(t,e,n,r){(t[Q]&3)===n&&bE(t,e,n,r)}function Fh(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function bE(t,e,n,r){let i=r!==void 0?t[Li]&65535:0,s=r??-1,o=e.length-1,c=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[Li]+=65536),(c<s||s==-1)&&(cN(t,n,e,u),t[Li]=(t[Li]&4294901760)+u+2),u++}function nw(t,e){Qt(4,t,e);let n=se(null);try{e.call(t)}finally{se(n),Qt(5,t,e)}}function cN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],c=t[o];i?t[Q]>>14<t[Li]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,nw(c,s)):nw(c,s)}var ji=-1,Br=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function uN(t){return t instanceof Br}function lN(t){return(t.flags&8)!==0}function dN(t){return(t.flags&16)!==0}var Vh={},af=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Nu(r);let i=this.injector.get(e,Vh,r);return i!==Vh||n===Vh?i:this.parentInjector.get(e,n,r)}};function CE(t){return t!==ji}function fu(t){return t&32767}function hN(t){return t>>16}function pu(t,e){let n=hN(t),r=e;for(;n>0;)r=r[ts],n--;return r}var cf=!0;function gu(t){let e=cf;return cf=t,e}var fN=256,SE=fN-1,AE=5,pN=0,Yt={};function gN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Eo)&&(r=n[Eo]),r==null&&(r=n[Eo]=pN++);let i=r&SE,s=1<<i;e.data[t+(i>>AE)]|=s}function mu(t,e){let n=RE(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,Uh(r.data,t),Uh(e,null),Uh(r.blueprint,null));let i=np(t,e),s=t.injectorIndex;if(CE(i)){let o=fu(i),c=pu(i,e),u=c[ee].data;for(let l=0;l<8;l++)e[s+l]=c[o+l]|u[o+l]}return e[s+8]=i,s}function Uh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function RE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function np(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=OE(i),r===null)return ji;if(n++,i=i[ts],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ji}function uf(t,e,n){gN(t,e,n)}function mN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(Bw(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function NE(t,e,n){if(n&re.Optional||t!==void 0)return t;Hf(e,"NodeInjector")}function ME(t,e,n,r){if(n&re.Optional&&r===void 0&&(r=null),!(n&(re.Self|re.Host))){let i=t[zi],s=ht(void 0);try{return i?i.get(e,r,n&re.Optional):Ow(e,r,n&re.Optional)}finally{ht(s)}}return NE(r,e,n)}function xE(t,e,n,r=re.Default,i){if(t!==null){if(e[Q]&2048&&!(r&re.Self)){let o=wN(t,e,n,r,Yt);if(o!==Yt)return o}let s=PE(t,e,n,r,Yt);if(s!==Yt)return s}return ME(e,n,r,i)}function PE(t,e,n,r,i){let s=_N(n);if(typeof s=="function"){if(!vE(e,t,r))return r&re.Host?NE(i,n,r):ME(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&re.Optional))Hf(n);else return o}finally{EE()}}else if(typeof s=="number"){let o=null,c=RE(t,e),u=ji,l=r&re.Host?e[Bt][$t]:null;for((c===-1||r&re.SkipSelf)&&(u=c===-1?np(t,e):e[c+8],u===ji||!iw(r,!1)?c=-1:(o=e[ee],c=fu(u),e=pu(u,e)));c!==-1;){let h=e[ee];if(rw(s,c,h.data)){let p=yN(c,e,n,o,r,l);if(p!==Yt)return p}u=e[c+8],u!==ji&&iw(r,e[ee].data[c+8]===l)&&rw(s,c,e)?(o=h,c=fu(u),e=pu(u,e)):c=-1}}return i}function yN(t,e,n,r,i,s){let o=e[ee],c=o.data[t+8],u=r==null?Ou(c)&&cf:r!=o&&(c.type&3)!==0,l=i&re.Host&&s===c,h=vN(c,o,n,u,l);return h!==null?Ki(e,o,h,c):Yt}function vN(t,e,n,r,i){let s=t.providerIndexes,o=e.data,c=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?c:c+h,m=i?c+h:l;for(let v=p;v<m;v++){let C=o[v];if(v<u&&n===C||v>=u&&C.type===n)return v}if(i){let v=o[u];if(v&&sr(v)&&v.type===n)return u}return null}function Ki(t,e,n,r){let i=t[n],s=e.data;if(uN(i)){let o=i;o.resolving&&GA(qA(s[n]));let c=gu(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?ht(o.injectImpl):null,h=vE(t,r,re.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&aN(n,s[n],e)}finally{l!==null&&ht(l),gu(c),o.resolving=!1,EE()}}return i}function _N(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Eo)?t[Eo]:void 0;return typeof e=="number"?e>=0?e&SE:IN:e}function rw(t,e,n){let r=1<<t;return!!(n[e+(t>>AE)]&r)}function iw(t,e){return!(t&re.Self)&&!(t&re.Host&&e)}var Lr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return xE(this._tNode,this._lView,e,Nu(r),n)}};function IN(){return new Lr(Dt(),_e())}function rp(t){return Po(()=>{let e=t.prototype.constructor,n=e[su]||lf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[su]||lf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function lf(t){return Aw(t)?()=>{let e=lf(st(t));return e&&e()}:Fr(t)}function wN(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let c=PE(s,o,n,r|re.Self,Yt);if(c!==Yt)return c;let u=s.parent;if(!u){let l=o[nE];if(l){let h=l.get(n,Yt,r);if(h!==Yt)return h}u=OE(o),o=o[ts]}s=u}return i}function OE(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}function ip(t){return mN(Dt(),t)}function sw(t,e=null,n=null,r){let i=kE(t,e,n,r);return i.resolveInjectorInitializers(),i}function kE(t,e=null,n=null,r,i=new Set){let s=[n||Nt,IR(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new bo(s,e||Wf(),r||null,i)}var je=class t{static{this.THROW_IF_NOT_FOUND=Do}static{this.NULL=new cu}static create(e,n){if(Array.isArray(e))return sw({name:""},n,e,"");{let r=e.name??"";return sw({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>W(Vw)})}static{this.__NG_ELEMENT_ID__=-1}};var EN=new j("");EN.__NG_ELEMENT_ID__=t=>{let e=Dt();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&re.Optional)return null;throw new $(204,!1)};var DN="ngOriginalError";function jh(t){return t[DN]}var LE=!0,sp=(()=>{class t{static{this.__NG_ELEMENT_ID__=TN}static{this.__NG_ENV_ID__=n=>n}}return t})(),df=class extends sp{constructor(e){super(),this._lView=e}onDestroy(e){return dE(this._lView,e),()=>$R(this._lView,e)}};function TN(){return new df(_e())}var rs=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();var hf=class extends Ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,tE()&&(this.destroyRef=O(sp,{optional:!0})??void 0,this.pendingTasks=O(rs,{optional:!0})??void 0)}emit(e){let n=se(null);try{super.next(e)}finally{se(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let c=super.subscribe({next:i,error:s,complete:o});return e instanceof Ae&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ot=hf;function yu(...t){}function FE(t){let e,n;function r(){t=yu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ow(t){return queueMicrotask(()=>t()),()=>{t=yu}}var op="isAngularZone",vu=op+"_ID",bN=0,pe=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ot(!1),this.onMicrotaskEmpty=new ot(!1),this.onStable=new ot(!1),this.onError=new ot(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=LE}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,AN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(op)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,CN,yu,yu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},CN={};function ap(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function SN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){FE(()=>{t.callbackScheduled=!1,ff(t),t.isCheckStableRunning=!0,ap(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),ff(t)}function AN(t){let e=()=>{SN(t)},n=bN++;t._inner=t._inner.fork({name:"angular",properties:{[op]:!0,[vu]:n,[vu+n]:!0},onInvokeTask:(r,i,s,o,c,u)=>{if(RN(u))return r.invokeTask(s,o,c,u);try{return aw(t),r.invokeTask(s,o,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),cw(t)}},onInvoke:(r,i,s,o,c,u,l)=>{try{return aw(t),r.invoke(s,o,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!NN(u)&&e(),cw(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,ff(t),ap(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function ff(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function aw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function cw(t){t._nesting--,ap(t)}var pf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ot,this.onMicrotaskEmpty=new ot,this.onStable=new ot,this.onError=new ot}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function RN(t){return VE(t,"__ignore_ng_zone__")}function NN(t){return VE(t,"__scheduler_tick__")}function VE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var En=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&jh(e);for(;n&&jh(n);)n=jh(n);return n||null}},MN=new j("",{providedIn:"root",factory:()=>{let t=O(pe),e=O(En);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function xN(){return cp(Dt(),_e())}function cp(t,e){return new Uo(Pt(t,e))}var Uo=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=xN}}return t})();function UE(t){return(t.flags&128)===128}var jE=new Map,PN=0;function ON(){return PN++}function kN(t){jE.set(t[Pu],t)}function gf(t){jE.delete(t[Pu])}var uw="__ngContext__";function $r(t,e){nr(e)?(t[uw]=e[Pu],kN(e)):t[uw]=e}function BE(t){return HE(t[So])}function $E(t){return HE(t[jt])}function HE(t){for(;t!==null&&!bn(t);)t=t[jt];return t}var mf;function zE(t){mf=t}function LN(){if(mf!==void 0)return mf;if(typeof document<"u")return document;throw new $(210,!1)}var up=new j("",{providedIn:"root",factory:()=>FN}),FN="ng",lp=new j(""),tn=new j("",{providedIn:"platform",factory:()=>"unknown"});var dp=new j("",{providedIn:"root",factory:()=>LN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var VN="h",UN="b";var jN=()=>null;function hp(t,e,n=!1){return jN(t,e,n)}var qE=!1,BN=new j("",{providedIn:"root",factory:()=>qE});var Yc;function $N(){if(Yc===void 0&&(Yc=null,Kh.trustedTypes))try{Yc=Kh.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Yc}function lw(t){return $N()?.createScriptURL(t)||t}var _u=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bw})`}};function jo(t){return t instanceof _u?t.changingThisBreaksApplicationSecurity:t}function fp(t,e){let n=HN(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${bw})`)}return n===e}function HN(t){return t instanceof _u&&t.getTypeName()||null}var zN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function GE(t){return t=String(t),t.match(zN)?t:"unsafe:"+t}var Vu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Vu||{});function qN(t){let e=KE();return e?e.sanitize(Vu.URL,t)||"":fp(t,"URL")?jo(t):GE($f(t))}function GN(t){let e=KE();if(e)return lw(e.sanitize(Vu.RESOURCE_URL,t)||"");if(fp(t,"ResourceURL"))return lw(jo(t));throw new $(904,!1)}function WN(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?GN:qN}function WE(t,e,n){return WN(e,n)(t)}function KE(){let t=_e();return t&&t[Jt].sanitizer}function QE(t){return t instanceof Function?t():t}function KN(t){return(t??O(je)).get(tn)==="browser"}var Dn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Dn||{}),QN;function pp(t,e){return QN(t,e)}function Fi(t,e,n,r,i){if(r!=null){let s,o=!1;bn(r)?s=r:nr(r)&&(o=!0,r=r[Tn]);let c=Xt(r);t===0&&n!==null?i==null?XE(e,n,c):Iu(e,n,c,i||null,!0):t===1&&n!==null?Iu(e,n,c,i||null,!0):t===2?uM(e,c,o):t===3&&e.destroyNode(c),s!=null&&dM(e,t,s,n,i)}}function YN(t,e){return t.createText(e)}function YE(t,e,n){return t.createElement(e,n)}function ZN(t,e){ZE(t,e),e[Tn]=null,e[$t]=null}function JN(t,e,n,r,i,s){r[Tn]=i,r[$t]=e,ju(t,r,n,1,i,s)}function ZE(t,e){e[Jt].changeDetectionScheduler?.notify(9),ju(t,e,e[Xe],2,null,null)}function XN(t){let e=t[So];if(!e)return Bh(t[ee],t);for(;e;){let n=null;if(nr(e))n=e[So];else{let r=e[at];r&&(n=r)}if(!n){for(;e&&!e[jt]&&e!==t;)nr(e)&&Bh(e[ee],e),e=e[ct];e===null&&(e=t),nr(e)&&Bh(e[ee],e),n=e&&e[jt]}e=n}}function eM(t,e,n,r){let i=at+r,s=n.length;r>0&&(n[i-1][jt]=e),r<s-at?(e[jt]=n[i],Fw(n,at+r,e)):(n.push(e),e[jt]=null),e[ct]=n;let o=e[qi];o!==null&&n!==o&&JE(o,e);let c=e[Gi];c!==null&&c.insertView(t),sf(e),e[Q]|=128}function JE(t,e){let n=t[du],r=e[ct];if(nr(r))t[Q]|=hu.HasTransplantedViews;else{let i=r[ct][Bt];e[Bt]!==i&&(t[Q]|=hu.HasTransplantedViews)}n===null?t[du]=[e]:n.push(e)}function gp(t,e){let n=t[du],r=n.indexOf(e);n.splice(r,1)}function Ao(t,e){if(t.length<=at)return;let n=at+e,r=t[n];if(r){let i=r[qi];i!==null&&i!==t&&gp(i,r),e>0&&(t[n-1][jt]=r[jt]);let s=au(t,at+e);ZN(r[ee],r);let o=s[Gi];o!==null&&o.detachView(s[ee]),r[ct]=null,r[jt]=null,r[Q]&=-129}return r}function Uu(t,e){if(!(e[Q]&256)){let n=e[Xe];n.destroyNode&&ju(t,e,n,3,null,null),XN(e)}}function Bh(t,e){if(e[Q]&256)return;let n=se(null);try{e[Q]&=-129,e[Q]|=256,e[Mt]&&yh(e[Mt]),nM(t,e),tM(t,e),e[ee].type===1&&e[Xe].destroy();let r=e[qi];if(r!==null&&bn(e[ct])){r!==e[ct]&&gp(r,e);let i=e[Gi];i!==null&&i.detachView(t)}gf(e)}finally{se(n)}}function tM(t,e){let n=t.cleanup,r=e[uu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[uu]=null);let i=e[tr];if(i!==null){e[tr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function nM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Br)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let c=i[s[o]],u=s[o+1];Qt(4,c,u);try{u.call(c)}finally{Qt(5,c,u)}}else{Qt(4,i,s);try{s.call(i)}finally{Qt(5,i,s)}}}}}function rM(t,e,n){return iM(t,e.parent,n)}function iM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Tn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Zt.None||s===Zt.Emulated)return null}return Pt(r,n)}}function Iu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XE(t,e,n){t.appendChild(e,n)}function dw(t,e,n,r,i){r!==null?Iu(t,e,n,r,i):XE(t,e,n)}function eD(t,e){return t.parentNode(e)}function sM(t,e){return t.nextSibling(e)}function oM(t,e,n){return cM(t,e,n)}function aM(t,e,n){return t.type&40?Pt(t,n):null}var cM=aM,hw;function mp(t,e,n,r){let i=rM(t,r,e),s=e[Xe],o=r.parent||e[$t],c=oM(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)dw(s,i,n[u],c,!1);else dw(s,i,n,c,!1);hw!==void 0&&hw(s,r,e,n,i)}function wo(t,e){if(e!==null){let n=e.type;if(n&3)return Pt(e,t);if(n&4)return yf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return wo(t,r);{let i=t[e.index];return bn(i)?yf(-1,i):Xt(i)}}else{if(n&128)return wo(t,e.next);if(n&32)return pp(e,t)()||Xt(t[e.index]);{let r=tD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ur(t[Bt]);return wo(i,r)}else return wo(t,e.next)}}}return null}function tD(t,e){if(e!==null){let r=t[Bt][$t],i=e.projection;return r.projection[i]}return null}function yf(t,e){let n=at+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return wo(r,i)}return e[Vr]}function uM(t,e,n){t.removeChild(null,e,n)}function yp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(o&&e===0&&(c&&$r(Xt(c),r),n.flags|=2),(n.flags&32)!==32)if(u&8)yp(t,e,n.child,r,i,s,!1),Fi(e,t,i,c,s);else if(u&32){let l=pp(n,r),h;for(;h=l();)Fi(e,t,i,h,s);Fi(e,t,i,c,s)}else u&16?lM(t,e,r,n,i,s):Fi(e,t,i,c,s);n=o?n.projectionNext:n.next}}function ju(t,e,n,r,i,s){yp(n,r,t.firstChild,e,i,s,!1)}function lM(t,e,n,r,i,s){let o=n[Bt],u=o[$t].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Fi(e,t,i,h,s)}else{let l=u,h=o[ct];UE(r)&&(l.flags|=128),yp(t,e,l,h,i,s,!0)}}function dM(t,e,n,r,i){let s=n[Vr],o=Xt(n);s!==o&&Fi(e,t,r,s,i);for(let c=at;c<n.length;c++){let u=n[c];ju(u[ee],u,t,e,r,s)}}function hM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Dn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Dn.Important),t.setStyle(n,r,i,s))}}function fM(t,e,n){t.setAttribute(e,"style",n)}function nD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function rD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Jh(t,e,r),i!==null&&nD(t,e,i),s!==null&&fM(t,e,s)}var is={};function tG(t=1){iD(Et(),_e(),ns()+t,!1)}function iD(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&tu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&nu(e,s,0,n)}jr(n)}function Ot(t,e=re.Default){let n=_e();if(n===null)return W(t,e);let r=Dt();return xE(r,n,st(t),e)}function sD(){let t="invalid";throw new Error(t)}function oD(t,e,n,r,i,s){let o=se(null);try{let c=null;i&rr.SignalBased&&(c=e[r][Kn]),c!==null&&c.transformFn!==void 0&&(s=c.transformFn(s)),i&rr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,c,s,n,r):sE(e,c,r,s)}finally{se(o)}}function pM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)jr(~i);else{let s=i,o=n[++r],c=n[++r];tN(o,s);let u=e[s];c(2,u)}}}finally{jr(-1)}}function Bu(t,e,n,r,i,s,o,c,u,l,h){let p=e.blueprint.slice();return p[Tn]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),uE(p),p[ct]=p[ts]=t,p[Je]=n,p[Jt]=o||t&&t[Jt],p[Xe]=c||t&&t[Xe],p[zi]=u||t&&t[zi]||null,p[$t]=s,p[Pu]=ON(),p[Co]=h,p[nE]=l,p[Bt]=e.type==2?t[Bt]:p,p}function $u(t,e,n,r,i){let s=t.data[e];if(s===null)s=gM(t,e,n,r,i),eN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=QR();s.injectorIndex=o===null?-1:o.injectorIndex}return Vo(s,!0),s}function gM(t,e,n,r,i){let s=pE(),o=gE(),c=o?s:s&&s.parent,u=t.data[e]=IM(t,c,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function aD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cD(t,e,n,r,i){let s=ns(),o=r&2;try{jr(-1),o&&e.length>wt&&iD(t,e,wt,!1),Qt(o?2:0,i),n(r,i)}finally{jr(s),Qt(o?3:1,i)}}function uD(t,e,n){if(iE(e)){let r=se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let c=t.data[o];if(c.contentQueries){let u=n[o];c.contentQueries(1,u,o)}}}finally{se(r)}}}function lD(t,e,n){fE()&&(SM(t,e,n,Pt(n,e)),(n.flags&64)===64&&gD(t,e,n))}function dD(t,e,n=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],c=o===-1?n(e,t):t[o];t[i++]=c}}}function hD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=vp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vp(t,e,n,r,i,s,o,c,u,l,h){let p=wt+r,m=p+i,v=mM(p,m),C=typeof l=="function"?l():l;return v[ee]={type:t,blueprint:v,template:n,queries:null,viewQuery:c,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function mM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:is);return n}function yM(t,e,n,r){let s=r.get(BN,qE)||n===Zt.ShadowDom,o=t.selectRootElement(e,s);return vM(o),o}function vM(t){_M(t)}var _M=()=>null;function IM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,c=0;return GR()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function fw(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let c,u=rr.None;Array.isArray(o)?(c=o[0],u=o[1]):c=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?pw(r,n,l,c,u):pw(r,n,l,c)}return r}function pw(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function wM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,c=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,C=m?m.outputs:null;u=fw(0,p.inputs,h,u,v),l=fw(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!qf(e)?VM(u,h,o):null;c.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=l}function EM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function DM(t,e,n,r,i,s,o,c){let u=Pt(e,n),l=e.inputs,h;!c&&l!=null&&(h=l[r])?(_p(t,n,h,r,i),Ou(e)&&TM(n,e.index)):e.type&3?(r=EM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function TM(t,e){let n=cr(e,t);n[Q]&16||(n[Q]|=64)}function fD(t,e,n,r){if(fE()){let i=r===null?null:{"":-1},s=RM(t,n),o,c;s===null?o=c=null:[o,c]=s,o!==null&&pD(t,e,n,o,i,c),i&&NM(n,r,i)}n.mergedAttrs=To(n.mergedAttrs,n.attrs)}function pD(t,e,n,r,i,s){for(let l=0;l<r.length;l++)uf(mu(n,e),t,r[l].type);xM(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,c=!1,u=aD(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=To(n.mergedAttrs,h.hostAttrs),PM(t,n,e,u,h),MM(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!c&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}wM(t,n,s)}function bM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let c=~e.index;CM(o)!=c&&o.push(c),o.push(n,r,s)}}function CM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function SM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Ou(n)&&OM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||mu(n,e),$r(r,e);let o=n.initialInputs;for(let c=i;c<s;c++){let u=t.data[c],l=Ki(e,t,c,n);if($r(l,e),o!==null&&FM(e,c-i,l,u,n,o),sr(u)){let h=cr(n.index,e);h[Je]=Ki(e,t,c,n)}}}function gD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=nN();try{jr(s);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];of(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&AM(u,l)}}finally{jr(-1),of(o)}}function AM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function RM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(dR(e,o.selectors,!1))if(r||(r=[]),sr(o))if(o.findHostDirectiveDefs!==null){let c=[];i=i||new Map,o.findHostDirectiveDefs(o,c,i),r.unshift(...c,o);let u=c.length;vf(t,e,u)}else r.unshift(o),vf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function vf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function NM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function MM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;sr(e)&&(n[""]=t)}}function xM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function PM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Fr(i.type,!0)),o=new Br(s,sr(i),Ot);t.blueprint[r]=o,n[r]=o,bM(t,e,r,aD(t,n,i.hostVars,is),i)}function OM(t,e,n){let r=Pt(e,t),i=hD(n),s=t[Jt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let c=Hu(t,Bu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=c}function kM(t,e,n,r,i,s){let o=Pt(t,e);LM(e[Xe],o,s,t.value,n,r,i)}function LM(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let c=o==null?$f(s):o(s,r||"",i);t.setAttribute(e,i,c,n)}}function FM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let c=0;c<o.length;){let u=o[c++],l=o[c++],h=o[c++],p=o[c++];oD(r,n,u,l,h,p)}}function VM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let c=0;c<o.length;c+=3)if(o[c]===e){r.push(s,o[c+1],o[c+2],n[i+1]);break}}i+=2}return r}function mD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function yD(t,e){let n=t.contentQueries;if(n!==null){let r=se(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let c=t.data[o];yE(s),c.contentQueries(2,e[o],o)}}}finally{se(r)}}}function Hu(t,e){return t[So]?t[XI][jt]=e:t[So]=e,t[XI]=e,e}function _f(t,e,n){yE(0);let r=se(null);try{e(t,n)}finally{se(r)}}function UM(t){return t[uu]??=[]}function jM(t){return t.cleanup??=[]}function vD(t,e){let n=t[zi],r=n?n.get(En,null):null;r&&r.handleError(e)}function _p(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],c=n[s++],u=n[s++],l=e[o],h=t.data[o];oD(h,l,r,c,u,i)}}function BM(t,e){let n=cr(e,t),r=n[ee];$M(r,n);let i=n[Tn];i!==null&&n[Co]===null&&(n[Co]=hp(i,n[zi])),Ip(r,n,n[Je])}function $M(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ip(t,e,n){Zf(e);try{let r=t.viewQuery;r!==null&&_f(1,r,n);let i=t.template;i!==null&&cD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Gi]?.finishViewCreation(t),t.staticContentQueries&&yD(t,e),t.staticViewQueries&&_f(2,t.viewQuery,n);let s=t.components;s!==null&&HM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,Jf()}}function HM(t,e){for(let n=0;n<e.length;n++)BM(t,e[n])}function wp(t,e,n,r){let i=se(null);try{let s=e.tView,c=t[Q]&4096?4096:16,u=Bu(t,s,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[qi]=l;let h=t[Gi];return h!==null&&(u[Gi]=h.createEmbeddedView(s)),Ip(s,u,n),u}finally{se(i)}}function _D(t,e){let n=at+e;if(n<t.length)return t[n]}function Ro(t,e){return!e||e.firstChild===null||UE(t)}function zu(t,e,n,r=!0){let i=e[ee];if(eM(i,e,t,n),r){let o=yf(n,t),c=e[Xe],u=eD(c,t[Vr]);u!==null&&JN(i,t[$t],c,e,u,o)}let s=e[Co];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ID(t,e){let n=Ao(t,e);return n!==void 0&&Uu(n[ee],n),n}function wu(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Xt(s)),bn(s)&&zM(s,r);let o=n.type;if(o&8)wu(t,e,n.child,r);else if(o&32){let c=pp(n,e),u;for(;u=c();)r.push(u)}else if(o&16){let c=tD(e,n);if(Array.isArray(c))r.push(...c);else{let u=Ur(e[Bt]);wu(u[ee],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function zM(t,e){for(let n=at;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&wu(r[ee],r,i,e)}t[Vr]!==t[Tn]&&e.push(t[Vr])}var wD=[];function qM(t){return t[Mt]??GM(t)}function GM(t){let e=wD.pop()??Object.create(KM);return e.lView=t,e}function WM(t){t.lView[Mt]!==t&&(t.lView=null,wD.push(t))}var KM=we(L({},mo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Lu(t.lView)},consumerOnSignalRead(){this.lView[Mt]=this}});function QM(t){let e=t[Mt]??Object.create(YM);return e.lView=t,e}var YM=we(L({},mo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ur(t.lView);for(;e&&!ED(e[ee]);)e=Ur(e);e&&lE(e)},consumerOnSignalRead(){this.lView[Mt]=this}});function ED(t){return t.type!==2}var ZM=100;function DD(t,e=!0,n=0){let r=t[Jt],i=r.rendererFactory,s=!1;s||i.begin?.();try{JM(t,n)}catch(o){throw e&&vD(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function JM(t,e){let n=mE();try{tw(!0),If(t,e);let r=0;for(;ku(t);){if(r===ZM)throw new $(103,!1);r++,If(t,1)}}finally{tw(n)}}function XM(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Jt].inlineEffectRunner?.flush(),Zf(e);let c=!0,u=null,l=null;s||(ED(t)?(l=qM(e),u=vc(l)):sI()===null?(c=!1,l=QM(e),u=vc(l)):e[Mt]&&(yh(e[Mt]),e[Mt]=null));try{uE(e),JR(t.bindingStartIndex),n!==null&&cD(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let v=t.preOrderCheckHooks;v!==null&&tu(e,v,null)}else{let v=t.preOrderHooks;v!==null&&nu(e,v,0,null),Fh(e,0)}if(o||ex(e),TD(e,0),t.contentQueries!==null&&yD(t,e),!s)if(h){let v=t.contentCheckHooks;v!==null&&tu(e,v)}else{let v=t.contentHooks;v!==null&&nu(e,v,1),Fh(e,1)}pM(t,e);let p=t.components;p!==null&&CD(e,p,0);let m=t.viewQuery;if(m!==null&&_f(2,m,r),!s)if(h){let v=t.viewCheckHooks;v!==null&&tu(e,v)}else{let v=t.viewHooks;v!==null&&nu(e,v,2),Fh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Lh]){for(let v of e[Lh])v();e[Lh]=null}s||(e[Q]&=-73)}catch(h){throw s||Lu(e),h}finally{l!==null&&(gh(l,u),c&&WM(l)),Jf()}}function TD(t,e){for(let n=BE(t);n!==null;n=$E(n))for(let r=at;r<n.length;r++){let i=n[r];bD(i,e)}}function ex(t){for(let e=BE(t);e!==null;e=$E(e)){if(!(e[Q]&hu.HasTransplantedViews))continue;let n=e[du];for(let r=0;r<n.length;r++){let i=n[r];lE(i)}}}function tx(t,e,n){let r=cr(e,t);bD(r,n)}function bD(t,e){Yf(t)&&If(t,e)}function If(t,e){let r=t[ee],i=t[Q],s=t[Mt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&mh(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)XM(r,t,r.template,t[Je]);else if(i&8192){TD(t,1);let c=r.components;c!==null&&CD(t,c,1)}}function CD(t,e,n){for(let r=0;r<e.length;r++)tx(t,e[r],n)}function Ep(t,e){let n=mE()?64:1088;for(t[Jt].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=Ur(t);if(nf(t)&&!r)return t;t=r}return null}var Qi=class{get rootNodes(){let e=this._lView,n=e[ee];return wu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Je]}set context(e){this._lView[Je]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(bn(e)){let n=e[lu],r=n?n.indexOf(this):-1;r>-1&&(Ao(e,r),au(n,r))}this._attachedToViewContainer=!1}Uu(this._lView[ee],this._lView)}onDestroy(e){dE(this._lView,e)}markForCheck(){Ep(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){sf(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,DD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nf(this._lView),n=this._lView[qi];n!==null&&!e&&gp(n,this._lView),ZE(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=nf(this._lView),r=this._lView[qi];r!==null&&!n&&JE(r,this._lView),sf(this._lView)}};var nG=new RegExp(`^(\\d+)*(${UN}|${VN})*(.*)`);var nx=()=>null;function No(t,e){return nx(t,e)}var Yi=class{},Dp=new j("",{providedIn:"root",factory:()=>!1});var SD=new j(""),AD=new j(""),wf=class{},Eu=class{};function rx(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[ix]=t,e}var ix="ngComponent";var Ef=class{resolveComponentFactory(e){throw rx(e)}},Zi=class{static{this.NULL=new Ef}},Ji=class{},qu=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>sx()}}return t})();function sx(){let t=_e(),e=Dt(),n=cr(e.index,t);return(nr(n)?n:t)[Xe]}var ox=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})();function Df(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let c=e[o];if(typeof c=="number")s=c;else if(s==1)i=HI(i,c);else if(s==2){let u=c,l=e[++o];r=HI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Du=class extends Zi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ir(e);return new Xi(n,this.ngModule)}};function gw(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,c=s?i[1]:rr.None;e?n.push({propName:o,templateName:r,isSignal:(c&rr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function ax(t){let e=t.toLowerCase();return e==="svg"?LR:e==="math"?FR:null}var Xi=class extends Eu{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=gw(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return gw(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=gR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=se(null);try{i=i||this.ngModule;let o=i instanceof It?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let c=o?new af(e,o):e,u=c.get(Ji,null);if(u===null)throw new $(407,!1);let l=c.get(ox,null),h=c.get(Yi,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?yM(m,r,this.componentDef.encapsulation,c):YE(m,v,ax(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=hp(C,c,!0));let k=vp(0,null,null,1,0,null,null,null,null,null,null),U=Bu(null,k,null,N,null,null,p,m,c,null,R);Zf(U);let z,ie,Ce=null;try{let Z=this.componentDef,D,y=null;Z.findHostDirectiveDefs?(D=[],y=new Map,Z.findHostDirectiveDefs(Z,D,y),D.push(Z)):D=[Z];let _=cx(U,C);Ce=ux(_,C,Z,D,U,p,m),ie=Qf(k,wt),C&&hx(m,Z,C,r),n!==void 0&&fx(ie,this.ngContentSelectors,n),z=dx(Ce,Z,D,y,U,[px]),Ip(k,U,null)}catch(Z){throw Ce!==null&&gf(Ce),gf(U),Z}finally{Jf()}return new Tf(this.componentType,z,cp(ie,U),U,ie)}finally{se(s)}}},Tf=class extends wf{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Qi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;_p(s[ee],s,i,e,n),this.previousInputValues.set(e,n);let o=cr(this._tNode.index,s);Ep(o,1)}}get injector(){return new Lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function cx(t,e){let n=t[ee],r=wt;return t[r]=e,$u(n,r,2,"#host",null)}function ux(t,e,n,r,i,s,o){let c=i[ee];lx(r,t,e,o);let u=null;e!==null&&(u=hp(e,i[zi]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Bu(i,hD(n),null,h,i[t.index],t,s,l,null,null,u);return c.firstCreatePass&&vf(c,t,r.length-1),Hu(i,p),i[t.index]=p}function lx(t,e,n,r){for(let i of t)e.mergedAttrs=To(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Df(e,e.mergedAttrs,!0),n!==null&&rD(r,n,e))}function dx(t,e,n,r,i,s){let o=Dt(),c=i[ee],u=Pt(o,i);pD(c,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Ki(i,c,p,o);$r(m,i)}gD(c,i,o),u&&$r(u,i);let l=Ki(i,c,o.directiveStart+o.componentOffset,o);if(t[Je]=i[Je]=l,s!==null)for(let h of s)h(l,e);return uD(c,o,i),l}function hx(t,e,n,r){if(r)Jh(t,n,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=mR(e.selectors[0]);i&&Jh(t,n,i),s&&s.length>0&&nD(t,n,s.join(" "))}}function fx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function px(){let t=Dt();tp(_e()[ee],t)}var Gu=(()=>{class t{static{this.__NG_ELEMENT_ID__=gx}}return t})();function gx(){let t=Dt();return yx(t,_e())}var mx=Gu,RD=class extends mx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return cp(this._hostTNode,this._hostLView)}get injector(){return new Lr(this._hostTNode,this._hostLView)}get parentInjector(){let e=np(this._hostTNode,this._hostLView);if(CE(e)){let n=pu(e,this._hostLView),r=fu(e),i=n[ee].data[r+8];return new Lr(i,n)}else return new Lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=mw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-at}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=No(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(c,i,Ro(this._hostTNode,o)),c}createComponent(e,n,r,i,s){let o=e&&!xR(e),c;if(o)c=n;else{let C=n||{};c=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new Xi(ir(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(It,null);N&&(s=N)}let h=ir(u.componentType??{}),p=No(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,c,Ro(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(jR(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[ct],l=new RD(u,u[$t],u[ct]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return zu(o,i,s,r),e.attachToViewContainerRef(),Fw($h(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=mw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ao(this._lContainer,n);r&&(au($h(this._lContainer),n),Uu(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ao(this._lContainer,n);return r&&au($h(this._lContainer),n)!=null?new Qi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mw(t){return t[lu]}function $h(t){return t[lu]||(t[lu]=[])}function yx(t,e){let n,r=e[t.index];return bn(r)?n=r:(n=mD(r,e,null,t),e[t.index]=n,Hu(e,n)),_x(n,e,t,r),new RD(n,t,e)}function vx(t,e){let n=t[Xe],r=n.createComment(""),i=Pt(e,t),s=eD(n,i);return Iu(n,s,r,sM(n,i),!1),r}var _x=Ex,Ix=()=>!1;function wx(t,e,n){return Ix(t,e,n)}function Ex(t,e,n,r){if(t[Vr])return;let i;n.type&8?i=Xt(r):i=vx(e,n),t[Vr]=i}var yw=new Set;function ur(t){yw.has(t)||(yw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function iG(t,e){ur("NgSignals");let n=mI(t),r=n[Kn];return e?.equal&&(r.equal=e.equal),n.set=i=>vh(r,i),n.update=i=>yI(r,i),n.asReadonly=Dx.bind(n),n}function Dx(){let t=this[Kn];if(t.readonlyFn===void 0){let e=()=>this();e[Kn]=t,t.readonlyFn=e}return t.readonlyFn}function Tx(t){return Object.getPrototypeOf(t.prototype).constructor}function bx(t){let e=Tx(t.type),n=!0,r=[t];for(;e;){let i;if(sr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Zc(t.inputs),o.inputTransforms=Zc(t.inputTransforms),o.declaredInputs=Zc(t.declaredInputs),o.outputs=Zc(t.outputs);let c=i.hostBindings;c&&Nx(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&Ax(t,u),l&&Rx(t,l),Cx(t,i),FA(t.outputs,i.outputs),sr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let c=s[o];c&&c.ngInherit&&c(t),c===bx&&(n=!1)}}e=Object.getPrototypeOf(e)}Sx(r)}function Cx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Sx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=To(i.hostAttrs,n=To(n,i.hostAttrs))}}function Zc(t){return t===Bi?{}:t===Nt?[]:t}function Ax(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Rx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Nx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Tp(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var or=class{},Mo=class{};var bf=class extends or{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Du(this);let s=Kw(e);this._bootstrapComponents=QE(s.bootstrap),this._r3Injector=kE(e,n,[{provide:or,useValue:this},{provide:Zi,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Cf=class extends Mo{constructor(e){super(),this.moduleType=e}create(e){return new bf(this.moduleType,e,[])}};var Tu=class extends or{constructor(e){super(),this.componentFactoryResolver=new Du(this),this.instance=null;let n=new bo([...e.providers,{provide:or,useValue:this},{provide:Zi,useValue:this.componentFactoryResolver}],e.parent||Wf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wu(t,e,n=null){return new Tu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Mx(t,e,n){return t[e]=n}function ss(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function xx(t){return(t.flags&32)===32}function Px(t,e,n,r,i,s,o,c,u){let l=e.consts,h=$u(e,t,4,o||null,c||null);fD(e,n,h,Wi(l,u)),tp(e,h);let p=h.tView=vp(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function Sf(t,e,n,r,i,s,o,c,u,l){let h=n+wt,p=e.firstCreatePass?Px(h,e,t,r,i,s,o,c,u):e.data[h];Vo(p,!1);let m=kx(e,t,p,n);Xf()&&mp(e,t,m,p),$r(m,t);let v=mD(m,t,m,p);return t[h]=v,Hu(t,v),wx(v,p,t),Kf(p)&&lD(e,t,p),u!=null&&dD(t,p,l),p}function Ox(t,e,n,r,i,s,o,c){let u=_e(),l=Et(),h=Wi(l.consts,s);return Sf(u,l,t,e,n,r,i,h,o,c),Ox}var kx=Lx;function Lx(t,e,n,r){return ep(!0),e[Xe].createComment("")}var Vi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Vi||{}),ND=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Af=class t{constructor(){this.ngZone=O(pe),this.scheduler=O(Yi),this.errorHandler=O(En,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Vi.EarlyRead,Vi.Write,Vi.MixedReadWrite,Vi.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}},Rf=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function bp(t,e){!e?.injector&&MR(bp);let n=e?.injector??O(je);return KN(n)?(ur("NgAfterNextRender"),Vx(t,n,e,!0)):Ux}function Fx(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Vx(t,e,n,r){let i=e.get(ND);i.impl??=e.get(Af);let s=n?.phase??Vi.MixedReadWrite,o=new Rf(i.impl,Fx(t,s),r,e.get(sp));return i.impl.register(o),o}var Ux={destroy(){}};function Cp(t,e,n,r){let i=_e(),s=Fu();if(ss(i,s,e)){let o=Et(),c=DE();kM(c,i,t,e,n,r)}return Cp}function Jc(t,e){return t<<17|e<<2}function Hr(t){return t>>17&32767}function jx(t){return(t&2)==2}function Bx(t,e){return t&131071|e<<17}function Nf(t){return t|2}function es(t){return(t&131068)>>2}function Hh(t,e){return t&-131069|e<<2}function $x(t){return(t&1)===1}function Mf(t){return t|1}function Hx(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,c=Hr(o),u=es(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ko(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Hr(t[c+1]);t[r+1]=Jc(m,c),m!==0&&(t[m+1]=Hh(t[m+1],r)),t[c+1]=Bx(t[c+1],r)}else t[r+1]=Jc(c,0),c!==0&&(t[c+1]=Hh(t[c+1],r)),c=r;else t[r+1]=Jc(u,0),c===0?c=r:t[u+1]=Hh(t[u+1],r),u=r;l&&(t[r+1]=Nf(t[r+1])),vw(t,h,r,!0),vw(t,h,r,!1),zx(e,h,t,r,s),o=Jc(c,u),s?e.classBindings=o:e.styleBindings=o}function zx(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ko(s,e)>=0&&(n[r+1]=Mf(n[r+1]))}function vw(t,e,n,r){let i=t[n+1],s=e===null,o=r?Hr(i):es(i),c=!1;for(;o!==0&&(c===!1||s);){let u=t[o],l=t[o+1];qx(u,e)&&(c=!0,t[o+1]=r?Mf(l):Nf(l)),o=r?Hr(l):es(l)}c&&(t[n+1]=r?Nf(i):Mf(i))}function qx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ko(t,e)>=0:!1}function Gx(t,e,n){let r=_e(),i=Fu();if(ss(r,i,e)){let s=Et(),o=DE();DM(s,o,r,t,e,r[Xe],n,!1)}return Gx}function _w(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";_p(t,n,s[o],o,r)}function Wx(t,e){return Kx(t,e,null,!0),Wx}function Kx(t,e,n,r){let i=_e(),s=Et(),o=XR(2);if(s.firstUpdatePass&&Yx(s,t,o,r),e!==is&&ss(i,o,e)){let c=s.data[ns()];tP(s,c,i,i[Xe],t,i[o+1]=nP(e,n),r,o)}}function Qx(t,e){return e>=t.expandoStartIndex}function Yx(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ns()],o=Qx(t,n);rP(s,r)&&e===null&&!o&&(e=!1),e=Zx(i,s,e,r),Hx(i,s,e,n,o,r)}}function Zx(t,e,n,r){let i=rN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zh(null,t,e,n,r),n=xo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=zh(i,t,e,n,r),s===null){let u=Jx(t,e,r);u!==void 0&&Array.isArray(u)&&(u=zh(null,t,e,u[1],r),u=xo(u,e.attrs,r),Xx(t,e,r,u))}else s=eP(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Jx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(es(r)!==0)return t[Hr(r)]}function Xx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Hr(i)]=r}function eP(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=xo(r,o,n)}return xo(r,e.attrs,n)}function zh(t,e,n,r,i){let s=null,o=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<o&&(s=e[c],r=xo(r,s.hostAttrs,i),s!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function xo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function tP(t,e,n,r,i,s,o,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],h=$x(l)?Iw(u,e,n,i,es(l),o):void 0;if(!bu(h)){bu(s)||jx(l)&&(s=Iw(u,null,n,i,c,o));let p=VR(ns(),n);hM(r,o,p,i,s)}}function Iw(t,e,n,r,i,s){let o=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===is&&(m=p?Nt:void 0);let v=p?Oh(m,r):h===r?m:void 0;if(l&&!bu(v)&&(v=Oh(u,r)),bu(v)&&(c=v,o))return c;let C=t[i+1];i=o?Hr(C):es(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(c=Oh(u,r))}return c}function bu(t){return t!==void 0}function nP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(jo(t)))),t}function rP(t,e){return(t.flags&(e?8:16))!==0}var xf=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function qh(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function iP(t,e,n){let r,i,s=0,o=t.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){let l=t.at(s),h=e[s],p=qh(s,l,s,h,n);if(p!==0){p<0&&t.updateValue(s,h),s++;continue}let m=t.at(o),v=e[u],C=qh(o,m,u,v,n);if(C!==0){C<0&&t.updateValue(o,v),o--,u--;continue}let N=n(s,l),R=n(o,m),k=n(s,h);if(Object.is(k,R)){let U=n(u,v);Object.is(U,N)?(t.swap(s,o),t.updateValue(o,v),u--,o--):t.move(o,s),t.updateValue(s,h),s++;continue}if(r??=new Cu,i??=Ew(t,s,o,n),Pf(t,r,s,k))t.updateValue(s,h),s++,o++;else if(i.has(k))r.set(N,t.detach(s)),o--;else{let U=t.create(s,e[s]);t.attach(s,U),s++,o++}}for(;s<=u;)ww(t,r,n,s,e[s]),s++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&s<=o;){let h=t.at(s),p=l.value,m=qh(s,h,s,p,n);if(m!==0)m<0&&t.updateValue(s,p),s++,l=u.next();else{r??=new Cu,i??=Ew(t,s,o,n);let v=n(s,p);if(Pf(t,r,s,v))t.updateValue(s,p),s++,o++,l=u.next();else if(!i.has(v))t.attach(s,t.create(s,p)),s++,o++,l=u.next();else{let C=n(s,h);r.set(C,t.detach(s)),o--}}}for(;!l.done;)ww(t,r,n,t.length,l.value),l=u.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(u=>{t.destroy(u)})}function Pf(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function ww(t,e,n,r,i){if(Pf(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function Ew(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var Cu=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function sG(t,e){ur("NgControlFlow");let n=_e(),r=Fu(),i=n[r]!==is?n[r]:-1,s=i!==-1?Su(n,wt+i):void 0,o=0;if(ss(n,r,t)){let c=se(null);try{if(s!==void 0&&ID(s,o),t!==-1){let u=wt+t,l=Su(n,u),h=Ff(n[ee],u),p=No(l,h.tView.ssrId),m=wp(n,h,e,{dehydratedView:p});zu(l,m,o,Ro(h,p))}}finally{se(c)}}else if(s!==void 0){let c=_D(s,o);c!==void 0&&(c[Je]=e)}}var Of=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-at}};function oG(t){return t}var kf=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function aG(t,e,n,r,i,s,o,c,u,l,h,p,m){ur("NgControlFlow");let v=_e(),C=Et(),N=u!==void 0,R=_e(),k=c?o.bind(R[Bt][Je]):o,U=new kf(N,k);R[wt+t]=U,Sf(v,C,t+1,e,n,r,i,Wi(C.consts,s)),N&&Sf(v,C,t+2,u,l,h,p,Wi(C.consts,m))}var Lf=class extends xf{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-at}at(e){return this.getLView(e)[Je].$implicit}attach(e,n){let r=n[Co];this.needsIndexUpdate||=e!==this.length,zu(this.lContainer,n,e,Ro(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,sP(this.lContainer,e)}create(e,n){let r=No(this.lContainer,this.templateTNode.tView.ssrId),i=wp(this.hostLView,this.templateTNode,new Of(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Uu(e[ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Je].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Je].$index=e}getLView(e){return oP(this.lContainer,e)}};function cG(t){let e=se(null),n=ns();try{let r=_e(),i=r[ee],s=r[n],o=n+1,c=Su(r,o);if(s.liveCollection===void 0){let l=Ff(i,o);s.liveCollection=new Lf(c,r,l)}else s.liveCollection.reset();let u=s.liveCollection;if(iP(u,t,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let l=Fu(),h=u.length===0;if(ss(r,l,h)){let p=n+2,m=Su(r,p);if(h){let v=Ff(i,p),C=No(m,v.tView.ssrId),N=wp(r,v,void 0,{dehydratedView:C});zu(m,N,0,Ro(v,C))}else ID(m,0)}}}finally{se(e)}}function Su(t,e){return t[e]}function sP(t,e){return Ao(t,e)}function oP(t,e){return _D(t,e)}function Ff(t,e){return Qf(t,e)}function aP(t,e,n,r,i,s){let o=e.consts,c=Wi(o,i),u=$u(e,t,2,r,c);return fD(e,n,u,Wi(o,s)),u.attrs!==null&&Df(u,u.attrs,!1),u.mergedAttrs!==null&&Df(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function MD(t,e,n,r){let i=_e(),s=Et(),o=wt+t,c=i[Xe],u=s.firstCreatePass?aP(o,s,i,e,n,r):s.data[o],l=cP(s,i,u,c,e,t);i[o]=l;let h=Kf(u);return Vo(u,!0),rD(c,l,u),!xx(u)&&Xf()&&mp(s,i,l,u),HR()===0&&$r(l,i),zR(),h&&(lD(s,i,u),uD(s,u,i)),r!==null&&dD(i,u),MD}function xD(){let t=Dt();gE()?YR():(t=t.parent,Vo(t,!1));let e=t;WR(e)&&KR(),qR();let n=Et();return n.firstCreatePass&&(tp(n,t),iE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&lN(e)&&_w(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dN(e)&&_w(n,e,_e(),e.stylesWithoutHost,!1),xD}function Sp(t,e,n,r){return MD(t,e,n,r),xD(),Sp}var cP=(t,e,n,r,i,s)=>(ep(!0),YE(r,i,oN()));function uG(){return _e()}var Au="en-US";var uP=Au;function lP(t){typeof t=="string"&&(uP=t.toLowerCase().replace(/_/g,"-"))}var dP=(t,e,n)=>{};function Ap(t,e,n,r){let i=_e(),s=Et(),o=Dt();return fP(s,i,i[Xe],o,t,e,r),Ap}function hP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let c=e[uu],u=i[s+2];return c.length>u?c[u]:null}typeof o=="string"&&(s+=2)}return null}function fP(t,e,n,r,i,s,o){let c=Kf(r),l=t.firstCreatePass&&jM(t),h=e[Je],p=UM(e),m=!0;if(r.type&3||o){let N=Pt(r,e),R=o?o(N):N,k=p.length,U=o?ie=>o(Xt(ie[r.index])):r.index,z=null;if(!o&&c&&(z=hP(t,e,i,r.index)),z!==null){let ie=z.__ngLastListenerFn__||z;ie.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=Tw(r,e,h,s),dP(N,i,s);let ie=n.listen(R,i,s);p.push(s,ie),l&&l.push(i,U,k,k+1)}}else s=Tw(r,e,h,s);let v=r.outputs,C;if(m&&v!==null&&(C=v[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let k=C[R],U=C[R+1],Ce=e[k][U].subscribe(s),Z=p.length;p.push(s,Ce),l&&l.push(i,r.index,Z,-(Z+1))}}}function Dw(t,e,n,r){let i=se(null);try{return Qt(6,e,n),n(r)!==!1}catch(s){return vD(t,s),!1}finally{Qt(7,e,n),se(i)}}function Tw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?cr(t.index,e):e;Ep(o,5);let c=Dw(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)c=Dw(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return c}}function lG(t=1){return sN(t)}function pP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function dG(t,e=""){let n=_e(),r=Et(),i=t+wt,s=r.firstCreatePass?$u(r,i,1,e,null):r.data[i],o=gP(r,n,s,e,t);n[i]=o,Xf()&&mp(r,n,o,s),Vo(s,!1)}var gP=(t,e,n,r,i)=>(ep(!0),YN(e[Xe],r));function mP(t,e,n){let r=Et();if(r.firstCreatePass){let i=sr(t);Vf(n,r.data,r.blueprint,i,!0),Vf(e,r.data,r.blueprint,i,!1)}}function Vf(t,e,n,r,i){if(t=st(t),Array.isArray(t))for(let s=0;s<t.length;s++)Vf(t[s],e,n,r,i);else{let s=Et(),o=_e(),c=Dt(),u=Hi(t)?t:st(t.provide),l=eE(t),h=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(Hi(t)||!t.multi){let v=new Br(l,i,Ot),C=Wh(u,e,i?h:h+m,p);C===-1?(uf(mu(c,o),s,u),Gh(s,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(v),o.push(v)):(n[C]=v,o[C]=v)}else{let v=Wh(u,e,h+m,p),C=Wh(u,e,h,h+m),N=v>=0&&n[v],R=C>=0&&n[C];if(i&&!R||!i&&!N){uf(mu(c,o),s,u);let k=_P(i?vP:yP,n.length,i,r,l);!i&&R&&(n[C].providerFactory=k),Gh(s,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=PD(n[i?C:v],l,!i&&r);Gh(s,t,v>-1?v:C,k)}!i&&r&&R&&n[C].componentProviders++}}}function Gh(t,e,n,r){let i=Hi(e),s=TR(e);if(i||s){let u=(s?st(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function PD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Wh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function yP(t,e,n,r){return Uf(this.multi,[])}function vP(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,c=Ki(n,n[ee],this.providerFactory.index,r);s=c.slice(0,o),Uf(i,s);for(let u=o;u<c.length;u++)s.push(c[u])}else s=[],Uf(i,s);return s}function Uf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function _P(t,e,n,r,i){let s=new Br(t,n,Ot);return s.multi=[],s.index=e,s.componentProviders=0,PD(s,i,r&&!n),s}function hG(t,e=[]){return n=>{n.providersResolver=(r,i)=>mP(r,i?i(t):t,e)}}var IP=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Zw(!1,n.type),i=r.length>0?Wu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(W(It))})}}return t})();function OD(t){ur("NgStandalone"),t.getStandaloneInjector=e=>e.get(IP).getOrCreateStandaloneInjector(t)}function wP(t,e){let n=t[e];return n===is?void 0:n}function EP(t,e,n,r,i,s){let o=e+n;return ss(t,o,i)?Mx(t,o+1,s?r.call(s,i):r(i)):wP(t,o+1)}function fG(t,e){let n=Et(),r,i=t+wt;n.firstCreatePass?(r=DP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Fr(r.type,!0)),o,c=ht(Ot);try{let u=gu(!1),l=s();return gu(u),pP(n,_e(),i,l),l}finally{ht(c)}}function DP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function pG(t,e,n){let r=t+wt,i=_e(),s=UR(i,r);return TP(i,r)?EP(i,ZR(),e,s.transform,n,s):s.transform(n)}function TP(t,e){return t[ee].data[e].pure}var ar=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},kD=new ar("18.2.5");var Ku=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var LD=new j("");function os(t){return!!t&&typeof t.then=="function"}function Rp(t){return!!t&&typeof t.subscribe=="function"}var Qu=new j(""),FD=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=O(Qu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(os(s))n.push(s);else if(Rp(s)){let o=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Yu=new j("");function bP(){gI(()=>{throw new $(600,!1)})}function CP(t){return t.isBoundToModule}var SP=10;function AP(t,e,n){try{let r=n();return os(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var zr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(MN),this.afterRenderManager=O(ND),this.zonelessEnabled=O(Dp),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ze,this.afterTick=new Ze,this.componentTypes=[],this.components=[],this.isStable=O(rs).hasPendingTasks.pipe(ne(n=>!n)),this._injector=O(It)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Eu;if(!this._injector.get(FD).done){let m=!i&&Ww(n),v=!1;throw new $(405,v)}let o;i?o=n:o=this._injector.get(Zi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let c=CP(o)?void 0:this._injector.get(or),u=r||o.selector,l=o.create(je.NULL,[],u,c),h=l.location.nativeElement,p=l.injector.get(LD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),ru(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new $(101,!1);let n=se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,se(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Ji,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<SP;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)RP(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ku(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ru(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Yu,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ru(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ru(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function RP(t,e,n,r){if(!n&&!ku(t))return;DD(t,e,n&&!r?0:1)}var jf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Zu=(()=>{class t{compileModuleSync(n){return new Cf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Kw(n),s=QE(i.declarations).reduce((o,c)=>{let u=ir(c);return u&&o.push(new Xi(u)),o},[]);return new jf(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var NP=(()=>{class t{constructor(){this.zone=O(pe),this.changeDetectionScheduler=O(Yi),this.applicationRef=O(zr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),MP=new j("",{factory:()=>!1});function VD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new pe(we(L({},UD()),{scheduleInRootZone:n})),[{provide:pe,useFactory:t},{provide:$i,multi:!0,useFactory:()=>{let r=O(NP,{optional:!0});return()=>r.initialize()}},{provide:$i,multi:!0,useFactory:()=>{let r=O(xP);return()=>{r.initialize()}}},e===!0?{provide:SD,useValue:!0}:[],{provide:AD,useValue:n??LE}]}function gG(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=VD({ngZoneFactory:()=>{let i=UD(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ur("NgZone_CoalesceEvent"),new pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return xt([{provide:MP,useValue:!0},{provide:Dp,useValue:!1},r])}function UD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var xP=(()=>{class t{constructor(){this.subscription=new Ae,this.initialized=!1,this.zone=O(pe),this.pendingTasks=O(rs)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var PP=(()=>{class t{constructor(){this.appRef=O(zr),this.taskService=O(rs),this.ngZone=O(pe),this.zonelessEnabled=O(Dp),this.disableScheduling=O(SD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ae,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(vu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(AD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof pf||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ow:FE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(vu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ow(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function OP(){return typeof $localize<"u"&&$localize.locale||Au}var Np=new j("",{providedIn:"root",factory:()=>O(Np,re.Optional|re.SkipSelf)||OP()});var jD=new j("");function Xc(t){return!!t.platformInjector}function kP(t){let e=Xc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(pe);return n.run(()=>{Xc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(En,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Xc(t)){let s=()=>e.destroy(),o=t.platformInjector.get(jD);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{ru(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return AP(r,n,()=>{let s=e.get(FD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Np,Au);if(lP(o||Au),Xc(t)){let c=e.get(zr);return t.rootComponent!==void 0&&c.bootstrap(t.rootComponent),c}else return LP(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function LP(t,e){let n=t.injector.get(zr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new $(-403,!1);e.push(t)}var iu=null;function FP(t=[],e){return je.create({name:e,providers:[{provide:xu,useValue:"platform"},{provide:jD,useValue:new Set([()=>iu=null])},...t]})}function VP(t=[]){if(iu)return iu;let e=FP(t);return iu=e,bP(),UP(e),e}function UP(t){t.get(lp,null)?.forEach(n=>n())}var as=(()=>{class t{static{this.__NG_ELEMENT_ID__=jP}}return t})();function jP(t){return BP(Dt(),_e(),(t&16)===16)}function BP(t,e,n){if(Ou(t)&&!n){let r=cr(t.index,e);return new Qi(r,r)}else if(t.type&175){let r=e[Bt];return new Qi(r,e)}return null}function BD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=VP(r),s=[VD({}),{provide:Yi,useExisting:PP},...n||[]],o=new Tu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return kP({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var $D=new j("");function Bo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function mG(t,e){ur("NgSignals");let n=hI(t);return e?.equal&&(n[Kn].equal=e.equal),n}function Mp(t){let e=se(null);try{return t()}finally{se(e)}}function HD(t){let e=ir(t);if(!e)return null;let n=new Xi(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var GD=null;function cs(){return GD}function WD(t){GD??=t}var Xu=class{};var ut=new j(""),Lp=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O($P),providedIn:"platform"})}}return t})(),KD=new j(""),$P=(()=>{class t extends Lp{constructor(){super(),this._doc=O(ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cs().getBaseHref(this._doc)}onPopState(n){let r=cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function Fp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function zD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Cn(t){return t&&t[0]!=="?"?"?"+t:t}var Sn=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Vp),providedIn:"root"})}}return t})(),QD=new j(""),Vp=(()=>{class t extends Sn{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Fp(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Cn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Cn(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Cn(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(Lp),W(QD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),YD=(()=>{class t extends Sn{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Fp(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Cn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Cn(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(Lp),W(QD,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),us=(()=>{class t{constructor(n){this._subject=new ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=qP(zD(qD(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Cn(r))}normalize(n){return t.stripTrailingSlash(zP(this._basePath,qD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Cn}static{this.joinWithSlash=Fp}static{this.stripTrailingSlash=zD}static{this.\u0275fac=function(r){return new(r||t)(W(Sn))}}static{this.\u0275prov=B({token:t,factory:()=>HP(),providedIn:"root"})}}return t})();function HP(){return new us(W(Sn))}function zP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function qD(t){return t.replace(/\/index.html$/,"")}function qP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ZD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function GP(t,e){return new $(2100,!1)}var xp=class{createSubscription(e,n){return Mp(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Mp(()=>e.unsubscribe())}},Pp=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},WP=new Pp,KP=new xp,zG=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(os(n))return WP;if(Rp(n))return KP;throw GP(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(Ot(as,16))}}static{this.\u0275pipe=zw({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var qG=new j("");var QP=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Lo({type:t})}static{this.\u0275inj=Oo({})}}return t})(),Up="browser",YP="server";function ZP(t){return t===Up}function jp(t){return t===YP}var JD=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>ZP(O(tn))?new Op(O(ut),window):new kp})}}return t})(),Op=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=JP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function JP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var kp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},el=class{};var Hp=class extends Xu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zp=class t extends Hp{static makeCurrent(){WD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=eO();return n==null?null:tO(n)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ZD(document.cookie,e)}},$o=null;function eO(){return $o=$o||document.querySelector("base"),$o?$o.getAttribute("href"):null}function tO(t){return new URL(t,document.baseURI).pathname}var nO=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),tl=new j(""),nT=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(W(tl),W(pe))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Ho=class{constructor(e){this._doc=e}},Bp="ng-app-id",rT=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=jp(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Bp}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Bp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Bp,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(W(ut),W(up),W(dp,8),W(tn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),$p={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gp=/%COMP%/g,iT="%COMP%",rO=`_nghost-${iT}`,iO=`_ngcontent-${iT}`,sO=!0,oO=new j("",{providedIn:"root",factory:()=>sO});function aO(t){return iO.replace(Gp,t)}function cO(t){return rO.replace(Gp,t)}function sT(t,e){return e.map(n=>n.replace(Gp,t))}var XD=(()=>{class t{constructor(n,r,i,s,o,c,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=jp(c),this.defaultRenderer=new zo(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zt.ShadowDom&&(r=we(L({},r),{encapsulation:Zt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof nl?i.applyToHost(n):i instanceof qo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Zt.Emulated:s=new nl(u,l,r,this.appId,h,o,c,p);break;case Zt.ShadowDom:return new qp(u,l,n,r,o,c,this.nonce,p);default:s=new qo(u,l,r,h,o,c,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(W(nT),W(rT),W(up),W(oO),W(ut),W(tn),W(pe),W(dp))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),zo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS($p[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(eT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(eT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=$p[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=$p[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Dn.DashCase|Dn.Important)?e.style.setProperty(n,r,i&Dn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Dn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=cs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function eT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var qp=class extends zo{constructor(e,n,r,i,s,o,c,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=sT(i.id,i.styles);for(let h of l){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qo=class extends zo{constructor(e,n,r,i,s,o,c,u){super(e,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?sT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},nl=class extends qo{constructor(e,n,r,i,s,o,c,u){let l=i+"-"+r.id;super(e,n,r,s,o,c,u,l),this.contentAttr=aO(l),this.hostAttr=cO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},uO=(()=>{class t extends Ho{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(W(ut))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),lO=(()=>{class t extends Ho{constructor(n){super(n),this.delegate=O($D,{optional:!0})}supports(n){return this.delegate?this.delegate.supports(n):!1}addEventListener(n,r,i){return this.delegate.addEventListener(n,r,i)}removeEventListener(n,r,i){return this.delegate.removeEventListener(n,r,i)}static{this.\u0275fac=function(r){return new(r||t)(W(ut))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),tT=["alt","control","meta","shift"],dO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},fO=(()=>{class t extends Ho{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cs().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),tT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=dO[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),tT.forEach(o=>{if(o!==i){let c=hO[o];c(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(W(ut))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function m9(t,e){return BD(L({rootComponent:t},pO(e)))}function pO(t){return{appProviders:[..._O,...t?.providers??[]],platformProviders:vO}}function gO(){zp.makeCurrent()}function mO(){return new En}function yO(){return zE(document),document}var vO=[{provide:tn,useValue:Up},{provide:lp,useValue:gO,multi:!0},{provide:ut,useFactory:yO,deps:[]}];var _O=[{provide:xu,useValue:"root"},{provide:En,useFactory:mO,deps:[]},{provide:tl,useClass:uO,multi:!0,deps:[ut,pe,tn]},{provide:tl,useClass:fO,multi:!0,deps:[ut]},{provide:tl,useClass:lO,multi:!0},XD,rT,nT,{provide:Ji,useExisting:XD},{provide:el,useClass:nO,deps:[]},[]];var oT=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(W(ut))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="primary",oa=Symbol("RouteTitle"),Zp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function gs(t){return new Zp(t)}function wO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],c=t[s];if(o[0]===":")i[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function EO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!nn(t[n],e[n]))return!1;return!0}function nn(t,e){let n=t?Jp(t):void 0,r=e?Jp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!yT(t[i],e[i]))return!1;return!0}function Jp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function yT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function vT(t){return t.length>0?t[t.length-1]:null}function hr(t){return Nh(t)?t:os(t)?Re(Promise.resolve(t)):G(t)}var DO={exact:IT,subset:wT},_T={exact:TO,subset:bO,ignored:()=>!0};function aT(t,e,n){return DO[n.paths](t.root,e.root,n.matrixParams)&&_T[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function TO(t,e){return nn(t,e)}function IT(t,e,n){if(!Gr(t.segments,e.segments)||!sl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!IT(t.children[r],e.children[r],n))return!1;return!0}function bO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yT(t[n],e[n]))}function wT(t,e,n){return ET(t,e,e.segments,n)}function ET(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Gr(i,n)||e.hasChildren()||!sl(i,n,r))}else if(t.segments.length===n.length){if(!Gr(t.segments,n)||!sl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!wT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Gr(t.segments,i)||!sl(t.segments,i,r)||!t.children[te]?!1:ET(t.children[te],e,s,r)}}function sl(t,e,n){return e.every((r,i)=>_T[n](t[i].parameters,r.parameters))}var Rn=class{constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){return AO.serialize(this)}},me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ol(this)}},qr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=gs(this.parameters),this._parameterMap}toString(){return TT(this)}};function CO(t,e){return Gr(t,e)&&t.every((n,r)=>nn(n.parameters,e[r].parameters))}function Gr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function SO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var aa=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new ms,providedIn:"root"})}}return t})(),ms=class{parse(e){let n=new eg(e);return new Rn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Go(e.root,!0)}`,r=MO(e.queryParams),i=typeof e.fragment=="string"?`#${RO(e.fragment)}`:"";return`${n}${r}${i}`}},AO=new ms;function ol(t){return t.segments.map(e=>TT(e)).join("/")}function Go(t,e){if(!t.hasChildren())return ol(t);if(e){let n=t.children[te]?Go(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${Go(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=SO(t,(r,i)=>i===te?[Go(t.children[te],!1)]:[`${i}:${Go(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${ol(t)}/${n[0]}`:`${ol(t)}/(${n.join("//")})`}}function DT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rl(t){return DT(t).replace(/%3B/gi,";")}function RO(t){return encodeURI(t)}function Xp(t){return DT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function al(t){return decodeURIComponent(t)}function cT(t){return al(t.replace(/\+/g,"%20"))}function TT(t){return`${Xp(t.path)}${NO(t.parameters)}`}function NO(t){return Object.entries(t).map(([e,n])=>`;${Xp(e)}=${Xp(n)}`).join("")}function MO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${rl(n)}=${rl(i)}`).join("&"):`${rl(n)}=${rl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var xO=/^[^\/()?;#]+/;function Wp(t){let e=t.match(xO);return e?e[0]:""}var PO=/^[^\/()?;=#]+/;function OO(t){let e=t.match(PO);return e?e[0]:""}var kO=/^[^=?&#]+/;function LO(t){let e=t.match(kO);return e?e[0]:""}var FO=/^[^&#]+/;function VO(t){let e=t.match(FO);return e?e[0]:""}var eg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new me(e,n)),r}parseSegment(){let e=Wp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new qr(al(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=OO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Wp(this.remaining);i&&(r=i,this.capture(r))}e[al(n)]=al(r)}parseQueryParam(e){let n=LO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=VO(this.remaining);o&&(r=o,this.capture(r))}let i=cT(n),s=cT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Wp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function bT(t){return t.segments.length>0?new me([],{[te]:t}):t}function CT(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=CT(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new me(t.segments,e);return UO(n)}function UO(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new me(t.segments.concat(e.segments),e.children)}return t}function Wr(t){return t instanceof Rn}function jO(t,e,n=null,r=null){let i=ST(t);return AT(i,e,n,r)}function ST(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let c=new me(s.url,o);return s===t&&(e=c),c}let r=n(t.root),i=bT(r);return e??i}function AT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Kp(i,i,i,n,r);let s=BO(e);if(s.toRoot())return Kp(i,i,new me([],{}),n,r);let o=$O(s,i,t),c=o.processChildren?Qo(o.segmentGroup,o.index,s.commands):NT(o.segmentGroup,o.index,s.commands);return Kp(i,o.segmentGroup,c,n,r)}function cl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Jo(t){return typeof t=="object"&&t!=null&&t.outlets}function Kp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=RT(t,e,n);let c=bT(CT(o));return new Rn(c,s,i)}function RT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=RT(s,e,n)}),new me(t.segments,r)}var ul=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&cl(r[0]))throw new $(4003,!1);let i=r.find(Jo);if(i&&i!==vT(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ul(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new ul(n,e,r)}var hs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function $O(t,e,n){if(t.isAbsolute)return new hs(e,!0,0);if(!n)return new hs(e,!1,NaN);if(n.parent===null)return new hs(n,!0,0);let r=cl(t.commands[0])?0:1,i=n.segments.length-1+r;return HO(n,i,t.numberOfDoubleDots)}function HO(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new hs(r,!1,i-s)}function zO(t){return Jo(t[0])?t[0].outlets:{[te]:t}}function NT(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return Qo(t,e,n);let r=qO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new me(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new me(t.segments.slice(r.pathIndex),t.children),Qo(s,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?tg(t,e,n):r.match?Qo(t,0,i):tg(t,e,n)}function Qo(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=zO(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=Qo(t.children[te],e,n);return new me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=NT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new me(t.segments,i)}}function qO(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],c=n[r];if(Jo(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!lT(u,l,o))return s;r+=2}else{if(!lT(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function tg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Jo(s)){let u=GO(s.outlets);return new me(r,u)}if(i===0&&cl(n[0])){let u=t.segments[e];r.push(new qr(u.path,uT(n[0]))),i++;continue}let o=Jo(s)?s.outlets[te]:`${s}`,c=i<n.length-1?n[i+1]:null;o&&c&&cl(c)?(r.push(new qr(o,uT(c))),i+=2):(r.push(new qr(o,{})),i++)}return new me(r,{})}function GO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=tg(new me([],{}),0,r))}),e}function uT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function lT(t,e,n){return t==n.path&&nn(e,n.parameters)}var Yo="imperative",Be=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Be||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},ys=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Be.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rn=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Be.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(bt||{}),ll=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ll||{}),An=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},lr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Be.NavigationSkipped}},Xo=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Be.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dl=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ng=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rg=class extends kt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Be.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ig=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Be.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},og=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ag=class{constructor(e){this.route=e,this.type=Be.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cg=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ug=class{constructor(e){this.snapshot=e,this.type=Be.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lg=class{constructor(e){this.snapshot=e,this.type=Be.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dg=class{constructor(e){this.snapshot=e,this.type=Be.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Be.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ea=class{},vs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function WO(t,e){return t.providers&&!t._injector&&(t._injector=Wu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ht(t){return t.outlet||te}function KO(t,e){let n=t.filter(r=>Ht(r)===e);return n.push(...t.filter(r=>Ht(r)!==e)),n}function ca(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var hg=class{get injector(){return ca(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ua(this.rootInjector),this.attachRef=null}},ua=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new hg(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(W(It))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),fl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=fg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=fg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=pg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pg(e,this._root).map(n=>n.value)}};function fg(t,e){if(t===e.value)return e;for(let n of e.children){let r=fg(t,n);if(r)return r}return null}function pg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=pg(t,n);if(r.length)return r.unshift(e),r}return[]}var Tt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ds(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var pl=class extends fl{constructor(e,n){super(e),this.snapshot=n,Dg(this,e)}toString(){return this.snapshot.toString()}};function MT(t){let e=QO(t),n=new qe([new qr("",{})]),r=new qe({}),i=new qe({}),s=new qe({}),o=new qe(""),c=new dr(n,r,s,o,i,te,t,e.root);return c.snapshot=e.root,new pl(new Tt(c,[]),e)}function QO(t){let e={},n={},r={},i="",s=new fs([],e,r,i,n,te,t,null,{});return new ml("",new Tt(s,[]))}var dr=class{constructor(e,n,r,i,s,o,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[oa]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>gs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>gs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&PT(i)&&(r.resolve[oa]=i.title),r}var fs=class{get title(){return this.data?.[oa]}constructor(e,n,r,i,s,o,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ml=class extends fl{constructor(e,n){super(n),this.url=e,Dg(this,n)}toString(){return xT(this._root)}};function Dg(t,e){e.value._routerState=t,e.children.forEach(n=>Dg(t,n))}function xT(t){let e=t.children.length>0?` { ${t.children.map(xT).join(", ")} } `:"";return`${t.value}${e}`}function Qp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),nn(e.params,n.params)||t.paramsSubject.next(n.params),EO(e.url,n.url)||t.urlSubject.next(n.url),nn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function gg(t,e){let n=nn(t.params,e.params)&&CO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||gg(t.parent,e.parent))}function PT(t){return typeof t.title=="string"||t.title===null}var YO=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new ot,this.deactivateEvents=new ot,this.attachEvents=new ot,this.detachEvents=new ot,this.parentContexts=O(ua),this.location=O(Gu),this.changeDetector=O(as),this.inputBinder=O(Il,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new mg(n,c,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Mu({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fo]})}}return t})(),mg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===dr?this.route:e===ua?this.childContexts:this.parent.get(e,n)}},Il=new j(""),dT=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=_o([r.queryParams,r.params,r.data]).pipe(Rt(([s,o,c],u)=>(c=L(L(L({},s),o),c),u===0?G(c):Promise.resolve(c)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=HD(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:c}of o.inputs)n.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function ZO(t,e,n){let r=ta(t,e._root,n?n._root:void 0);return new pl(r,e)}function ta(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=JO(t,e,n);return new Tt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ta(t,c)),o}}let r=XO(e.value),i=e.children.map(s=>ta(t,s));return new Tt(r,i)}}function JO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ta(t,r,i);return ta(t,r)})}function XO(t){return new dr(new qe(t.url),new qe(t.params),new qe(t.queryParams),new qe(t.fragment),new qe(t.data),t.outlet,t.component,t)}var na=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},OT="ngNavigationCancelingError";function yl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Wr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kT(!1,bt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function kT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[OT]=!0,n.cancellationCode=e,n}function ek(t){return LT(t)&&Wr(t.url)}function LT(t){return!!t&&t[OT]}var tk=(t,e,n,r)=>ne(i=>(new yg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),yg=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Qp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ds(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ds(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ds(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ds(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new dg(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ug(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Qp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Qp(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},vl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ps=class{constructor(e,n){this.component=e,this.route=n}};function nk(t,e,n){let r=t._root,i=e?e._root:null;return Wo(r,i,n,[r.value])}function rk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Is(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Rw(t)?t:e.get(t):r}function Wo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ds(e);return t.children.forEach(o=>{ik(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Zo(c,n.getContext(o),i)),i}function ik(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=sk(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Wo(t,e,c?c.children:null,r,i):Wo(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new ps(c.outlet.component,o))}else o&&Zo(e,c,i),i.canActivateChecks.push(new vl(r)),s.component?Wo(t,null,c?c.children:null,r,i):Wo(t,null,n,r,i);return i}function sk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gr(t.url,e.url)||!nn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gg(t,e)||!nn(t.queryParams,e.queryParams);case"paramsChange":default:return!gg(t,e)}}function Zo(t,e,n){let r=ds(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Zo(o,e.children.getContext(s),n):Zo(o,null,n):Zo(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ps(e.outlet.component,i)):n.canDeactivateChecks.push(new ps(null,i)):n.canDeactivateChecks.push(new ps(null,i))}function la(t){return typeof t=="function"}function ok(t){return typeof t=="boolean"}function ak(t){return t&&la(t.canLoad)}function ck(t){return t&&la(t.canActivate)}function uk(t){return t&&la(t.canActivateChild)}function lk(t){return t&&la(t.canDeactivate)}function dk(t){return t&&la(t.canMatch)}function FT(t){return t instanceof In||t?.name==="EmptyError"}var il=Symbol("INITIAL_VALUE");function _s(){return Rt(t=>_o(t.map(e=>e.pipe(wn(1),Kc(il)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===il)return il;if(n===!1||hk(n))return n}return!0}),_t(e=>e!==il),wn(1)))}function hk(t){return Wr(t)||t instanceof na}function fk(t,e){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(we(L({},n),{guardsResult:!0})):pk(o,r,i,t).pipe(Pe(c=>c&&ok(c)?gk(r,s,t,e):G(c)),ne(c=>we(L({},n),{guardsResult:c})))})}function pk(t,e,n,r){return Re(t).pipe(Pe(i=>Ik(i.component,i.route,n,e,r)),Kt(i=>i!==!0,!0))}function gk(t,e,n,r){return Re(e).pipe(kr(i=>Pi(yk(i.route.parent,r),mk(i.route,r),_k(t,i.path,n),vk(t,i.route,n))),Kt(i=>i!==!0,!0))}function mk(t,e){return t!==null&&e&&e(new lg(t)),G(!0)}function yk(t,e){return t!==null&&e&&e(new cg(t)),G(!0)}function vk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>qc(()=>{let o=ca(e)??n,c=Is(s,o),u=ck(c)?c.canActivate(e,t):en(o,()=>c(e,t));return hr(u).pipe(Kt())}));return G(i).pipe(_s())}function _k(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>rk(o)).filter(o=>o!==null).map(o=>qc(()=>{let c=o.guards.map(u=>{let l=ca(o.node)??n,h=Is(u,l),p=uk(h)?h.canActivateChild(r,t):en(l,()=>h(r,t));return hr(p).pipe(Kt())});return G(c).pipe(_s())}));return G(s).pipe(_s())}function Ik(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(c=>{let u=ca(e)??i,l=Is(c,u),h=lk(l)?l.canDeactivate(t,e,n,r):en(u,()=>l(t,e,n,r));return hr(h).pipe(Kt())});return G(o).pipe(_s())}function wk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let c=Is(o,t),u=ak(c)?c.canLoad(e,n):en(t,()=>c(e,n));return hr(u)});return G(s).pipe(_s(),VT(r))}function VT(t){return bc(Ve(e=>{if(typeof e!="boolean")throw yl(t,e)}),ne(e=>e===!0))}function Ek(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let c=Is(o,t),u=dk(c)?c.canMatch(e,n):en(t,()=>c(e,n));return hr(u)});return G(s).pipe(_s(),VT(r))}var ra=class{constructor(e){this.segmentGroup=e||null}},ia=class extends Error{constructor(e){super(),this.urlTree=e}};function ls(t){return Mi(new ra(t))}function Dk(t){return Mi(new $(4e3,!1))}function Tk(t){return Mi(kT(!1,bt.GuardRejected))}var vg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[te])return Dk(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let c=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:C,title:N}=i,R=en(s,()=>c({params:v,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Rn)throw new ia(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ia(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Rn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);r[i]=n[c]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([c,u])=>{o[c]=this.createSegmentGroup(e,u,r,i)}),new me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},_g={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bk(t,e,n,r,i){let s=UT(t,e,n);return s.matched?(r=WO(e,r),Ek(r,e,n,i).pipe(ne(o=>o===!0?s:L({},_g)))):G(s)}function UT(t,e,n){if(e.path==="**")return Ck(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},_g):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||wO)(n,t,e);if(!i)return L({},_g);let s={};Object.entries(i.posParams??{}).forEach(([c,u])=>{s[c]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Ck(t){return{matched:!0,parameters:t.length>0?vT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function hT(t,e,n,r){return n.length>0&&Rk(t,n,r)?{segmentGroup:new me(e,Ak(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&Nk(t,n,r)?{segmentGroup:new me(t.segments,Sk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function Sk(t,e,n,r){let i={};for(let s of n)if(wl(t,e,s)&&!r[Ht(s)]){let o=new me([],{});i[Ht(s)]=o}return L(L({},r),i)}function Ak(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&Ht(r)!==te){let i=new me([],{});n[Ht(r)]=i}return n}function Rk(t,e,n){return n.some(r=>wl(t,e,r)&&Ht(r)!==te)}function Nk(t,e,n){return n.some(r=>wl(t,e,r))}function wl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Mk(t,e,n){return e.length===0&&!t.children[n]}var Ig=class{};function xk(t,e,n,r,i,s,o="emptyOnly"){return new wg(t,e,n,r,i,o,s).recognize()}var Pk=31,wg=class{constructor(e,n,r,i,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new vg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=hT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:n,rootSnapshot:r})=>{let i=new Tt(r,n),s=new ml("",i),o=jO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new fs([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ne(r=>({children:r,rootSnapshot:n})),Jn(r=>{if(r instanceof ia)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ra?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ne(o=>o instanceof Tt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Re(s).pipe(kr(o=>{let c=r.children[o],u=KO(n,o);return this.processSegmentGroup(e,u,c,o,i)}),Wc((o,c)=>(o.push(...c),o)),Xn(null),xh(),Pe(o=>{if(o===null)return ls(r);let c=jT(o);return Ok(c),G(c)}))}processSegment(e,n,r,i,s,o,c){return Re(n).pipe(kr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,c).pipe(Jn(l=>{if(l instanceof ra)return G(null);throw l}))),Kt(u=>!!u),Jn(u=>{if(FT(u))return Mk(r,i,s)?G(new Ig):ls(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,c,u){return Ht(r)!==o&&(o===te||!wl(i,s,r))?ls(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):ls(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=UT(n,i,s);if(!u)return ls(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pk&&(this.allowRedirects=!1));let v=new fs(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,fT(i),Ht(i),i.component??i._loadedComponent??null,i,pT(i)),C=gl(v,c,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Pe(R=>this.processSegment(e,r,n,R.concat(m),o,!1,c)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let c=bk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),c.pipe(Rt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Rt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,C=new fs(m,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,fT(r),Ht(r),r.component??r._loadedComponent??null,r,pT(r)),N=gl(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=hT(n,m,v,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(ne(z=>new Tt(C,z)));if(l.length===0&&k.length===0)return G(new Tt(C,[]));let U=Ht(r)===s;return this.processSegment(h,l,R,k,U?te:s,!0,C).pipe(ne(z=>new Tt(C,z instanceof Tt?[z]:[])))}))):ls(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):wk(e,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ve(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Tk(n))):G({routes:[],injector:e})}};function Ok(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function kk(t){let e=t.value.routeConfig;return e&&e.path===""}function jT(t){let e=[],n=new Set;for(let r of t){if(!kk(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jT(r.children);e.push(new Tt(r.value,i))}return e.filter(r=>!n.has(r))}function fT(t){return t.data||{}}function pT(t){return t.resolve||{}}function Lk(t,e,n,r,i,s){return Pe(o=>xk(t,e,n,r,o.extractedUrl,i,s).pipe(ne(({state:c,tree:u})=>we(L({},o),{targetSnapshot:c,urlAfterRedirects:u}))))}function Fk(t,e){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of BT(u))o.add(l);let c=0;return Re(o).pipe(kr(u=>s.has(u)?Vk(u,r,t,e):(u.data=gl(u,u.parent,t).resolve,G(void 0))),Ve(()=>c++),Oi(1),Pe(u=>c===o.size?G(n):vt))})}function BT(t){let e=t.children.map(n=>BT(n)).flat();return[t,...e]}function Vk(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!PT(i)&&(s[oa]=i.title),Uk(s,t,e,r).pipe(ne(o=>(t._resolvedData=o,t.data=gl(t,t.parent,n).resolve,null)))}function Uk(t,e,n,r){let i=Jp(t);if(i.length===0)return G({});let s={};return Re(i).pipe(Pe(o=>jk(t[o],e,n,r).pipe(Kt(),Ve(c=>{if(c instanceof na)throw yl(new ms,c);s[o]=c}))),Oi(1),Mh(s),Jn(o=>FT(o)?vt:Mi(o)))}function jk(t,e,n,r){let i=ca(e)??r,s=Is(t,i),o=s.resolve?s.resolve(e,n):en(i,()=>s(e,n));return hr(o)}function Yp(t){return Rt(e=>{let n=t(e);return n?Re(n).pipe(ne(()=>e)):G(e)})}var $T=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[oa]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Bk),providedIn:"root"})}}return t})(),Bk=(()=>{class t extends $T{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(W(oT))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),da=new j("",{providedIn:"root",factory:()=>({})}),$k=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Hw({type:t,selectors:[["ng-component"]],standalone:!0,features:[OD],decls:1,vars:0,template:function(r,i){r&1&&Sp(0,"router-outlet")},dependencies:[YO],encapsulation:2})}}return t})();function Tg(t){let e=t.children&&t.children.map(Tg),n=e?we(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=$k),n}var sa=new j(""),bg=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(Zu)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=hr(n.loadComponent()).pipe(ne(HT),Ve(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Io(()=>{this.componentLoaders.delete(n)})),i=new Si(r,()=>new Ze).pipe(Ci());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Hk(r,this.compiler,n,this.onLoadEndListener).pipe(Io(()=>{this.childrenLoaders.delete(r)})),o=new Si(s,()=>new Ze).pipe(Ci());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Hk(t,e,n,r){return hr(t.loadChildren()).pipe(ne(HT),Pe(i=>i instanceof Mo||Array.isArray(i)?G(i):Re(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let s,o,c=!1;return Array.isArray(i)?(o=i,c=!0):(s=i.create(n).injector,o=s.get(sa,[],{optional:!0,self:!0}).flat()),{routes:o.map(Tg),injector:s}}))}function zk(t){return t&&typeof t=="object"&&"default"in t}function HT(t){return zk(t)?t.default:t}var Cg=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(qk),providedIn:"root"})}}return t})(),qk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zT=new j(""),qT=new j("");function Gk(t,e,n){let r=t.get(qT),i=t.get(ut);return t.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),c=i.startViewTransition(()=>(s(),Wk(t))),{onViewTransitionCreated:u}=r;return u&&en(t,()=>u({transition:c,from:e,to:n})),o})}function Wk(t){return new Promise(e=>{bp({read:()=>setTimeout(e)},{injector:t})})}var Kk=new j(""),Sg=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ze,this.transitionAbortSubject=new Ze,this.configLoader=O(bg),this.environmentInjector=O(It),this.urlSerializer=O(aa),this.rootContexts=O(ua),this.location=O(us),this.inputBindingEnabled=O(Il,{optional:!0})!==null,this.titleStrategy=O($T),this.options=O(da,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Cg),this.createViewTransition=O(zT,{optional:!0}),this.navigationErrorHandler=O(Kk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let n=i=>this.events.next(new og(i)),r=i=>this.events.next(new ag(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(we(L(L({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new qe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Yo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(s=>s.id!==0),ne(s=>we(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Rt(s=>{let o=!1,c=!1;return G(s).pipe(Rt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",bt.SupersededByNewNavigation),vt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?we(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new lr(u.id,this.urlSerializer.serialize(u.rawUrl),p,ll.IgnoredSameUrlNavigation)),u.resolve(!1),vt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(Rt(p=>{let m=this.transitions?.getValue();return this.events.next(new ys(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?vt:Promise.resolve(p)}),Lk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ve(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=we(L({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new dl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:C,extras:N}=u,R=new ys(p,this.urlSerializer.serialize(m),v,C);this.events.next(R);let k=MT(this.rootComponentType).snapshot;return this.currentTransition=s=we(L({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:we(L({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,G(s)}else{let p="";return this.events.next(new lr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,ll.IgnoredByUrlHandlingStrategy)),u.resolve(!1),vt}}),Ve(u=>{let l=new ng(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=s=we(L({},u),{guards:nk(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),fk(this.environmentInjector,u=>this.events.next(u)),Ve(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw yl(this.urlSerializer,u.guardsResult);let l=new rg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),_t(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",bt.GuardRejected),!1)),Yp(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(Ve(l=>{let h=new ig(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Rt(l=>{let h=!1;return G(l).pipe(Fk(this.paramsInheritanceStrategy,this.environmentInjector),Ve({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",bt.NoDataFromResolver)}}))}),Ve(l=>{let h=new sg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Yp(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ve(m=>{h.component=m}),ne(()=>{})));for(let m of h.children)p.push(...l(m));return p};return _o(l(u.targetSnapshot.root)).pipe(Xn(null),wn(1))}),Yp(()=>this.afterPreactivation()),Rt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Re(h).pipe(ne(()=>s)):G(s)}),ne(u=>{let l=ZO(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=we(L({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ve(()=>{this.events.next(new ea)}),tk(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),wn(1),Ve({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Ph(this.transitionAbortSubject.pipe(Ve(u=>{throw u}))),Io(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",bt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Jn(u=>{if(c=!0,LT(u))this.events.next(new An(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),ek(u)?this.events.next(new vs(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Xo(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=en(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof na){let{message:p,cancellationCode:m}=yl(this.urlSerializer,h);this.events.next(new An(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new vs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return vt}))}))}cancelNavigationTransition(n,r,i){let s=new An(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Qk(t){return t!==Yo}var Yk=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Zk),providedIn:"root"})}}return t})(),Eg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Zk=(()=>{class t extends Eg{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=rp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),GT=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>O(Jk),providedIn:"root"})}}return t})(),Jk=(()=>{class t extends GT{constructor(){super(...arguments),this.location=O(us),this.urlSerializer=O(aa),this.options=O(da,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Cg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=MT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ys)this.stateMemento=this.createStateMemento();else if(n instanceof lr)this.rawUrlTree=r.initialUrl;else if(n instanceof dl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ea?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof An&&(n.code===bt.GuardRejected||n.code===bt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Xo?this.restoreHistory(r,!0):n instanceof rn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Rn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=rp(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ko=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ko||{});function WT(t,e){t.events.pipe(_t(n=>n instanceof rn||n instanceof An||n instanceof Xo||n instanceof lr),ne(n=>n instanceof rn||n instanceof lr?Ko.COMPLETE:(n instanceof An?n.code===bt.Redirect||n.code===bt.SupersededByNewNavigation:!1)?Ko.REDIRECTING:Ko.FAILED),_t(n=>n!==Ko.REDIRECTING),wn(1)).subscribe(()=>{e()})}function Xk(t){throw t}var e1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},t1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(Ku),this.stateManager=O(GT),this.options=O(da,{optional:!0})||{},this.pendingTasks=O(rs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Sg),this.urlSerializer=O(aa),this.location=O(us),this.urlHandlingStrategy=O(Cg),this._events=new Ze,this.errorHandler=this.options.errorHandler||Xk,this.navigated=!1,this.routeReuseStrategy=O(Yk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(sa,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Il,{optional:!0}),this.eventsSubscription=new Ae,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof An&&r.code!==bt.Redirect&&r.code!==bt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof rn)this.navigated=!0;else if(r instanceof vs){let o=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Qk(i.source)},o);this.scheduleNavigation(c,Yo,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}r1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Yo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Tg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=ST(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return AT(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Wr(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Yo,null,r)}navigate(n,r={skipLocationChange:!1}){return n1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=L({},e1):r===!1?i=L({},t1):i=r,Wr(n))return aT(this.currentUrlTree,n,i);let s=this.parseUrl(n);return aT(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let c,u,l;o?(c=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return WT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function n1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function r1(t){return!(t instanceof ea)&&!(t instanceof vs)}var F9=(()=>{class t{constructor(n,r,i,s,o,c){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new Ze,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof rn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Wr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(n!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:WE(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return this.routerLinkInput===null?null:Wr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(Ot(Nn),Ot(dr),ip("tabindex"),Ot(qu),Ot(Uo),Ot(Sn))}}static{this.\u0275dir=Mu({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Ap("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Cp("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Bo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Bo],replaceUrl:[2,"replaceUrl","replaceUrl",Bo],routerLink:"routerLink"},standalone:!0,features:[Tp,Fo]})}}return t})();var _l=class{};var i1=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_t(n=>n instanceof rn),kr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Wu(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return Re(i).pipe(xi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=G(null);let s=i.pipe(Pe(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Re([s,o]).pipe(xi())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(W(Nn),W(Zu),W(It),W(_l),W(bg))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),KT=new j(""),s1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ys?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof rn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof lr&&n.code===ll.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof hl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){sD()}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function V9(t,...e){return xt([{provide:sa,multi:!0,useValue:t},[],{provide:dr,useFactory:QT,deps:[Nn]},{provide:Yu,multi:!0,useFactory:YT},e.map(n=>n.\u0275providers)])}function QT(t){return t.routerState.root}function ha(t,e){return{\u0275kind:t,\u0275providers:e}}function YT(){let t=O(je);return e=>{let n=t.get(zr);if(e!==n.components[0])return;let r=t.get(Nn),i=t.get(ZT);t.get(Ag)===1&&r.initialNavigation(),t.get(JT,null,re.Optional)?.setUpPreloading(),t.get(KT,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZT=new j("",{factory:()=>new Ze}),Ag=new j("",{providedIn:"root",factory:()=>1});function o1(){return ha(2,[{provide:Ag,useValue:0},{provide:Qu,multi:!0,deps:[je],useFactory:e=>{let n=e.get(KD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Nn),s=e.get(ZT);WT(i,()=>{r(!0)}),e.get(Sg).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function a1(){return ha(3,[{provide:Qu,multi:!0,useFactory:()=>{let e=O(Nn);return()=>{e.setUpLocationChangeListener()}}},{provide:Ag,useValue:2}])}var JT=new j("");function c1(t){return ha(0,[{provide:JT,useExisting:i1},{provide:_l,useExisting:t}])}function u1(){return ha(8,[dT,{provide:Il,useExisting:dT}])}function l1(t){let e=[{provide:zT,useValue:Gk},{provide:qT,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return ha(9,e)}var gT=new j("ROUTER_FORROOT_GUARD"),d1=[us,{provide:aa,useClass:ms},Nn,ua,{provide:dr,useFactory:QT,deps:[Nn]},bg,[]],U9=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[d1,[],{provide:sa,multi:!0,useValue:n},{provide:gT,useFactory:g1,deps:[[Nn,new Oe,new Lw]]},{provide:da,useValue:r||{}},r?.useHash?f1():p1(),h1(),r?.preloadingStrategy?c1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?m1(r):[],r?.bindToComponentInputs?u1().\u0275providers:[],r?.enableViewTransitions?l1().\u0275providers:[],y1()]}}static forChild(n){return{ngModule:t,providers:[{provide:sa,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(W(gT,8))}}static{this.\u0275mod=Lo({type:t})}static{this.\u0275inj=Oo({})}}return t})();function h1(){return{provide:KT,useFactory:()=>{let t=O(JD),e=O(pe),n=O(da),r=O(Sg),i=O(aa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new s1(i,r,t,e,n)}}}function f1(){return{provide:Sn,useClass:YD}}function p1(){return{provide:Sn,useClass:Vp}}function g1(t){return"guarded"}function m1(t){return[t.initialNavigation==="disabled"?a1().\u0275providers:[],t.initialNavigation==="enabledBlocking"?o1().\u0275providers:[]]}var mT=new j("");function y1(){return[{provide:mT,useFactory:YT},{provide:Yu,multi:!0,useExisting:mT}]}var Ng={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var v1=function(t,e){if(!t)throw _1(e)},_1=function(t){return new Error("Firebase Database ("+Ng.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var nb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},I1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},rb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|c>>4,m=(c&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||l==null||p==null)throw new Mg;let m=s<<2|c>>4;if(r.push(m),l!==64){let v=c<<4&240|l>>2;if(r.push(v),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},w1=function(t){let e=nb(t);return rb.encodeByteArray(e,!0)},fa=function(t){return w1(t).replace(/\./g,"")},pa=function(t){try{return rb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $9(t){return ib(void 0,t)}function ib(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!E1(n)||(t[n]=ib(t[n],e[n]));return t}function E1(t){return t!=="__proto__"}function D1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var T1=()=>D1().__FIREBASE_DEFAULTS__,b1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&pa(t[1]);return e&&JSON.parse(e)},Dl=()=>{try{return T1()||b1()||C1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Pg=t=>{var e,n;return(n=(e=Dl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Tl=t=>{let e=Pg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Og=()=>{var t;return(t=Dl())===null||t===void 0?void 0:t.config},kg=t=>{var e;return(e=Dl())===null||e===void 0?void 0:e[`_${t}`]};var El=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function sb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fa(JSON.stringify(n)),fa(JSON.stringify(o)),""].join(".")}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ob(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function S1(){var t;let e=(t=Dl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ab(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ub(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lb(){let t=$e();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H9(){return Ng.NODE_CLIENT===!0||Ng.NODE_ADMIN===!0}function db(){return!S1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lg(){try{return typeof indexedDB=="object"}catch{return!1}}function hb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var A1="FirebaseError",lt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=A1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mn.prototype.create)}},Mn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?R1(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new lt(i,c,r)}};function R1(t,e){return t.replace(N1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var N1=/\{\$([^}]+)}/g;function XT(t){return JSON.parse(t)}function z9(t){return JSON.stringify(t)}var fb=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=XT(pa(s[0])||""),n=XT(pa(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var q9=function(t){let e=fb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},G9=function(t){let e=fb(t).claims;return typeof e=="object"&&e.admin===!0};function W9(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K9(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function pb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Q9(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Kr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(eb(s)&&eb(o)){if(!Kr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function eb(t){return t!==null&&typeof t=="object"}function ws(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var tb=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=c^s&(o^c),h=1518500249):(l=s^o^c,h=1859775393):p<60?(l=s&o|c&(s|o),h=2400959708):(l=s^o^c,h=3395469782);let m=(i<<5|i>>>27)+l+u+h+r[p]&4294967295;u=c,c=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function gb(t,e){let n=new xg(t,e);return n.subscribe.bind(n)}var xg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");M1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Rg),i.error===void 0&&(i.error=Rg),i.complete===void 0&&(i.complete=Rg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function M1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rg(){}function Y9(t,e){return`${t} failed: ${e} argument `}var Z9=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,v1(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},J9=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var X9=4*60*60*1e3;function be(t){return t&&t._delegate?t._delegate:t}var pt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Qr="[DEFAULT]";var Fg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new El;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P1(e))try{this.getOrInitializeService({instanceIdentifier:Qr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Qr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Qr){return this.instances.has(e)}getOptions(e=Qr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:x1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qr){return this.component?this.component.multipleInstances?e:Qr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function x1(t){return t===Qr?void 0:t}function P1(t){return t.instantiationMode==="EAGER"}var bl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Fg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var O1=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),k1={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},L1=ue.INFO,F1={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},V1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=F1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fr=class{constructor(e){this.name=e,this._logLevel=L1,this._logHandler=V1,this._userLogHandler=null,O1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var U1=(t,e)=>e.some(n=>t instanceof n),mb,yb;function j1(){return mb||(mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B1(){return yb||(yb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vb=new WeakMap,Ug=new WeakMap,_b=new WeakMap,Vg=new WeakMap,Bg=new WeakMap;function $1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(sn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,t)}).catch(()=>{}),Bg.set(e,t),e}function H1(t){if(Ug.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ug.set(t,e)}var jg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ug.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_b.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ib(t){jg=t(jg)}function z1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Cl(this),e,...n);return _b.set(r,e.sort?e.sort():[e]),sn(r)}:B1().includes(t)?function(...e){return t.apply(Cl(this),e),sn(vb.get(this))}:function(...e){return sn(t.apply(Cl(this),e))}}function q1(t){return typeof t=="function"?z1(t):(t instanceof IDBTransaction&&H1(t),U1(t,j1())?new Proxy(t,jg):t)}function sn(t){if(t instanceof IDBRequest)return $1(t);if(Vg.has(t))return Vg.get(t);let e=q1(t);return e!==t&&(Vg.set(t,e),Bg.set(e,t)),e}var Cl=t=>Bg.get(t);function Eb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),c=sn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(sn(o.result),u.oldVersion,u.newVersion,sn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var G1=["get","getKey","getAll","getAllKeys","count"],W1=["put","add","delete","clear"],$g=new Map;function wb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=W1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G1.includes(n)))return;let s=function(o,...c){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]})};return $g.set(e,s),s}Ib(t=>we(L({},t),{get:(e,n,r)=>wb(e,n)||t.get(e,n,r),has:(e,n)=>!!wb(e,n)||t.has(e,n)}));var zg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function K1(t){let e=t.getComponent();return e?.type==="VERSION"}var qg="@firebase/app",Db="0.10.11";var xn=new fr("@firebase/app"),Q1="@firebase/app-compat",Y1="@firebase/analytics-compat",Z1="@firebase/analytics",J1="@firebase/app-check-compat",X1="@firebase/app-check",eL="@firebase/auth",tL="@firebase/auth-compat",nL="@firebase/database",rL="@firebase/database-compat",iL="@firebase/functions",sL="@firebase/functions-compat",oL="@firebase/installations",aL="@firebase/installations-compat",cL="@firebase/messaging",uL="@firebase/messaging-compat",lL="@firebase/performance",dL="@firebase/performance-compat",hL="@firebase/remote-config",fL="@firebase/remote-config-compat",pL="@firebase/storage",gL="@firebase/storage-compat",mL="@firebase/firestore",yL="@firebase/vertexai-preview",vL="@firebase/firestore-compat",_L="firebase",IL="10.13.2";var Gg="[DEFAULT]",wL={[qg]:"fire-core",[Q1]:"fire-core-compat",[Z1]:"fire-analytics",[Y1]:"fire-analytics-compat",[X1]:"fire-app-check",[J1]:"fire-app-check-compat",[eL]:"fire-auth",[tL]:"fire-auth-compat",[nL]:"fire-rtdb",[rL]:"fire-rtdb-compat",[iL]:"fire-fn",[sL]:"fire-fn-compat",[oL]:"fire-iid",[aL]:"fire-iid-compat",[cL]:"fire-fcm",[uL]:"fire-fcm-compat",[lL]:"fire-perf",[dL]:"fire-perf-compat",[hL]:"fire-rc",[fL]:"fire-rc-compat",[pL]:"fire-gcs",[gL]:"fire-gcs-compat",[mL]:"fire-fst",[vL]:"fire-fst-compat",[yL]:"fire-vertex","fire-js":"fire-js",[_L]:"fire-js-all"};var ga=new Map,EL=new Map,Wg=new Map;function Tb(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function on(t){let e=t.name;if(Wg.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,t);for(let n of ga.values())Tb(n,t);for(let n of EL.values())Tb(n,t);return!0}function Yr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zt(t){return t.settings!==void 0}var DL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pr=new Mn("app","Firebase",DL);var Kg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}};var gr=IL;function Zg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Gg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=Og()),!n)throw pr.create("no-options");let s=ga.get(i);if(s){if(Kr(n,s.options)&&Kr(r,s.config))return s;throw pr.create("duplicate-app",{appName:i})}let o=new bl(i);for(let u of Wg.values())o.addComponent(u);let c=new Kg(n,r,o);return ga.set(i,c),c}function mr(t=Gg){let e=ga.get(t);if(!e&&t===Gg&&Og())return Zg();if(!e)throw pr.create("no-app",{appName:t});return e}function Sl(){return Array.from(ga.values())}function De(t,e,n){var r;let i=(r=wL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(c.join(" "));return}on(new pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var TL="firebase-heartbeat-database",bL=1,ma="firebase-heartbeat-store",Hg=null;function Ab(){return Hg||(Hg=Eb(TL,bL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw pr.create("idb-open",{originalErrorMessage:t.message})})),Hg}function CL(t){return w(this,null,function*(){try{let n=(yield Ab()).transaction(ma),r=yield n.objectStore(ma).get(Rb(t));return yield n.done,r}catch(e){if(e instanceof lt)xn.warn(e.message);else{let n=pr.create("idb-get",{originalErrorMessage:e?.message});xn.warn(n.message)}}})}function bb(t,e){return w(this,null,function*(){try{let r=(yield Ab()).transaction(ma,"readwrite");yield r.objectStore(ma).put(e,Rb(t)),yield r.done}catch(n){if(n instanceof lt)xn.warn(n.message);else{let r=pr.create("idb-set",{originalErrorMessage:n?.message});xn.warn(r.message)}}})}function Rb(t){return`${t.name}!${t.options.appId}`}var SL=1024,AL=30*24*60*60*1e3,Qg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Yg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Cb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=AL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Cb(),{heartbeatsToSend:r,unsentEntries:i}=RL(this._heartbeatsCache.heartbeats),s=fa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xn.warn(n),""}})}};function Cb(){return new Date().toISOString().substring(0,10)}function RL(t,e=SL){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sb(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Yg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return Lg()?hb().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield CL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return bb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Sb(t){return fa(JSON.stringify({version:2,heartbeats:t})).length}function NL(t){on(new pt("platform-logger",e=>new zg(e),"PRIVATE")),on(new pt("heartbeat",e=>new Qg(e),"PRIVATE")),De(qg,Db,t),De(qg,Db,"esm2017"),De("fire-js","")}NL("");var ML="firebase",xL="10.13.2";De(ML,xL,"app");var Pn=new ar("ANGULARFIRE2_VERSION");function Ds(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Jr=(t,e)=>{let n=e?[e]:Sl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},yr=class{constructor(){return Jr(PL)}},PL="app-check";function Es(){}var Al=class{zone;delegate;constructor(e,n=Rh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Jg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),n.pipe(Ve({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},vr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Al(Zone.current)),this.insideAngular=n.run(()=>new Al(Zone.current,Ah)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(W(pe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function OL(t){return Rl().ngZone.runOutsideAngular(()=>t())}function Zr(t){return Rl().ngZone.run(()=>t())}function kL(t){return LL(Rl())(t)}function LL(t){return function(n){return n=n.lift(new Jg(t.ngZone)),n.pipe(Zn(t.outsideAngular),Yn(t.insideAngular))}}var FL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Zr(()=>t.apply(void 0,r))},gt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Zr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es))),r[s]=FL(r[s],n));let i=OL(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=Rl();return i.pipe(Zn(s.outsideAngular),Yn(s.insideAngular))}else return Zr(()=>i);return i instanceof ae?i.pipe(kL):i instanceof Promise?Zr(()=>new Promise((s,o)=>i.then(c=>Zr(()=>s(c)),c=>Zr(()=>o(c))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Zr(()=>i)};var qt=class{constructor(e){return e}},On=class{constructor(){return Sl()}};function VL(t){return t&&t.length===1?t[0]:new qt(mr())}var Xg=new j("angularfire2._apps"),UL={provide:qt,useFactory:VL,deps:[[new Oe,Xg]]},jL={provide:On,deps:[[new Oe,Xg]]};function BL(t){return(e,n)=>{let r=n.get(tn);De("angularfire",Pn.full,"core"),De("angularfire",Pn.full,"app"),De("angular",kD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new qt(i)}}function UW(t,...e){return xt([UL,jL,{provide:Xg,useFactory:BL(t),multi:!0,deps:[pe,je,vr,...e]}])}var jW=gt(Zg,!0);function zb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var qb=zb,Gb=new Mn("auth","Firebase",zb());var kl=new fr("@firebase/auth");function $L(t,...e){kl.logLevel<=ue.WARN&&kl.warn(`Auth (${gr}): ${t}`,...e)}function Ml(t,...e){kl.logLevel<=ue.ERROR&&kl.error(`Auth (${gr}): ${t}`,...e)}function cn(t,...e){throw ym(t,...e)}function Gt(t,...e){return ym(t,...e)}function mm(t,e,n){let r=Object.assign(Object.assign({},qb()),{[e]:n});return new Mn("auth","Firebase",r).create(e,{appName:t.name})}function Ir(t){return mm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HL(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&cn(t,"argument-error"),mm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ym(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Gb.create(t,...e)}function K(t,e,...n){if(!t)throw ym(e,...n)}function kn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ml(e),new Error(e)}function Fn(t,e){t||kn(e)}function nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function zL(){return Nb()==="http:"||Nb()==="https:"}function Nb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function qL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zL()||cb()||"connection"in navigator)?navigator.onLine:!0}function GL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Xr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=ob()||ub()}get(){return qL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vm(t,e){Fn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ll=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var WL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var KL=new Xr(3e4,6e4);function Wl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Cs(s,o,c,u){return w(this,arguments,function*(t,e,n,r,i={}){return Wb(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ws(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:m},l);return ab()||(v.referrerPolicy="no-referrer"),Ll.fetch()(Qb(t,t.config.apiHost,n,p),v)}))})}function Wb(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},WL),e);try{let i=new rm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Nl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Nl(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw mm(t,h,l);cn(t,h)}}catch(i){if(i instanceof lt)throw i;cn(t,"network-request-failed",{message:String(i)})}})}function Kb(s,o,c,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Cs(t,e,n,r,i);return"mfaPendingCredential"in l&&cn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function Qb(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?vm(t.config,i):`${t.config.apiScheme}://${i}`}var rm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gt(this.auth,"network-request-failed")),KL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Nl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Gt(t,e,r);return i.customData._tokenResponse=n,i}function QL(t,e){return w(this,null,function*(){return Cs(t,"POST","/v1/accounts:delete",e)})}function Yb(t,e){return w(this,null,function*(){return Cs(t,"POST","/v1/accounts:lookup",e)})}function ya(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _m(t,e=!1){return w(this,null,function*(){let n=be(t),r=yield n.getIdToken(e),i=Im(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ya(em(i.auth_time)),issuedAtTime:ya(em(i.iat)),expirationTime:ya(em(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function em(t){return Number(t)*1e3}function Im(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ml("JWT malformed, contained fewer than 3 sections"),null;try{let i=pa(n);return i?JSON.parse(i):(Ml("Failed to decode base64 JWT payload"),null)}catch(i){return Ml("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Mb(t){let e=Im(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function _a(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof lt&&YL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function YL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var im=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ia=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ya(this.lastLoginAt),this.creationTime=ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fl(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield _a(t,Yb(n,{idToken:r}));K(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Zb(s.providerUserInfo):[],c=ZL(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!c?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ia(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function wm(t){return w(this,null,function*(){let e=be(t);yield Fl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function ZL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Zb(t){return t.map(e=>{var{providerId:n}=e,r=Mc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function JL(t,e){return w(this,null,function*(){let n=yield Wb(t,{},()=>w(this,null,function*(){let r=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Qb(t,i,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ll.fetch()(o,{method:"POST",headers:c,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function XL(t,e){return w(this,null,function*(){return Cs(t,"POST","/v2/accounts:revokeToken",Wl(t,e))})}var va=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=Mb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield JL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return kn("not implemented")}};function _r(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var bs=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Mc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new im(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ia(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield _a(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return _m(this,e)}reload(){return wm(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Fl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(zt(this.auth.app))return Promise.reject(Ir(this.auth));let e=yield this.getIdToken();return yield _a(this,QL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,c,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:ie,isAnonymous:Ce,providerData:Z,stsTokenManager:D}=n;K(z&&D,e,"internal-error");let y=va.fromJSON(this.name,D);K(typeof z=="string",e,"internal-error"),_r(p,e.name),_r(m,e.name),K(typeof ie=="boolean",e,"internal-error"),K(typeof Ce=="boolean",e,"internal-error"),_r(v,e.name),_r(C,e.name),_r(N,e.name),_r(R,e.name),_r(k,e.name),_r(U,e.name);let _=new t({uid:z,auth:e,email:m,emailVerified:ie,displayName:p,isAnonymous:Ce,photoURL:C,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:k,lastLoginAt:U});return Z&&Array.isArray(Z)&&(_.providerData=Z.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new va;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Fl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Zb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new va;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ia(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var xb=new Map;function Ln(t){Fn(t instanceof Function,"Expected a class definition");let e=xb.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xb.set(t,e),e)}var eF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),sm=eF;function xl(t,e,n){return`firebase:${t}:${e}:${n}`}var Vl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=xl(this.userKey,i.apiKey,s),this.fullPersistenceKey=xl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?bs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Ln(sm),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Ln(sm),o=xl(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=bs._fromJSON(e,h);l!==s&&(c=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Pb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rC(e))return"Blackberry";if(iC(e))return"Webos";if(Xb(e))return"Safari";if((e.includes("chrome/")||eC(e))&&!e.includes("edge/"))return"Chrome";if(nC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Jb(t=$e()){return/firefox\//i.test(t)}function Xb(t=$e()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function eC(t=$e()){return/crios\//i.test(t)}function tC(t=$e()){return/iemobile/i.test(t)}function nC(t=$e()){return/android/i.test(t)}function rC(t=$e()){return/blackberry/i.test(t)}function iC(t=$e()){return/webos/i.test(t)}function Em(t=$e()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tF(t=$e()){var e;return Em(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nF(){return lb()&&document.documentMode===10}function sC(t=$e()){return Em(t)||nC(t)||iC(t)||rC(t)||/windows phone/i.test(t)||tC(t)}function oC(t,e=[]){let n;switch(t){case"Browser":n=Pb($e());break;case"Worker":n=`${Pb($e())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gr}/${r}`}var om=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,c)=>{try{let u=e(s);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function rF(n){return w(this,arguments,function*(t,e={}){return Cs(t,"GET","/v2/passwordPolicy",Wl(t,e))})}var iF=6,am=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:iF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var cm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ul(this),this.idTokenSubscription=new Ul(this),this.beforeStateQueue=new om(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Vl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield Yb(this,{idToken:e}),r=yield bs._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Fl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=GL()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(zt(this.app))return Promise.reject(Ir(this));let n=e?be(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return zt(this.app)?Promise.reject(Ir(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zt(this.app)?Promise.reject(Ir(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Ln(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield rF(this),n=new am(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield XL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ln(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield Vl.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&$L(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ta(t){return be(t)}var Ul=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gb(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Dm={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sF(t){Dm=t}function oF(t){return Dm.loadJS(t)}function aF(){return Dm.gapiScript}function aC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Tm(t,e){let n=Yr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Kr(s,e??{}))return i;cn(i,"already-initialized")}return n.initialize({options:e})}function cF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function bm(t,e,n){let r=Ta(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=cC(e),{host:o,port:c}=uF(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||lF()}function cC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uF(t){let e=cC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Ob(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Ob(o)}}}function Ob(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function lF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var wa=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,n){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}};function Ts(t,e){return w(this,null,function*(){return Kb(t,"POST","/v1/accounts:signInWithIdp",Wl(t,e))})}var dF="http://localhost",jl=class t extends wa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Mc(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Ts(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Ts(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Ts(e,n)}buildRequest(){let e={requestUri:dF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ws(n)}return e}};var Ea=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Bl=class extends Ea{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hF=(()=>{class t extends Bl{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return jl._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function fF(t,e){return w(this,null,function*(){return Kb(t,"POST","/v1/accounts:signUp",Wl(t,e))})}var ei=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield bs._fromIdTokenResponse(e,r,i),o=kb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=kb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function kb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function uC(t){return w(this,null,function*(){var e;if(zt(t.app))return Promise.reject(Ir(t));let n=Ta(t);if(yield n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ei({user:n.currentUser,providerId:null,operationType:"signIn"});let r=yield fF(n,{returnSecureToken:!0}),i=yield ei._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})}var um=class t extends lt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function lC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?um._fromErrorAndOperation(t,s,e,r):s})}function pF(t,e,n=!1){return w(this,null,function*(){let r=yield _a(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ei._forOperation(t,"link",r)})}function gF(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(zt(r.app))return Promise.reject(Ir(r));let i="reauthenticate";try{let s=yield _a(t,lC(r,i,e,t),n);K(s.idToken,r,"internal-error");let o=Im(s.idToken);K(o,r,"internal-error");let{sub:c}=o;return K(t.uid===c,r,"user-mismatch"),ei._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&cn(r,"user-mismatch"),s}})}function mF(t,e,n=!1){return w(this,null,function*(){if(zt(t.app))return Promise.reject(Ir(t));let r="signIn",i=yield lC(t,r,e),s=yield ei._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Cm(t,e,n,r){return be(t).onIdTokenChanged(e,n,r)}function Sm(t,e,n){return be(t).beforeAuthStateChanged(e,n)}var $l="__sak";var Hl=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($l,"1"),this.storage.removeItem($l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var yF=1e3,vF=10,_F=(()=>{class t extends Hl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);nF()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,vF):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},yF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield Wn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield Wn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield Wn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),dC=_F;var IF=(()=>{class t extends Hl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Am=IF;function wF(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var EF=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(c).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield wF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Rm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var lm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,u)=>{let l=Rm("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function an(){return window}function DF(t){an().location.href=t}function hC(){return typeof an().WorkerGlobalScope<"u"&&typeof an().importScripts=="function"}function TF(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function bF(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CF(){return hC()?self:null}var fC="firebaseLocalStorageDb",SF=1,zl="firebaseLocalStorage",pC="fbase_key",ti=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Kl(t,e){return t.transaction([zl],e?"readwrite":"readonly").objectStore(zl)}function AF(){let t=indexedDB.deleteDatabase(fC);return new ti(t).toPromise()}function dm(){let t=indexedDB.open(fC,SF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zl,{keyPath:pC})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(zl)?e(r):(r.close(),yield AF(),e(yield dm()))}))})}function Lb(t,e,n){return w(this,null,function*(){let r=Kl(t,!0).put({[pC]:e,value:n});return new ti(r).toPromise()})}function RF(t,e){return w(this,null,function*(){let n=Kl(t,!1).get(e),r=yield new ti(n).toPromise();return r===void 0?null:r.value})}function Fb(t,e){let n=Kl(t,!0).delete(e);return new ti(n).toPromise()}var NF=800,MF=3,xF=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield dm(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>MF)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return hC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=EF._getInstance(CF()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield TF(),!this.activeServiceWorker)return;this.sender=new lm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||bF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield dm();return yield Lb(n,$l,"1"),yield Fb(n,$l),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>Lb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>RF(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>Fb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=Kl(s,!1).getAll();return new ti(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),NF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),gC=xF;var YW=aC("rcb"),ZW=new Xr(3e4,6e4);function mC(t,e){return e?Ln(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Da=class extends wa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ts(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ts(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ts(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function PF(t){return mF(t.auth,new Da(t),t.bypassAuthState)}function OF(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),gF(n,new Da(t),t.bypassAuthState)}function kF(t){return w(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),pF(n,new Da(t),t.bypassAuthState)})}var ql=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PF;case"linkViaPopup":case"linkViaRedirect":return kF;case"reauthViaPopup":case"reauthViaRedirect":return OF;default:cn(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var LF=new Xr(2e3,1e4);function yC(t,e,n){return w(this,null,function*(){if(zt(t.app))return Promise.reject(Gt(t,"operation-not-supported-in-this-environment"));let r=Ta(t);HL(t,e,Ea);let i=mC(r,n);return new FF(r,"signInViaPopup",e,i).executeNotNull()})}var FF=(()=>{class t extends ql{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return w(this,null,function*(){let n=yield this.execute();return K(n,this.auth,"internal-error"),n})}onExecution(){return w(this,null,function*(){Fn(this.filter.length===1,"Popup operations only handle one event");let n=Rm();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,LF.get())};n()}}t.currentPopupAction=null;return t})(),VF="pendingRedirect",Pl=new Map,hm=class t extends ql{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Pl.get(this.auth._key());if(!e){try{let r=(yield UF(this.resolver,this.auth))?yield Wn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pl.set(this.auth._key(),e)}return this.bypassAuthState||Pl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return Wn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Wn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function UF(t,e){return w(this,null,function*(){let n=$F(e),r=BF(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function jF(t,e){Pl.set(t._key(),e)}function BF(t){return Ln(t._redirectPersistence)}function $F(t){return xl(VF,t.config.apiKey,t.name)}function HF(t,e,n=!1){return w(this,null,function*(){if(zt(t.app))return Promise.reject(Ir(t));let r=Ta(t),i=mC(r,e),o=yield new hm(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var zF=10*60*1e3,fm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!vC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vb(e))}saveEventToCache(e){this.cachedEventUids.add(Vb(e)),this.lastProcessedEventTime=Date.now()}};function Vb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function qF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vC(t);default:return!1}}function GF(n){return w(this,arguments,function*(t,e={}){return Cs(t,"GET","/v1/projects",e)})}var WF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KF=/^https?/;function QF(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield GF(t);for(let n of e)try{if(YF(n))return}catch{}cn(t,"unauthorized-domain")})}function YF(t){let e=nm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KF.test(n))return!1;if(WF.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ZF=new Xr(3e4,6e4);function Ub(){let t=an().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JF(t){return new Promise((e,n)=>{var r,i,s;function o(){Ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ub(),n(Gt(t,"network-request-failed"))},timeout:ZF.get()})}if(!((i=(r=an().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=an().gapi)===null||s===void 0)&&s.load)o();else{let c=aC("iframefcb");return an()[c]=()=>{gapi.load?o():n(Gt(t,"network-request-failed"))},oF(`${aF()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ol=null,e})}var Ol=null;function XF(t){return Ol=Ol||JF(t),Ol}var eV=new Xr(5e3,15e3),tV="__/auth/iframe",nV="emulator/auth/iframe",rV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sV(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?vm(e,nV):`https://${t.config.authDomain}/${tV}`,r={apiKey:e.apiKey,appName:t.name,v:gr},i=iV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ws(r).slice(1)}`}function oV(t){return w(this,null,function*(){let e=yield XF(t),n=an().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:sV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rV,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Gt(t,"network-request-failed"),c=an().setTimeout(()=>{s(o)},eV.get());function u(){an().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var aV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cV=500,uV=600,lV="_blank",dV="http://localhost",Gl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function hV(t,e,n,r=cV,i=uV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},aV),{width:r.toString(),height:i.toString(),top:s,left:o}),l=$e().toLowerCase();n&&(c=eC(l)?lV:n),Jb(l)&&(e=e||dV,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,C])=>`${m}${v}=${C},`,"");if(tF(l)&&c!=="_self")return fV(e||"",c),new Gl(null);let p=window.open(e||"",c,h);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Gl(p)}function fV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var pV="__/auth/handler",gV="emulator/auth/handler",mV=encodeURIComponent("fac");function jb(t,e,n,r,i,s){return w(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gr,eventId:i};if(e instanceof Ea){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",pb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Bl){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield t._getAppCheckToken(),l=u?`#${mV}=${encodeURIComponent(u)}`:"";return`${yV(t)}?${ws(c).slice(1)}${l}`})}function yV({config:t}){return t.emulator?vm(t,gV):`https://${t.authDomain}/${pV}`}var tm="webStorageSupport",pm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Am,this._completeRedirectFn=HF,this._overrideRedirectResult=jF}_openPopup(e,n,r,i){return w(this,null,function*(){var s;Fn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield jb(e,n,r,nm(),i);return hV(e,o,Rm())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield jb(e,n,r,nm(),i);return DF(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Fn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield oV(e),r=new fm(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[tm];o!==void 0&&n(!!o),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sC()||Xb()||Em()}},_C=pm;var Bb="@firebase/auth",$b="1.7.9";var gm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function vV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _V(t){on(new pt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oC(t)},l=new cm(r,i,s,u);return cF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),on(new pt("auth-internal",e=>{let n=Ta(e.getProvider("auth").getImmediate());return(r=>new gm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),De(Bb,$b,vV(t)),De(Bb,$b,"esm2017")}var IV=5*60,wV=kg("authIdTokenMaxAge")||IV,Hb=null,EV=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wV)return;let i=n?.token;Hb!==i&&(Hb=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Nm(t=mr()){let e=Yr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Tm(t,{popupRedirectResolver:_C,persistence:[gC,dC,Am]}),r=kg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=EV(s.toString());Sm(n,o,()=>o(n.currentUser)),Cm(n,c=>o(c))}}let i=Pg("auth");return i&&bm(n,`http://${i}`),n}function DV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Gt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",DV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_V("Browser");var IC="auth",ba=class{constructor(e){return e}},ni=class{constructor(){return Jr(IC)}};var Mm=new j("angularfire2.auth-instances");function gU(t,e){let n=Ds(IC,t,e);return n&&new ba(n)}function mU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ba(r)}}var yU={provide:ni,deps:[[new Oe,Mm]]},vU={provide:ba,useFactory:gU,deps:[[new Oe,Mm],qt]};function k3(t,...e){return De("angularfire",Pn.full,"auth"),xt([vU,yU,{provide:Mm,useFactory:mU(t),multi:!0,deps:[pe,je,vr,On,[new Oe,yr],...e]}])}var L3=gt(Nm,!0);var wC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},EC={};var wr,xm;(function(){var t;function e(D,y){function _(){}_.prototype=y.prototype,D.D=y.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(E,T,S){for(var I=Array(arguments.length-2),yn=2;yn<arguments.length;yn++)I[yn-2]=arguments[yn];return y.prototype[T].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)E[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;16>T;++T)E[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=D.g[0],_=D.g[1],T=D.g[2];var S=D.g[3],I=y+(S^_&(T^S))+E[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[1]+3905402710&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[2]+606105819&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[3]+3250441966&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(S^_&(T^S))+E[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[5]+1200080426&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[6]+2821735955&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[7]+4249261313&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(S^_&(T^S))+E[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[9]+2336552879&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[10]+4294925233&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[11]+2304563134&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(S^_&(T^S))+E[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[13]+4254626195&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[14]+2792965006&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[15]+1236535329&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(T^S&(_^T))+E[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[6]+3225465664&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[11]+643717713&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[0]+3921069994&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(T^S&(_^T))+E[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[10]+38016083&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[15]+3634488961&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[4]+3889429448&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(T^S&(_^T))+E[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[14]+3275163606&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[3]+4107603335&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[8]+1163531501&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(T^S&(_^T))+E[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[2]+4243563512&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[7]+1735328473&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[12]+2368359562&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(_^T^S)+E[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[8]+2272392833&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[11]+1839030562&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[14]+4259657740&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(_^T^S)+E[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[4]+1272893353&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[7]+4139469664&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[10]+3200236656&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(_^T^S)+E[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[0]+3936430074&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[3]+3572445317&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[6]+76029189&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(_^T^S)+E[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[12]+3873151461&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[15]+530742520&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[2]+3299628645&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(T^(_|~S))+E[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[7]+1126891415&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[14]+2878612391&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[5]+4237533241&4294967295,_=T+(I<<21&4294967295|I>>>11),I=y+(T^(_|~S))+E[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[3]+2399980690&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[10]+4293915773&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[1]+2240044497&4294967295,_=T+(I<<21&4294967295|I>>>11),I=y+(T^(_|~S))+E[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[15]+4264355552&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[6]+2734768916&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[13]+1309151649&4294967295,_=T+(I<<21&4294967295|I>>>11),I=y+(T^(_|~S))+E[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[11]+3174756917&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[2]+718787259&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var _=y-this.blockSize,E=this.B,T=this.h,S=0;S<y;){if(T==0)for(;S<=_;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<y;)if(E[T++]=D.charCodeAt(S++),T==this.blockSize){i(this,E),T=0;break}}else for(;S<y;)if(E[T++]=D[S++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var _=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=_&255,_/=256;for(this.u(D),D=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)D[_++]=this.g[y]>>>E&255;return D};function s(D,y){var _=c;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=y(D)}function o(D,y){this.h=y;for(var _=[],E=!0,T=D.length-1;0<=T;T--){var S=D[T]|0;E&&S==y||(_[T]=S,E=!1)}this.g=_}var c={};function u(D){return-128<=D&&128>D?s(D,function(y){return new o([y|0],0>y?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var y=[],_=1,E=0;D>=_;E++)y[E]=D/_|0,_*=4294967296;return new o(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return R(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,T=0;T<D.length;T+=8){var S=Math.min(8,D.length-T),I=parseInt(D.substring(T,T+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var D=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var y=l(Math.pow(D,6)),_=this,E="";;){var T=ie(_,y).g;_=k(_,T.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=T,C(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=k(this,D),N(D)?-1:C(D)?0:1};function R(D){for(var y=D.g.length,_=[],E=0;E<y;E++)_[E]=~D.g[E];return new o(_,~D.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0,T=0;T<=y;T++){var S=E+(this.i(T)&65535)+(D.i(T)&65535),I=(S>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);E=I>>>16,S&=65535,I&=65535,_[T]=I<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(D,y){return D.add(R(y))}t.j=function(D){if(C(this)||C(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(v)&&0>D.l(v))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<D.g.length;T++){var S=this.i(E)>>>16,I=this.i(E)&65535,yn=D.i(T)>>>16,Qs=D.i(T)&65535;_[2*E+2*T]+=I*Qs,U(_,2*E+2*T),_[2*E+2*T+1]+=S*Qs,U(_,2*E+2*T+1),_[2*E+2*T+1]+=I*yn,U(_,2*E+2*T+1),_[2*E+2*T+2]+=S*yn,U(_,2*E+2*T+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function U(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function z(D,y){this.g=D,this.h=y}function ie(D,y){if(C(y))throw Error("division by zero");if(C(D))return new z(p,p);if(N(D))return y=ie(R(D),y),new z(R(y.g),R(y.h));if(N(y))return y=ie(D,R(y)),new z(R(y.g),y.h);if(30<D.g.length){if(N(D)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(D);)_=Ce(_),E=Ce(E);var T=Z(_,1),S=Z(E,1);for(E=Z(E,2),_=Z(_,2);!C(E);){var I=S.add(E);0>=I.l(D)&&(T=T.add(_),S=I),E=Z(E,1),_=Z(_,1)}return y=k(D,T.j(y)),new z(T,y)}for(T=p;0<=D.l(y);){for(_=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),I=S.j(y);N(I)||0<I.l(D);)_-=E,S=l(_),I=S.j(y);C(S)&&(S=m),T=T.add(S),D=k(D,I)}return new z(T,D)}t.A=function(D){return ie(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&D.i(E);return new o(_,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|D.i(E);return new o(_,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^D.i(E);return new o(_,this.h^D.h)};function Ce(D){for(var y=D.g.length+1,_=[],E=0;E<y;E++)_[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(_,D.h)}function Z(D,y){var _=y>>5;y%=32;for(var E=D.g.length-_,T=[],S=0;S<E;S++)T[S]=0<y?D.i(S+_)>>>y|D.i(S+_+1)<<32-y:D.i(S+_);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xm=EC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,wr=EC.Integer=o}).apply(typeof wC<"u"?wC:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vn={};var Pm,Om,Ss,km,Ca,Yl,Lm,Fm,Vm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in f))break e;f=f[b]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,g=!1,b={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});var o=o||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),a.apply(d,b)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function C(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,b,A){for(var P=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)P[ye-2]=arguments[ye];return d.prototype[b].apply(g,P)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=a.length||0,A=g.length||0;a.length=b+A;for(let P=0;P<A;P++)a[b+P]=g[P]}else a.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(a){return/^[\s\xa0]*$/.test(a)}function z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function ie(a){return ie[" "](a),a}ie[" "]=function(){};var Ce=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Z(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function D(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function y(a){let d={};for(let f in a)d[f]=a[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)a[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function T(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function S(a){c.setTimeout(()=>{throw a},0)}function I(){var a=Bd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class yn{constructor(){this.h=this.g=null}add(d,f){let g=Qs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Qs=new k(()=>new D0,a=>a.reset());class D0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ys,Zs=!1,Bd=new yn,e_=()=>{let a=c.Promise.resolve(void 0);Ys=()=>{a.then(T0)}};var T0=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){S(f)}var d=Qs;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Zs=!1};function Hn(){this.s=this.s,this.C=this.C}Hn.prototype.s=!1,Hn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var b0=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function Js(a,d){if(We.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Ce){e:{try{ie(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:C0[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Js.aa.h.call(this)}}C(Js,We);var C0={2:"touch",3:"pen",4:"mouse"};Js.prototype.h=function(){Js.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xs="closure_listenable_"+(1e6*Math.random()|0),S0=0;function A0(a,d,f,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++S0,this.da=this.fa=!1}function Za(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ja(a){this.src=a,this.g={},this.h=0}Ja.prototype.add=function(a,d,f,g,b){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var P=Hd(a,d,g,b);return-1<P?(d=a[P],f||(d.fa=!1)):(d=new A0(d,this.src,A,!!g,b),d.fa=f,a.push(d)),d};function $d(a,d){var f=d.type;if(f in a.g){var g=a.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Za(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Hd(a,d,f,g){for(var b=0;b<a.length;++b){var A=a[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var zd="closure_lm_"+(1e6*Math.random()|0),qd={};function t_(a,d,f,g,b){if(g&&g.once)return r_(a,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)t_(a,d[A],f,g,b);return null}return f=Qd(f),a&&a[Xs]?a.K(d,f,l(g)?!!g.capture:!!g,b):n_(a,d,f,!1,g,b)}function n_(a,d,f,g,b,A){if(!d)throw Error("Invalid event type");var P=l(b)?!!b.capture:!!b,ye=Wd(a);if(ye||(a[zd]=ye=new Ja(a)),f=ye.add(d,f,g,P,A),f.proxy)return f;if(g=R0(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)b0||(b=P),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(s_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function R0(){function a(f){return d.call(a.src,a.listener,f)}let d=N0;return a}function r_(a,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)r_(a,d[A],f,g,b);return null}return f=Qd(f),a&&a[Xs]?a.L(d,f,l(g)?!!g.capture:!!g,b):n_(a,d,f,!0,g,b)}function i_(a,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)i_(a,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Qd(f),a&&a[Xs]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Hd(A,f,g,b),-1<f&&(Za(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=Wd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Hd(d,f,g,b)),(f=-1<a?d[a]:null)&&Gd(f))}function Gd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Xs])$d(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(s_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Wd(d))?($d(f,a),f.h==0&&(f.src=null,d[zd]=null)):Za(a)}}}function s_(a){return a in qd?qd[a]:qd[a]="on"+a}function N0(a,d){if(a.da)a=!0;else{d=new Js(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Gd(a),a=f.call(g,d)}return a}function Wd(a){return a=a[zd],a instanceof Ja?a:null}var Kd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qd(a){return typeof a=="function"?a:(a[Kd]||(a[Kd]=function(d){return a.handleEvent(d)}),a[Kd])}function Ke(){Hn.call(this),this.i=new Ja(this),this.M=this,this.F=null}C(Ke,Hn),Ke.prototype[Xs]=!0,Ke.prototype.removeEventListener=function(a,d,f,g){i_(this,a,d,f,g)};function rt(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new We(d,a);else if(d instanceof We)d.target=d.target||a;else{var b=d;d=new We(g,a),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];b=Xa(P,g,!0,d)&&b}if(P=d.g=a,b=Xa(P,g,!0,d)&&b,b=Xa(P,g,!1,d)&&b,f)for(A=0;A<f.length;A++)P=d.g=f[A],b=Xa(P,g,!1,d)&&b}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Za(f[g]);delete a.g[d],a.h--}}this.F=null},Ke.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},Ke.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Xa(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var ye=P.listener,ze=P.ha||P.src;P.fa&&$d(a.i,P),b=ye.call(ze,g)!==!1&&b}}return b&&!g.defaultPrevented}function o_(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function a_(a){a.g=o_(()=>{a.g=null,a.i&&(a.i=!1,a_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class M0 extends Hn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:a_(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(a){Hn.call(this),this.h=a,this.g={}}C(eo,Hn);var c_=[];function u_(a){Z(a.g,function(d,f){this.g.hasOwnProperty(f)&&Gd(d)},a),a.g={}}eo.prototype.N=function(){eo.aa.N.call(this),u_(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yd=c.JSON.stringify,x0=c.JSON.parse,P0=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Zd(){}Zd.prototype.h=null;function l_(a){return a.h||(a.h=a.i())}function d_(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jd(){We.call(this,"d")}C(Jd,We);function Xd(){We.call(this,"c")}C(Xd,We);var Sr={},h_=null;function ec(){return h_=h_||new Ke}Sr.La="serverreachability";function f_(a){We.call(this,Sr.La,a)}C(f_,We);function no(a){let d=ec();rt(d,new f_(d))}Sr.STAT_EVENT="statevent";function p_(a,d){We.call(this,Sr.STAT_EVENT,a),this.stat=d}C(p_,We);function it(a){let d=ec();rt(d,new p_(d,a))}Sr.Ma="timingevent";function g_(a,d){We.call(this,Sr.Ma,a),this.size=d}C(g_,We);function ro(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function O0(a,d,f,g,b,A){a.info(function(){if(a.g)if(A)for(var P="",ye=A.split("&"),ze=0;ze<ye.length;ze++){var fe=ye[ze].split("=");if(1<fe.length){var Qe=fe[0];fe=fe[1];var Ye=Qe.split("_");P=2<=Ye.length&&Ye[1]=="type"?P+(Qe+"="+fe+"&"):P+(Qe+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function k0(a,d,f,g,b,A,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+P})}function yi(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+F0(a,f)+(g?" "+g:"")})}function L0(a,d){a.info(function(){return"TIMEOUT: "+d})}io.prototype.info=function(){};function F0(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return Yd(f)}catch{return d}}var tc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},m_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eh;function nc(){}C(nc,Zd),nc.prototype.g=function(){return new XMLHttpRequest},nc.prototype.i=function(){return{}},eh=new nc;function zn(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new y_}function y_(){this.i=null,this.g="",this.h=!1}var v_={},th={};function nh(a,d,f){a.L=1,a.v=oc(vn(d)),a.m=f,a.P=!0,__(a,null)}function __(a,d){a.F=Date.now(),rc(a),a.A=vn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),P_(f.i,"t",g),a.C=0,f=a.j.J,a.h=new y_,a.g=Z_(a.j,f?d:null,!a.m),0<a.O&&(a.M=new M0(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var b="readystatechange";Array.isArray(b)||(b&&(c_[0]=b.toString()),b=c_);for(var A=0;A<b.length;A++){var P=t_(f,b[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),no(),O0(a.i,a.u,a.A,a.l,a.R,a.m)}zn.prototype.ca=function(a){a=a.target;let d=this.M;d&&_n(a)==3?d.j():this.Y(a)},zn.prototype.Y=function(a){try{if(a==this.g)e:{let Ye=_n(this.g);var d=this.g.Ba();let Ii=this.g.Z();if(!(3>Ye)&&(Ye!=3||this.g&&(this.h.h||this.g.oa()||j_(this.g)))){this.J||Ye!=4||d==7||(d==8||0>=Ii?no(3):no(2)),rh(this);var f=this.g.Z();this.X=f;t:if(I_(this)){var g=j_(this.g);a="";var b=g.length,A=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),so(this);var P="";break t}this.h.i=new c.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,k0(this.i,this.u,this.A,this.l,this.R,Ye,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,ze=this.g;if((ye=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(ye)){var fe=ye;break t}}fe=null}if(f=fe)yi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ih(this,f);else{this.o=!1,this.s=3,it(12),Ar(this),so(this);break e}}if(this.P){f=!0;let Ft;for(;!this.J&&this.C<P.length;)if(Ft=V0(this,P),Ft==th){Ye==4&&(this.s=4,it(14),f=!1),yi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==v_){this.s=4,it(15),yi(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else yi(this.i,this.l,Ft,null),ih(this,Ft);if(I_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||P.length!=0||this.h.h||(this.s=1,it(16),f=!1),this.o=this.o&&f,!f)yi(this.i,this.l,P,"[Invalid Chunked Response]"),Ar(this),so(this);else if(0<P.length&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.ba&&!Qe.M&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),lh(Qe),Qe.M=!0,it(11))}}else yi(this.i,this.l,P,null),ih(this,P);Ye==4&&Ar(this),this.o&&!this.J&&(Ye==4?W_(this.j,this):(this.o=!1,rc(this)))}else tA(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),Ar(this),so(this)}}}catch{}finally{}};function I_(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function V0(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?th:(f=Number(d.substring(f,g)),isNaN(f)?v_:(g+=1,g+f>d.length?th:(d=d.slice(g,g+f),a.C=g+f,d)))}zn.prototype.cancel=function(){this.J=!0,Ar(this)};function rc(a){a.S=Date.now()+a.I,w_(a,a.I)}function w_(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ro(m(a.ba,a),d)}function rh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}zn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(L0(this.i,this.A),this.L!=2&&(no(),it(17)),Ar(this),this.s=2,so(this)):w_(this,this.S-a)};function so(a){a.j.G==0||a.J||W_(a.j,a)}function Ar(a){rh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,u_(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function ih(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||sh(f.h,a))){if(!a.K&&sh(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)dc(f),uc(f);else break e;uh(f),it(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=ro(m(f.Za,f),6e3));if(1>=T_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Nr(f,11)}else if((a.K||f.g==a)&&dc(f),!U(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let Qe=fe[3];Qe!=null&&(f.la=Qe,f.j.info("VER="+f.la));let Ye=fe[4];Ye!=null&&(f.Aa=Ye,f.j.info("SVER="+f.Aa));let Ii=fe[5];Ii!=null&&typeof Ii=="number"&&0<Ii&&(g=1.5*Ii,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ft=a.g;if(Ft){let fc=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fc){var A=g.h;A.g||fc.indexOf("spdy")==-1&&fc.indexOf("quic")==-1&&fc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(oh(A,A.h),A.h=null))}if(g.D){let dh=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;dh&&(g.ya=dh,Ee(g.I,g.D,dh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=a;if(g.qa=Y_(g,g.J?g.ia:null,g.W),P.K){b_(g.h,P);var ye=P,ze=g.L;ze&&(ye.I=ze),ye.B&&(rh(ye),rc(ye)),g.g=P}else q_(g);0<f.i.length&&lc(f)}else fe[0]!="stop"&&fe[0]!="close"||Nr(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Nr(f,7):ch(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}no(4)}catch{}}var U0=class{constructor(a,d){this.g=a,this.map=d}};function E_(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function D_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function T_(a){return a.h?1:a.g?a.g.size:0}function sh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function oh(a,d){a.g?a.g.add(d):a.h=d}function b_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}E_.prototype.cancel=function(){if(this.i=C_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function C_(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function j0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function B0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function S_(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=B0(a),g=j0(a),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],a)}var A_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $0(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),b=null;if(0<=g){var A=a[f].substring(0,g);b=a[f].substring(g+1)}else A=a[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Rr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Rr){this.h=a.h,ic(this,a.j),this.o=a.o,this.g=a.g,sc(this,a.s),this.l=a.l;var d=a.i,f=new co;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),R_(this,f),this.m=a.m}else a&&(d=String(a).match(A_))?(this.h=!1,ic(this,d[1]||"",!0),this.o=oo(d[2]||""),this.g=oo(d[3]||"",!0),sc(this,d[4]),this.l=oo(d[5]||"",!0),R_(this,d[6]||"",!0),this.m=oo(d[7]||"")):(this.h=!1,this.i=new co(null,this.h))}Rr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ao(d,N_,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ao(d,N_,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ao(f,f.charAt(0)=="/"?q0:z0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ao(f,W0)),a.join("")};function vn(a){return new Rr(a)}function ic(a,d,f){a.j=f?oo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function sc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function R_(a,d,f){d instanceof co?(a.i=d,K0(a.i,a.h)):(f||(d=ao(d,G0)),a.i=new co(d,a.h))}function Ee(a,d,f){a.i.set(d,f)}function oc(a){return Ee(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function oo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ao(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,H0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function H0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var N_=/[#\/\?@]/g,z0=/[#\?:]/g,q0=/[#\?]/g,G0=/[#\?@]/g,W0=/#/g;function co(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function qn(a){a.g||(a.g=new Map,a.h=0,a.i&&$0(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=co.prototype,t.add=function(a,d){qn(this),this.i=null,a=vi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function M_(a,d){qn(a),d=vi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function x_(a,d){return qn(a),d=vi(a,d),a.g.has(d)}t.forEach=function(a,d){qn(this),this.g.forEach(function(f,g){f.forEach(function(b){a.call(d,b,g,this)},this)},this)},t.na=function(){qn(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=a[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(a){qn(this);let d=[];if(typeof a=="string")x_(this,a)&&(d=d.concat(this.g.get(vi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return qn(this),this.i=null,a=vi(this,a),x_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function P_(a,d,f){M_(a,d),0<f.length&&(a.i=null,a.g.set(vi(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var b=A;P[g]!==""&&(b+="="+encodeURIComponent(String(P[g]))),a.push(b)}}return this.i=a.join("&")};function vi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function K0(a,d){d&&!a.j&&(qn(a),a.i=null,a.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(M_(this,g),P_(this,b,f))},a)),a.j=d}function Q0(a,d){let f=new io;if(c.Image){let g=new Image;g.onload=v(Gn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Gn,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Gn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Gn,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function Y0(a,d){let f=new io,g=new AbortController,b=setTimeout(()=>{g.abort(),Gn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Gn(f,"TestPingServer: ok",!0,d):Gn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Gn(f,"TestPingServer: error",!1,d)})}function Gn(a,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function Z0(){this.g=new P0}function J0(a,d,f){let g=f||"";try{S_(a,function(b,A){let P=b;l(b)&&(P=Yd(b)),d.push(g+A+"="+encodeURIComponent(P))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function uo(a){this.l=a.Ub||null,this.j=a.eb||!1}C(uo,Zd),uo.prototype.g=function(){return new ac(this.l,this.j)},uo.prototype.i=function(a){return function(){return a}}({});function ac(a,d){Ke.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(ac,Ke),t=ac.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ho(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;O_(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function O_(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?lo(this):ho(this),this.readyState==3&&O_(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,lo(this))},t.Qa=function(a){this.g&&(this.response=a,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ho(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function ho(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ac.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function k_(a){let d="";return Z(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ah(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=k_(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Ee(a,d,f))}function Se(a){Ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Se,Ke);var X0=/^https?$/i,eA=["POST","PUT"];t=Se.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eh.g(),this.v=this.o?l_(this.o):l_(eh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){L_(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(eA,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{U_(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){L_(this,A)}};function L_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,F_(a),cc(a)}function F_(a){a.A||(a.A=!0,rt(a,"complete"),rt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,rt(this,"complete"),rt(this,"abort"),cc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cc(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?V_(this):this.bb())},t.bb=function(){V_(this)};function V_(a){if(a.h&&typeof o<"u"&&(!a.v[1]||_n(a)!=4||a.Z()!=2)){if(a.u&&_n(a)==4)o_(a.Ea,0,a);else if(rt(a,"readystatechange"),_n(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var b=String(a.D).match(A_)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),g=!X0.test(b?b.toLowerCase():"")}f=g}if(f)rt(a,"complete"),rt(a,"success");else{a.m=6;try{var A=2<_n(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",F_(a)}}finally{cc(a)}}}}function cc(a,d){if(a.g){U_(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||rt(a,"ready");try{f.onreadystatechange=g}catch{}}}function U_(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function _n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),x0(d)}};function j_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function tA(a){let d={};a=(a.g&&2<=_n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(U(a[g]))continue;var f=T(a[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function B_(a){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,a),this.cb=fo("retryDelaySeedMs",1e4,a),this.Wa=fo("forwardChannelMaxRetries",2,a),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new E_(a&&a.concurrentRequestLimit),this.Da=new Z0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=B_.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,g){it(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Y_(this,null,this.W),lc(this)};function ch(a){if($_(a),a.G==3){var d=a.U++,f=vn(a.I);if(Ee(f,"SID",a.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),po(a,f),d=new zn(a,a.j,d),d.L=2,d.v=oc(vn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=Z_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),rc(d)}Q_(a)}function uc(a){a.g&&(lh(a),a.g.cancel(),a.g=null)}function $_(a){uc(a),a.u&&(c.clearTimeout(a.u),a.u=null),dc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function lc(a){if(!D_(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ys||e_(),Zs||(Ys(),Zs=!0),Bd.add(d,a),a.B=0}}function nA(a,d){return T_(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ro(m(a.Ga,a,d),K_(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let b=new zn(this,this.j,a),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=z_(this,b,d),f=vn(this.I),Ee(f,"RID",a),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),po(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(k_(A)))+"&"+d:this.m&&ah(f,this.m,A)),oh(this.h,b),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),b.T=!0,nh(b,f,null)):nh(b,f,d),this.G=2}}else this.G==3&&(a?H_(this,a):this.i.length==0||D_(this.h)||H_(this))};function H_(a,d){var f;d?f=d.l:f=a.U++;let g=vn(a.I);Ee(g,"SID",a.K),Ee(g,"RID",f),Ee(g,"AID",a.T),po(a,g),a.m&&a.o&&ah(g,a.m,a.o),f=new zn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=z_(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),oh(a.h,f),nh(f,g,d)}function po(a,d){a.H&&Z(a.H,function(f,g){Ee(d,g,f)}),a.l&&S_({},function(f,g){Ee(d,g,f)})}function z_(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var b=a.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let ye=!0;for(let ze=0;ze<f;ze++){let fe=b[ze].g,Qe=b[ze].map;if(fe-=A,0>fe)A=Math.max(0,b[ze].g-100),ye=!1;else try{J0(Qe,P,"req"+fe+"_")}catch{g&&g(Qe)}}if(ye){g=P.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function q_(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ys||e_(),Zs||(Ys(),Zs=!0),Bd.add(d,a),a.v=0}}function uh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ro(m(a.Fa,a),K_(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,G_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ro(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),uc(this),G_(this))};function lh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function G_(a){a.g=new zn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=vn(a.qa);Ee(d,"RID","rpc"),Ee(d,"SID",a.K),Ee(d,"AID",a.T),Ee(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ee(d,"TO",a.ja),Ee(d,"TYPE","xmlhttp"),po(a,d),a.m&&a.o&&ah(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=oc(vn(d)),f.m=null,f.P=!0,__(f,a)}t.Za=function(){this.C!=null&&(this.C=null,uc(this),uh(this),it(19))};function dc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function W_(a,d){var f=null;if(a.g==d){dc(a),lh(a),a.g=null;var g=2}else if(sh(a.h,d))f=d.D,b_(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=a.B;g=ec(),rt(g,new g_(g,f)),lc(a)}else q_(a);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&nA(a,d)||g==2&&uh(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),b){case 1:Nr(a,5);break;case 4:Nr(a,10);break;case 3:Nr(a,6);break;default:Nr(a,2)}}}function K_(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Nr(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let b=!g;g=new Rr(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ic(g,"https"),oc(g),b?Q0(g.toString(),f):Y0(g.toString(),f)}else it(2);a.G=0,a.l&&a.l.sa(d),Q_(a),$_(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Q_(a){if(a.G=0,a.ka=[],a.l){let d=C_(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Y_(a,d,f){var g=f instanceof Rr?vn(f):new Rr(f);if(g.g!="")d&&(g.g=d+"."+g.g),sc(g,g.s);else{var b=c.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Rr(null);g&&ic(A,g),d&&(A.g=d),b&&sc(A,b),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",a.la),po(a,g),g}function Z_(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Se(new uo({eb:f})):new Se(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function J_(){}t=J_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hc(){}hc.prototype.g=function(a,d){return new mt(a,d)};function mt(a,d){Ke.call(this),this.g=new B_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!U(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new _i(this)}C(mt,Ke),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){ch(this.g)},mt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Yd(a),a=f);d.i.push(new U0(d.Ya++,a)),d.G==3&&lc(d)},mt.prototype.N=function(){this.g.l=null,delete this.j,ch(this.g),delete this.g,mt.aa.N.call(this)};function X_(a){Jd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}C(X_,Jd);function eI(){Xd.call(this),this.status=1}C(eI,Xd);function _i(a){this.g=a}C(_i,J_),_i.prototype.ua=function(){rt(this.g,"a")},_i.prototype.ta=function(a){rt(this.g,new X_(a))},_i.prototype.sa=function(a){rt(this.g,new eI)},_i.prototype.ra=function(){rt(this.g,"b")},hc.prototype.createWebChannel=hc.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,Vm=Vn.createWebChannelTransport=function(){return new hc},Fm=Vn.getStatEventTarget=function(){return ec()},Lm=Vn.Event=Sr,Yl=Vn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tc.NO_ERROR=0,tc.TIMEOUT=8,tc.HTTP_ERROR=6,Ca=Vn.ErrorCode=tc,m_.COMPLETE="complete",km=Vn.EventType=m_,d_.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,Ss=Vn.WebChannel=d_,Om=Vn.FetchXmlHttpFactory=uo,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,Pm=Vn.XhrIo=Se}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});var DC="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var Ws="10.13.2";var ai=new fr("@firebase/firestore");function Sa(){return ai.logLevel}function F(t,...e){if(ai.logLevel<=ue.DEBUG){let n=e.map(Tv);ai.debug(`Firestore (${Ws}): ${t}`,...n)}}function jn(t,...e){if(ai.logLevel<=ue.ERROR){let n=e.map(Tv);ai.error(`Firestore (${Ws}): ${t}`,...n)}}function Os(t,...e){if(ai.logLevel<=ue.WARN){let n=e.map(Tv);ai.warn(`Firestore (${Ws}): ${t}`,...n)}}function Tv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t="Unexpected state"){let e=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: `+t;throw jn(e),new Error(e)}function Ie(t,e){t||q()}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends lt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Un=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var td=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}},qm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Gm=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Un,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Un)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new td(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new He(e)}},Wm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Km=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Wm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ym=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new Qm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function _U(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var nd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_U(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function ks(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ge=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ge(0,0))}static max(){return new t(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ne=class t extends rd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},IU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=class t extends rd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return IU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};var Zm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Zm.UNKNOWN_ID=-1;function wU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new ci(i,H.empty(),e)}function EU(t){return new ci(t.readTime,t.key,-1)}var ci=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),H.empty(),-1)}static max(){return new t(X.max(),H.empty(),-1)}};function DU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var TU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qa(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==TU)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),c=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++c,c===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function bU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(t){return t.name==="IndexedDbTransactionError"}var tS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function xd(t){return t==null}function Pa(t){return t===0&&1/t==-1/0}function CU(t){return typeof t=="number"&&Number.isInteger(t)&&!Pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var SU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y3=[...SU,"documentOverlays"],AU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RU=AU,NU=[...RU,"indexConfiguration","indexState","indexEntries"];var Z3=[...NU,"globals"];function TC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ms(this.root,e,this.comparator,!0)}},Ms=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ln=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tt=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new id(this.data.getIterator())}getIteratorFrom(e){return new id(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},id=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Lt=class t{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new t([])}unionWith(e){let n=new tt(St.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var sd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nt.EMPTY_BYTE_STRING=new nt("");var MU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bn(t){if(Ie(!!t),typeof t=="string"){let e=0,n=MU.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Te(t.seconds),nanos:Te(t.nanos)}}function Te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}function bv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cv(t){let e=t.mapValue.fields.__previous_value__;return bv(e)?Cv(e):e}function Oa(t){let e=Bn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var Xm=class{constructor(e,n,r,i,s,o,c,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l}},od=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Zl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bv(t)?4:iS(t)?9007199254740991:rS(t)?10:11:q()}function pn(t,e){if(t===e)return!0;let n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oa(t).isEqual(Oa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Bn(i.timestampValue),c=Bn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Dr(i.bytesValue).isEqual(Dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Te(i.geoPointValue.latitude)===Te(s.geoPointValue.latitude)&&Te(i.geoPointValue.longitude)===Te(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Te(i.integerValue)===Te(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Te(i.doubleValue),c=Te(s.doubleValue);return o===c?Pa(o)===Pa(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return ks(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(TC(o)!==TC(c))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!pn(o[u],c[u])))return!1;return!0}(t,e);default:return q()}}function ka(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;let n=ui(t),r=ui(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Te(s.integerValue||s.doubleValue),u=Te(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return bC(t.timestampValue,e.timestampValue);case 4:return bC(Oa(t),Oa(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let c=Dr(s),u=Dr(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),u=o.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=ge(c[l],u[l]);if(h!==0)return h}return ge(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ge(Te(s.latitude),Te(o.latitude));return c!==0?c:ge(Te(s.longitude),Te(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return CC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var c,u,l,h;let p=s.fields||{},m=o.fields||{},v=(c=p.value)===null||c===void 0?void 0:c.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:CC(v,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zl.mapValue&&o===Zl.mapValue)return 0;if(s===Zl.mapValue)return 1;if(o===Zl.mapValue)return-1;let c=s.fields||{},u=Object.keys(c),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let v=Ls(c[u[p]],l[h[p]]);if(v!==0)return v}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw q()}}function bC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=Bn(t),r=Bn(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function CC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Ls(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function Fs(t){return ey(t)}function ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Bn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=ey(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ey(n.fields[o])}`;return i+"}"}(t.mapValue):q()}function ty(t){return!!t&&"integerValue"in t}function Sv(t){return!!t&&"arrayValue"in t}function SC(t){return!!t&&"nullValue"in t}function AC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xl(t){return!!t&&"mapValue"in t}function rS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ra(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ct=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Ra(o):i.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Xl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Ra(this.value))}};function sS(t){let e=[];return gi(t.fields,(n,r)=>{let i=new St([n]);if(Xl(r)){let s=sS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Lt(e)}var Wt=class t{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vs=class{constructor(e,n){this.position=e,this.inclusive=n}};function RC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}var Us=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function xU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ad=class{},Ue=class t extends ad{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ry(e,n,r):n==="array-contains"?new oy(e,r):n==="in"?new ay(e,r):n==="not-in"?new cy(e,r):n==="array-contains-any"?new uy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iy(e,r):new sy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ls(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gn=class t extends ad{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return oS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function oS(t){return t.op==="and"}function aS(t){return PU(t)&&oS(t)}function PU(t){for(let e of t.filters)if(e instanceof gn)return!1;return!0}function ny(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(aS(t))return t.filters.map(e=>ny(e)).join(",");{let e=t.filters.map(n=>ny(n)).join(",");return`${t.op}(${e})`}}function cS(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof gn?function(r,i){return i instanceof gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&cS(o,i.filters[c]),!0):!1}(t,e):void q()}function uS(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(uS).join(" ,")+"}"}(t):"Filter"}var ry=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},iy=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=lS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},sy=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=lS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function lS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var oy=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Sv(n)&&ka(n.arrayValue,this.value)}},ay=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ka(this.value.arrayValue,n)}},cy=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ka(this.value.arrayValue,n)}},uy=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ka(this.value.arrayValue,r))}};var ly=class{constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function MC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ly(t,e,n,r,i,s,o)}function Av(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.ue=n}return e.ue}function Rv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NC(t.startAt,e.startAt)&&NC(t.endAt,e.endAt)}function dy(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var js=class{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function OU(t,e,n,r,i,s,o,c){return new js(t,e,n,r,i,s,o,c)}function Nv(t){return new js(t)}function xC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kU(t){return t.collectionGroup!==null}function Na(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new tt(St.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Us(s,r))}),n.has(St.keyField().canonicalString())||e.ce.push(new Us(St.keyField(),r))}return e.ce}function dn(t){let e=Y(t);return e.le||(e.le=LU(e,Na(t))),e.le}function LU(t,e){if(t.limitType==="F")return MC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Us(i.field,s)});let n=t.endAt?new Vs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vs(t.startAt.position,t.startAt.inclusive):null;return MC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hy(t,e,n){return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pd(t,e){return Rv(dn(t),dn(e))&&t.limitType===e.limitType}function dS(t){return`${Av(dn(t))}|lt:${t.limitType}`}function As(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uS(i)).join(", ")}]`),xd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Fs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Fs(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Od(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Na(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){let l=RC(o,c,u);return o.inclusive?l<=0:l<0}(r.startAt,Na(r),i)||r.endAt&&!function(o,c,u){let l=RC(o,c,u);return o.inclusive?l>=0:l>0}(r.endAt,Na(r),i))}(t,e)}function FU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hS(t){return(e,n)=>{let r=!1;for(let i of Na(t)){let s=VU(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VU(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,c){let u=o.data.field(s),l=c.data.field(s);return u!==null&&l!==null?Ls(u,l):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Tr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return nS(this.inner)}size(){return this.innerSize}};var UU=new Me(H.comparator);function $n(){return UU}var fS=new Me(H.comparator);function Aa(...t){let e=fS;for(let n of t)e=e.insert(n.key,n);return e}function pS(t){let e=fS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ri(){return Ma()}function gS(){return Ma()}function Ma(){return new Tr(t=>t.toString(),(t,e)=>t.isEqual(e))}var jU=new Me(H.comparator),BU=new tt(H.comparator);function le(...t){let e=BU;for(let n of t)e=e.add(n);return e}var $U=new tt(ge);function HU(){return $U}function Mv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pa(e)?"-0":e}}function mS(t){return{integerValue:""+t}}function zU(t,e){return CU(e)?mS(e):Mv(t,e)}var Bs=class{constructor(){this._=void 0}};function qU(t,e,n){return t instanceof $s?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bv(s)&&(s=Cv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof li?vS(t,e):t instanceof di?_S(t,e):function(i,s){let o=yS(i,s),c=PC(o)+PC(i.Pe);return ty(o)&&ty(i.Pe)?mS(c):Mv(i.serializer,c)}(t,e)}function GU(t,e,n){return t instanceof li?vS(t,e):t instanceof di?_S(t,e):n}function yS(t,e){return t instanceof Hs?function(r){return ty(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var $s=class extends Bs{},li=class extends Bs{constructor(e){super(),this.elements=e}};function vS(t,e){let n=IS(e);for(let r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}var di=class extends Bs{constructor(e){super(),this.elements=e}};function _S(t,e){let n=IS(e);for(let r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}var Hs=class extends Bs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function PC(t){return Te(t.integerValue||t.doubleValue)}function IS(t){return Sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function WU(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof li&&i instanceof li||r instanceof di&&i instanceof di?ks(r.elements,i.elements,pn):r instanceof Hs&&i instanceof Hs?pn(r.Pe,i.Pe):r instanceof $s&&i instanceof $s}(t.transform,e.transform)}var fy=class{constructor(e,n){this.version=e,this.transformResults=n}},hn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ed(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var zs=class{};function wS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new La(t.key,hn.none()):new hi(t.key,t.data,hn.none());{let n=t.data,r=Ct.empty(),i=new tt(St.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mn(t.key,r,new Lt(i.toArray()),hn.none())}}function KU(t,e,n){t instanceof hi?function(i,s,o){let c=i.value.clone(),u=kC(i.fieldTransforms,s,o.transformResults);c.setAll(u),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof mn?function(i,s,o){if(!ed(i.precondition,s))return void s.convertToUnknownDocument(o.version);let c=kC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ES(i)),u.setAll(c),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xa(t,e,n,r){return t instanceof hi?function(s,o,c,u){if(!ed(s.precondition,o))return c;let l=s.value.clone(),h=LC(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof mn?function(s,o,c,u){if(!ed(s.precondition,o))return c;let l=LC(s.fieldTransforms,u,o),h=o.data;return h.setAll(ES(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,c){return ed(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function QU(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=yS(r.transform,i||null);s!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,s))}return n||null}function OC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ks(r,i,(s,o)=>WU(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var hi=class extends zs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mn=class extends zs{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ES(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function kC(t,e,n){let r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,GU(o,c,n[i]))}return r}function LC(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,qU(s,o,e))}return r}var La=class extends zs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},py=class extends zs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&KU(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=gS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;let u=wS(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ks(this.mutations,e.mutations,(n,r)=>OC(n,r))&&ks(this.baseMutations,e.baseMutations,(n,r)=>OC(n,r))}},my=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return jU}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var yy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var vy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,he;function YU(t){switch(t){default:return q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function DS(t){if(t===void 0)return jn("GRPC error has no .code"),M.UNKNOWN;switch(t){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return q()}}(he=ke||(ke={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var FC=null;function ZU(){return new TextEncoder}var JU=new wr([4294967295,4294967295],0);function VC(t){let e=ZU().encode(t),n=new xm;return n.update(e),new Uint8Array(n.digest())}function UC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wr([n,r],0),new wr([i,s],0)]}var _y=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ii(`Invalid padding: ${n}`);if(r<0)throw new ii(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ii(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ii(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wr.fromNumber(r)));return i.compare(JU)===1&&(i=new wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=VC(e),[r,i]=UC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=VC(e),[r,i]=UC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ii=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var cd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Me(ge),$n(),le())}},Fa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var xs=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ud=class{constructor(e,n){this.targetId=e,this.me=n}},ld=class{constructor(e,n,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},dd=class{constructor(){this.fe=0,this.ge=BC(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q()}}),new Fa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=BC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Iy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=$n(),this.qe=jC(),this.Qe=new Me(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(dy(s))if(r===0){let o=new H(s.path);this.Ue(n,o,Wt.newNoDocument(o,X.min()))}else Ie(r===1);else{let o=this.Ye(n);if(o!==r){let c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}FC?.et(function(h,p,m,v,C){var N,R,k,U,z,ie;let Ce={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Ce.bloomFilter={applied:C===0,hashCount:(N=Z?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(U=(k=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&U!==void 0?U:0,padding:(ie=(z=Z?.bits)===null||z===void 0?void 0:z.padding)!==null&&ie!==void 0?ie:0,mightContain:D=>{var y;return(y=v?.mightContain(D))!==null&&y!==void 0&&y}}),Ce}(o,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,c;try{o=Dr(r).toUint8Array()}catch(u){if(u instanceof sd)return Os("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new _y(o,i,s)}catch(u){return Os(u instanceof ii?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&dy(c.target)){let u=new H(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Wt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new cd(e,n,this.Qe,this.ke,r);return this.ke=$n(),this.qe=jC(),this.Qe=new Me(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new dd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function jC(){return new Me(H.comparator)}function BC(){return new Me(H.comparator)}var XU={asc:"ASCENDING",desc:"DESCENDING"},ej={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tj={and:"AND",or:"OR"},wy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ey(t,e){return t.useProto3Json||xd(e)?e:{value:e}}function hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nj(t,e){return hd(t,e.toTimestamp())}function fn(t){return Ie(!!t),X.fromTimestamp(function(n){let r=Bn(n);return new Ge(r.seconds,r.nanos)}(t))}function xv(t,e){return Dy(t,e).canonicalString()}function Dy(t,e){let n=function(i){return new Ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bS(t){let e=Ne.fromString(t);return Ie(NS(e)),e}function Ty(t,e){return xv(t.databaseId,e.path)}function Um(t,e){let n=bS(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(SS(n))}function CS(t,e){return xv(t.databaseId,e)}function rj(t){let e=bS(t);return e.length===4?Ne.emptyPath():SS(e)}function by(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function SS(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $C(t,e,n){return{name:Ty(t,e),fields:n.value.mapValue.fields}}function ij(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string"),nt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(l){let h=l.code===void 0?M.UNKNOWN:DS(l.code);return new V(h,l.message||"")}(o);n=new ld(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Um(t,r.document.name),s=fn(r.document.updateTime),o=r.document.createTime?fn(r.document.createTime):X.min(),c=new Ct({mapValue:{fields:r.document.fields}}),u=Wt.newFoundDocument(i,s,o,c),l=r.targetIds||[],h=r.removedTargetIds||[];n=new xs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Um(t,r.document),s=r.readTime?fn(r.readTime):X.min(),o=Wt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new xs([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Um(t,r.document),s=r.removedTargetIds||[];n=new xs([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new vy(i,s),c=r.targetId;n=new ud(c,o)}}return n}function sj(t,e){let n;if(e instanceof hi)n={update:$C(t,e.key,e.value)};else if(e instanceof La)n={delete:Ty(t,e.key)};else if(e instanceof mn)n={update:$C(t,e.key,e.data),updateMask:pj(e.fieldMask)};else{if(!(e instanceof py))return q();n={verify:Ty(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let c=o.transform;if(c instanceof $s)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof li)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof di)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Hs)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q()}(t,e.precondition)),n}function oj(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?fn(i.updateTime):fn(s);return o.isEqual(X.min())&&(o=fn(s)),new fy(o,i.transformResults||[])}(n,e))):[]}function aj(t,e){return{documents:[CS(t,e.path)]}}function cj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=CS(t,i);let s=function(l){if(l.length!==0)return RS(gn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Rs(m.field),direction:dj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=Ey(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function uj(t){let e=rj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ie(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=AS(p);return m instanceof gn&&aS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new Us(Ns(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,xd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Vs(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Vs(v,m)}(n.endAt)),OU(e,i,o,s,c,"F",u,l)}function lj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ns(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ns(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ns(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ns(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Ns(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>AS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(n.compositeFilter.op))}(t):q()}function dj(t){return XU[t]}function hj(t){return ej[t]}function fj(t){return tj[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function Ns(t){return St.fromServerFormat(t.fieldPath)}function RS(t){return t instanceof Ue?function(n){if(n.op==="=="){if(AC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(SC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(AC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(SC(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:hj(n.op),value:n.value}}}(t):t instanceof gn?function(n){let r=n.getFilters().map(i=>RS(i));return r.length===1?r[0]:{compositeFilter:{op:fj(n.op),filters:r}}}(t):q()}function pj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function NS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Va=class t{constructor(e,n,r,i,s=X.min(),o=X.min(),c=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Cy=class{constructor(e){this.ct=e}};function gj(t){let e=uj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hy(e,e.limit,"L"):e}var fd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Te(e.integerValue));else if("doubleValue"in e){let r=Te(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Pa(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Bn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Dr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?iS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):rS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",c=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Te(c)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};fd.vt=new fd;var Sy=class{constructor(){this.un=new Ay}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(ci.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Ay=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(Ne.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Ne.comparator)).toArray()}};var X3=new Uint8Array(0);var un=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(41943040,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);var Ua=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Ry=class{constructor(){this.changes=new Tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ny=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var My=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xa(r.mutation,i,Lt.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Aa();return s.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let s=$n(),o=Ma(),c=function(){return Ma()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof mn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),xa(h.mutation,l,h.mutation.getFieldMask(),Ge.now())):o.set(l.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return c.set(l,new Ny(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let r=Ma(),i=new Me((o,c)=>o-c),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Lt.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||le()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let o=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=gS();h.forEach(m=>{if(!s.has(m)){let v=wS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(ri()),c=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:c,changes:pS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Aa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Aa();return this.indexManager.getCollectionParents(e,s).next(c=>x.forEach(c,u=>{let l=function(p,m){return new js(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Wt.newInvalidDocument(h)))});let c=Aa();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&xa(h.mutation,l,Lt.empty(),Ge.now()),Od(n,l)&&(c=c.insert(u,l))}),c})}};var xy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:gj(i.bundledQuery),readTime:fn(i.readTime)}}(n)),x.resolve()}};var Py=class{constructor(){this.overlays=new Me(H.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ri();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=ri(),s=n.length+1,o=new H(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ri(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=ri(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return x.resolve(c)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yy(n,r));let s=this.Ir.get(n);s===void 0&&(s=le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Oy=class{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var ja=class{constructor(){this.Tr=new tt(Le.Er),this.dr=new tt(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Le(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Le(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new Ne([])),r=new Le(n,e),i=new Le(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new Ne([])),r=new Le(n,e),i=new Le(n,e+1),s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Le(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Le=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||H.comparator(e.key,n.key)}};var ky=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(Le.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new gy(s,n,r,i);this.mutationQueue.push(o);for(let c of i)this.br=this.br.add(new Le(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let c=this.Dr(o.wr);s.push(c)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ge);return n.forEach(i=>{let s=new Le(i,0),o=new Le(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],c=>{r=r.add(c.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new Le(new H(s),0),c=new tt(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.wr)),!0)},o),x.resolve(this.Cr(c))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Le(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Le(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ly=class{constructor(e){this.Mr=e,this.docs=function(){return new Me(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$n(),o=n.path,c=new H(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||DU(EU(h),r)<=0||(i.has(h.key)||Od(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){q()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Fy(this)}getSize(e){return x.resolve(this.size)}},Fy=class extends Ry{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Vy=class{constructor(e){this.persistence=e,this.Nr=new Tr(n=>Av(n),Rv),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ja,this.targetCount=0,this.kr=Ua.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Ua(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Uy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tS(0),this.Kr=!1,this.Kr=!0,this.$r=new Oy,this.referenceDelegate=e(this),this.Ur=new Vy(this),this.indexManager=new Sy,this.remoteDocumentCache=function(i){return new Ly(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Cy(n),this.Gr=new xy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Py,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ky(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new jy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},jy=class extends Jm{constructor(e){super(),this.currentSequenceNumber=e}},By=class t{constructor(e){this.persistence=e,this.Jr=new ja,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var $y=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Hy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return db()?8:bU($e())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Hy;return this.Xi(e,n,o).next(c=>{if(s.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Sa()<=ue.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",As(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Sa()<=ue.DEBUG&&F("QueryEngine","Query:",As(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Sa()<=ue.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",As(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):x.resolve())}Yi(e,n){if(xC(n))return x.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hy(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=le(...s);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,c);return this.ns(n,l,o,u.readTime)?this.Yi(e,hy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return xC(n)||i.isEqual(X.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Sa()<=ue.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),As(n)),this.rs(e,o,n,wU(i,-1)).next(c=>c))})}ts(e,n){let r=new tt(hS(e));return n.forEach((i,s)=>{Od(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Sa()<=ue.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",As(n)),this.Ji.getDocumentsMatchingQuery(e,n,ci.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var qy=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(ge),this._s=new Tr(s=>Av(s),Rv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new My(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function mj(t,e,n,r){return new qy(t,e,n,r)}function MS(t,e){return w(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],c=[],u=le();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:c}))})})})}function yj(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(C=>{v=v.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);Ie(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=le();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xS(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function vj(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&c.push(n.Ur.updateTargetData(s,v))});let u=$n(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(_j(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(h)}return x.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function _j(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$n();return n.forEach((c,u)=>{let l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):F("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Ij(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wj(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Va(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Gy(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ga(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function HC(t,e,n){let r=Y(t),i=X.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Y(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,dn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:le())).next(c=>(Ej(r,FU(e),c),{documents:c,Ts:s})))}function Ej(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var pd=class{constructor(){this.activeTargetIds=HU()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Wy=class{constructor(){this.so=new pd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ky=class{_o(e){}shutdown(){}};var gd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jl=null;function jm(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}var Dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Qy=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var et="WebChannelConnection",Yy=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let c=jm(),u=this.xo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${c}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(F("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw Os("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,c){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=Dj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=jm();return new Promise((o,c)=>{let u=new Pm;u.setWithCredentials(!0),u.listenOnce(km.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ca.NO_ERROR:let h=u.getResponseJson();F(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ca.TIMEOUT:F(et,`RPC '${e}' ${s} timed out`),c(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ca.HTTP_ERROR:let p=u.getStatus();if(F(et,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let C=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(v.status);c(new V(C,v.message))}else c(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new V(M.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{F(et,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(et,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=jm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Vm(),c=Fm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Om({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(et,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,C=new Qy({Io:R=>{v?F(et,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(et,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,k,U)=>{R.listen(k,z=>{try{U(z)}catch(ie){setTimeout(()=>{throw ie},0)}})};return N(p,Ss.EventType.OPEN,()=>{v||(F(et,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,Ss.EventType.CLOSE,()=>{v||(v=!0,F(et,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,Ss.EventType.ERROR,R=>{v||(v=!0,Os(et,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ss.EventType.MESSAGE,R=>{var k;if(!v){let U=R.data[0];Ie(!!U);let z=U,ie=z.error||((k=z[0])===null||k===void 0?void 0:k.error);if(ie){F(et,`RPC '${e}' stream ${i} received error:`,ie);let Ce=ie.status,Z=function(_){let E=ke[_];if(E!==void 0)return DS(E)}(Ce),D=ie.message;Z===void 0&&(Z=M.INTERNAL,D="Unknown error status: "+Ce+" with message "+ie.message),v=!0,C.So(new V(Z,D)),p.close()}else F(et,`RPC '${e}' stream ${i} received:`,U),C.bo(U)}}),N(c,Lm.STAT_EVENT,R=>{R.stat===Yl.PROXY?F(et,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Yl.NOPROXY&&F(et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Bm(){return typeof document<"u"?document:null}function kd(t){return new wy(t,!0)}var md=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yd=class{constructor(e,n,r,i,s,o,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new md(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(jn(n.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Zy=class extends yd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=ij(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?fn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=by(this.serializer),n.addTarget=function(s,o){let c,u=o.target;if(c=dy(u)?{documents:aj(s,u)}:{query:cj(s,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=TS(s,o.resumeToken);let l=Ey(s,o.expectedCount);l!==null&&(c.expectedCount=l)}else if(o.snapshotVersion.compareTo(X.min())>0){c.readTime=hd(s,o.snapshotVersion.toTimestamp());let l=Ey(s,o.expectedCount);l!==null&&(c.expectedCount=l)}return c}(this.serializer,e);let r=lj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=by(this.serializer),n.removeTarget=e,this.a_(n)}},Jy=class extends yd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=oj(e.writeResults,e.commitTime),r=fn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=by(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>sj(this.serializer,r))};this.a_(n)}};var Xy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Dy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Dy(n,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ev=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jn(n),this.D_=!1):F("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var tv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){mi(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Y(u);l.L_.add(4),yield Wa(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ld(l)})}(this))}))}),this.q_=new ev(r,i)}};function Ld(t){return w(this,null,function*(){if(mi(t))for(let e of t.B_)yield e(!0)})}function Wa(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function PS(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Lv(n)?kv(n):Ks(n).r_()&&Ov(n,e))}function Pv(t,e){let n=Y(t),r=Ks(n);n.N_.delete(e),r.r_()&&OS(n,e),n.N_.size===0&&(r.r_()?r.o_():mi(n)&&n.q_.set("Unknown"))}function Ov(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ks(t).A_(e)}function OS(t,e){t.Q_.xe(e),Ks(t).R_(e)}function kv(t){t.Q_=new Iy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ks(t).start(),t.q_.v_()}function Lv(t){return mi(t)&&!Ks(t).n_()&&t.N_.size>0}function mi(t){return Y(t).L_.size===0}function kS(t){t.Q_=void 0}function Tj(t){return w(this,null,function*(){t.q_.set("Online")})}function bj(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{Ov(t,e)})})}function Cj(t,e){return w(this,null,function*(){kS(t),Lv(t)?(t.q_.M_(e),kv(t)):t.q_.set("Unknown")})}function Sj(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof ld&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let c of s.targetIds)i.N_.has(c)&&(yield i.remoteSyncer.rejectListen(c,o),i.N_.delete(c),i.Q_.removeTarget(c))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield vd(t,r)}else if(e instanceof xs?t.Q_.Ke(e):e instanceof ud?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield xS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let c=s.Q_.rt(o);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),OS(s,u);let p=new Va(h.target,u,l,h.sequenceNumber);Ov(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield vd(t,r)}})}function vd(t,e,n){return w(this,null,function*(){if(!Ga(e))throw e;t.L_.add(1),yield Wa(t),t.q_.set("Offline"),n||(n=()=>xS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Ld(t)}))})}function LS(t,e){return e().catch(n=>vd(t,n,e))}function Fd(t){return w(this,null,function*(){let e=Y(t),n=br(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Aj(e);)try{let i=yield Ij(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Rj(e,i)}catch(i){yield vd(e,i)}FS(e)&&VS(e)})}function Aj(t){return mi(t)&&t.O_.length<10}function Rj(t,e){t.O_.push(e);let n=br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function FS(t){return mi(t)&&!br(t).n_()&&t.O_.length>0}function VS(t){br(t).start()}function Nj(t){return w(this,null,function*(){br(t).p_()})}function Mj(t){return w(this,null,function*(){let e=br(t);for(let n of t.O_)e.m_(n.mutations)})}function xj(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=my.from(r,e,n);yield LS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Fd(t)})}function Pj(t,e){return w(this,null,function*(){e&&br(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return YU(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();br(r).s_(),yield LS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Fd(r)}})}(t,e)),FS(t)&&VS(t)})}function zC(t,e){return w(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=mi(n);n.L_.add(3),yield Wa(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Ld(n)})}function Oj(t,e){return w(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield Ld(n)):e||(n.L_.add(2),yield Wa(n),n.q_.set("Unknown"))})}function Ks(t){return t.K_||(t.K_=function(n,r,i){let s=Y(n);return s.w_(),new Zy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Tj.bind(null,t),Ro:bj.bind(null,t),mo:Cj.bind(null,t),d_:Sj.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),Lv(t)?kv(t):t.q_.set("Unknown")):(yield t.K_.stop(),kS(t))}))),t.K_}function br(t){return t.U_||(t.U_=function(n,r,i){let s=Y(n);return s.w_(),new Jy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Nj.bind(null,t),mo:Pj.bind(null,t),f_:Mj.bind(null,t),g_:xj.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield Fd(t)):(yield t.U_.stop(),t.O_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var nv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,c=new t(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fv(t,e){if(jn("AsyncQueue",`${e}: ${t}`),Ga(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var _d=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Aa(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Id=class{constructor(){this.W_=new Me(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},qs=class t{constructor(e,n,r,i,s,o,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,_d.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var rv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},iv=class{constructor(){this.queries=qC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),s=i.queries;i.queries=qC(),s.forEach((o,c)=>{for(let u of c.j_)u.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function qC(){return new Tr(t=>dS(t),Pd)}function kj(t,e){return w(this,null,function*(){let n=Y(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new rv,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let c=Fv(o,`Initialization of query '${As(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Vv(n)})}function Lj(t,e){return w(this,null,function*(){let n=Y(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Fj(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let c of o.j_)c.X_(i)&&(r=!0);o.z_=i}}r&&Vv(n)}function Vj(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function Vv(t){t.Y_.forEach(e=>{e.next()})}var sv,GC;(GC=sv||(sv={})).ea="default",GC.Cache="cache";var ov=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sv.Cache}};var wd=class{constructor(e){this.key=e}},Ed=class{constructor(e){this.key=e}},av=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=hS(e),this.Ra=new _d(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Id,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Od(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?C!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(c=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return N(v)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let c=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new qs(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Id,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ed(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wd(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},cv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},uv=class{constructor(e){this.key=e,this.va=!1}},lv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Tr(c=>dS(c),Pd),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(H.comparator),this.Na=new Map,this.La=new ja,this.Ba={},this.ka=new Map,this.qa=Ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Uj(t,e,n=!0){return w(this,null,function*(){let r=zS(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield US(r,e,n,!0),i})}function jj(t,e){return w(this,null,function*(){let n=zS(t);yield US(n,e,!0,!1)})}function US(t,e,n,r){return w(this,null,function*(){let i=yield wj(t.localStore,dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),c;return r&&(c=yield Bj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&PS(t.remoteStore,i),c})}function Bj(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,v)=>function(N,R,k,U){return w(this,null,function*(){let z=R.view.ma(k);z.ns&&(z=yield HC(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,z)));let ie=U&&U.targetChanges.get(R.targetId),Ce=U&&U.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(z,N.isPrimaryClient,ie,Ce);return KC(N,R.targetId,Z.wa),Z.snapshot})}(t,p,m,v);let s=yield HC(t.localStore,e,!0),o=new av(e,s.Ts),c=o.ma(s.documents),u=Fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(c,t.isPrimaryClient,u);KC(t,n,l.wa);let h=new cv(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function $j(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Pd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Gy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pv(r.remoteStore,i.targetId),dv(r,i.targetId)}).catch(qa))):(dv(r,i.targetId),yield Gy(r.localStore,i.targetId,!0))})}function Hj(t,e){return w(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pv(n.remoteStore,r.targetId))})}function zj(t,e,n){return w(this,null,function*(){let r=Zj(t);try{let i=yield function(o,c){let u=Y(o),l=Ge.now(),h=c.reduce((v,C)=>v.add(C.key),le()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=$n(),N=le();return u.cs.getEntries(v,h).next(R=>{C=R,C.forEach((k,U)=>{U.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(R=>{p=R;let k=[];for(let U of c){let z=QU(U,p.get(U.key).overlayedDocument);z!=null&&k.push(new mn(U.key,z,sS(z.value.mapValue),hn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,k,c)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:pS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Me(ge)),l=l.insert(c,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Ka(r,i.changes),yield Fd(r.remoteStore)}catch(i){let s=Fv(i,"Failed to persist write");n.reject(s)}})}function jS(t,e){return w(this,null,function*(){let n=Y(t);try{let r=yield vj(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),yield Ka(n,r,e)}catch(r){yield qa(r)}})}function WC(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let c=o.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){let u=Y(o);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(c)&&(l=!0)}),l&&Vv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qj(t,e,n){return w(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Me(H.comparator);o=o.insert(s,Wt.newNoDocument(s,X.min()));let c=le().add(s),u=new cd(X.min(),new Map,new Me(ge),o,c);yield jS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Uv(r)}else yield Gy(r.localStore,e,!1).then(()=>dv(r,e,n)).catch(qa)})}function Gj(t,e){return w(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield yj(n.localStore,e);$S(n,r,null),BS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ka(n,i)}catch(i){yield qa(i)}})}function Wj(t,e,n){return w(this,null,function*(){let r=Y(t);try{let i=yield function(o,c){let u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(Ie(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);$S(r,e,n),BS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ka(r,i)}catch(i){yield qa(i)}})}function BS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function $S(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function dv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||HS(t,r)})}function HS(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Pv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Uv(t))}function KC(t,e,n){for(let r of n)r instanceof wd?(t.La.addReference(r.key,e),Kj(t,r)):r instanceof Ed?(F("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||HS(t,r.key)):q()}function Kj(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(F("SyncEngine","New document in limbo: "+n),t.xa.add(r),Uv(t))}function Uv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new uv(n)),t.Oa=t.Oa.insert(n,r),PS(t.remoteStore,new Va(dn(Nv(n.path)),r,"TargetPurposeLimboResolution",tS.oe))}}function Ka(t,e,n){return w(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=$y.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Ga(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),C=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function Qj(t,e){return w(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield MS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(c=>{c.forEach(u=>{u.reject(new V(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ka(n,r.hs)}})}function Yj(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let c=n.Fa.get(o);i=i.unionWith(c.view.Va)}return i}}function zS(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qj.bind(null,e),e.Ca.d_=Fj.bind(null,e.eventManager),e.Ca.$a=Vj.bind(null,e.eventManager),e}function Zj(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wj.bind(null,e),e}var Dd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return mj(this.persistence,new zy,e.initialUser,this.serializer)}createPersistence(e){return new Uy(By.Zr,this.serializer)}createSharedClientState(e){return new Wy}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var hv=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>WC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qj.bind(null,this.syncEngine),yield Oj(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new iv}()}createDatastore(e){let n=kd(e.databaseInfo.databaseId),r=function(s){return new Yy(s)}(e.databaseInfo);return function(s,o,c,u){return new Xy(s,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,c){return new tv(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>WC(this.syncEngine,n,0),function(){return gd.D()?new gd:new Ky}())}createSyncEngine(e,n){return function(i,s,o,c,u,l,h){let p=new lv(i,s,o,c,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e,n;yield function(i){return w(this,null,function*(){let s=Y(i);F("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Wa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var fv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var pv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=nd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){F("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Fv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $m(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield MS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function QC(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Xj(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zC(e.remoteStore,i)),t._onlineComponents=e})}function Jj(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Xj(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $m(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Jj(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),yield $m(t,new Dd)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield $m(t,new Dd);return t._offlineComponents})}function qS(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield QC(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield QC(t,new hv))),t._onlineComponents})}function e2(t){return qS(t).then(e=>e.syncEngine)}function YC(t){return w(this,null,function*(){let e=yield qS(t),n=e.eventManager;return n.onListen=Uj.bind(null,e.syncEngine),n.onUnlisten=$j.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Hj.bind(null,e.syncEngine),n})}function GS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ZC=new Map;function WS(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function t2(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JC(t){if(!H.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function XC(t){if(H.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function oi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=jv(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Td=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Td({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Td(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zm;switch(r.type){case"firstParty":return new Km(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ZC.get(n);r&&(F("ComponentProvider","Removing Datastore"),ZC.delete(n),r.terminate())}(this),Promise.resolve()}};function KS(t,e,n,r={}){var i;let s=(t=oi(t,Gs))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=He.MOCK_USER;else{c=sb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new He(l)}t._authCredentials=new qm(new td(c,u))}}var bd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},At=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Er=class t extends bd{constructor(e,n,r){super(e,n,Nv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function QS(t,e,...n){if(t=be(t),WS("collection","path",e),t instanceof Gs){let r=Ne.fromString(e,...n);return XC(r),new Er(t,null,r)}{if(!(t instanceof At||t instanceof Er))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return XC(r),new Er(t.firestore,null,r)}}function YS(t,e,...n){if(t=be(t),arguments.length===1&&(e=nd.newId()),WS("doc","path",e),t instanceof Gs){let r=Ne.fromString(e,...n);return JC(r),new At(t,null,new H(r))}{if(!(t instanceof At||t instanceof Er))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return JC(r),new At(t.firestore,t instanceof Er?t.converter:null,new H(r))}}var gv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new md(this,"async_queue_retry"),this.Eu=()=>{let n=Bm();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Bm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Un;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return w(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw jn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=nv.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&q()}verifyOperationInProgress(){}mu(){return w(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function eS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var fi=class extends Gs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new gv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JS(this),this._firestoreClient.terminate()}};function ZS(t,e){let n=typeof t=="object"?t:mr(),r=typeof t=="string"?t:e||"(default)",i=Yr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Tl("firestore");s&&KS(i,...s)}return i}function Bv(t){return t._firestoreClient||JS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function JS(t){var e,n,r;let i=t._freezeSettings(),s=function(c,u,l,h){return new Xm(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new pv(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ba=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(nt.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var $a=class{constructor(e){this._methodName=e}};var Ha=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var za=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var n2=/^__.*__$/,mv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mn(e,this.data,this.fieldMask,n,this.fieldTransforms):new hi(e,this.data,n,this.fieldTransforms)}},Cd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function XS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var yv=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Ad(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(XS(this.wu)&&n2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},vv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kd(e)}Nu(e,n,r,i=!1){return new yv({wu:e,methodName:n,Ou:r,path:St.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function e0(t){let e=t._freezeSettings(),n=kd(t._databaseId);return new vv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function r2(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);$v("Data must be an object, but it was:",o,r);let c=r0(r,o),u,l;if(s.merge)u=new Lt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=_v(e,p,n);if(!o.contains(m))throw new V(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);s0(h,m)||h.push(m)}u=new Lt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new mv(new Ct(c),u,l)}var Sd=class t extends $a{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function t0(t,e,n,r){let i=t.Nu(1,e,n);$v("Data must be an object, but it was:",i,r);let s=[],o=Ct.empty();gi(r,(u,l)=>{let h=Hv(e,u,n);l=be(l);let p=i.Cu(h);if(l instanceof Sd)s.push(h);else{let m=Vd(l,p);m!=null&&(s.push(h),o.set(h,m))}});let c=new Lt(s);return new Cd(o,c,i.fieldTransforms)}function n0(t,e,n,r,i,s){let o=t.Nu(1,e,n),c=[_v(e,r,n)],u=[i];if(s.length%2!=0)throw new V(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)c.push(_v(e,s[m])),u.push(s[m+1]);let l=[],h=Ct.empty();for(let m=c.length-1;m>=0;--m)if(!s0(l,c[m])){let v=c[m],C=u[m];C=be(C);let N=o.Cu(v);if(C instanceof Sd)l.push(v);else{let R=Vd(C,N);R!=null&&(l.push(v),h.set(v,R))}}let p=new Lt(l);return new Cd(h,p,o.fieldTransforms)}function Vd(t,e){if(i0(t=be(t)))return $v("Unsupported field value:",e,t),r0(t,e);if(t instanceof $a)return function(r,i){if(!XS(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let c of r){let u=Vd(c,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ge.fromDate(r);return{timestampValue:hd(i.serializer,s)}}if(r instanceof Ge){let s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hd(i.serializer,s)}}if(r instanceof Ha)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ba)return{bytesValue:TS(i.serializer,r._byteString)};if(r instanceof At){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof za)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return Mv(c.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${jv(r)}`)}(t,e)}function r0(t,e){let n={};return nS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,i)=>{let s=Vd(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function i0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Ha||t instanceof Ba||t instanceof At||t instanceof $a||t instanceof za)}function $v(t,e,n){if(!i0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=jv(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function _v(t,e,n){if((e=be(e))instanceof pi)return e._internalPath;if(typeof e=="string")return Hv(t,e);throw Ad("Field path arguments must be of type string or ",t,!1,void 0,n)}var i2=new RegExp("[~\\*/\\[\\]]");function Hv(t,e,n){if(e.search(i2)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pi(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ad(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,c+t+u)}function s0(t,e){return t.some(n=>n.isEqual(e))}var Rd=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Iv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(o0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Iv=class extends Rd{data(){return super.data()}};function o0(t,e){return typeof e=="string"?Hv(t,e):e instanceof pi?e._internalPath:e._delegate._internalPath}function s2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wv=class{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return gi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Te(o.doubleValue));return new za(s)}convertGeoPoint(e){return new Ha(Te(e.latitude),Te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Cv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){let n=Bn(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);Ie(NS(r));let i=new od(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||jn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function o2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var si=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Nd=class extends Rd{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(o0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ps=class extends Nd{data(e={}){return super.data(e)}},Ev=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new si(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ps(this._firestore,this._userDataWriter,r.key,r,new si(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{let u=new Ps(i._firestore,i._userDataWriter,c.doc.key,c.doc,new si(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let u=new Ps(i._firestore,i._userDataWriter,c.doc.key,c.doc,new si(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:a2(c.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function a2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}var Md=class extends wv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ba(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}};function a0(t,e,n,...r){t=oi(t,At);let i=oi(t.firestore,fi),s=e0(i),o;return o=typeof(e=be(e))=="string"||e instanceof pi?n0(s,"updateDoc",t._key,e,n,r):t0(s,"updateDoc",t._key,e),c0(i,[o.toMutation(t._key,hn.exists(!0))])}function zv(t,...e){var n,r,i;t=be(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||eS(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(eS(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof At)l=oi(t.firestore,fi),h=Nv(t._key.path),u={next:p=>{e[o]&&e[o](c2(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=oi(t,bd);l=oi(p.firestore,fi),h=p._query;let m=new Md(l);u={next:v=>{e[o]&&e[o](new Ev(l,m,p,v))},error:e[o+1],complete:e[o+2]},s2(t._query)}return function(m,v,C,N){let R=new fv(N),k=new ov(v,R,C);return m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return kj(yield YC(m),k)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return Lj(yield YC(m),k)}))}}(Bv(l),h,c,u)}function c0(t,e){return function(r,i){let s=new Un;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return zj(yield e2(r),i,s)})),s.promise}(Bv(t),e)}function c2(t,e,n){let r=n.docs.get(e._key),i=new Md(t);return new Nd(t,i,e._key,r,new si(n.hasPendingWrites,n.fromCache),e.converter)}var Dv=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=e0(e)}set(e,n,r){this._verifyNotCommitted();let i=Hm(e,this._firestore),s=o2(i.converter,n,r),o=r2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,hn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Hm(e,this._firestore),o;return o=typeof(n=be(n))=="string"||n instanceof pi?n0(this._dataReader,"WriteBatch.update",s._key,n,r,i):t0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Hm(e,this._firestore);return this._mutations=this._mutations.concat(new La(n._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Hm(t,e){if((t=be(t)).firestore!==e)throw new V(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function u0(t){return Bv(t=oi(t,fi)),new Dv(t,e=>c0(t,e))}(function(e,n=!0){(function(i){Ws=i})(gr),on(new pt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),c=new fi(new Gm(r.getProvider("auth-internal")),new Ym(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new od(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),De(DC,"4.7.2",e),De(DC,"4.7.2","esm2017")})();var Ud=function(){return Ud=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ud.apply(this,arguments)};var d2={includeMetadataChanges:!1};function l0(t,e){return e===void 0&&(e=d2),new ae(function(n){var r=zv(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function d0(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Ud(Ud({},r),(n={},n[e.idField]=t.id,n))}function h0(t){return l0(t,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function f0(t,e){return e===void 0&&(e={}),h0(t).pipe(ne(function(n){return n.map(function(r){return d0(r,e)})}))}var Qa=class{constructor(e){return e}},p0="firestore",qv=class{constructor(){return Jr(p0)}};var Gv=new j("angularfire2.firestore-instances");function h2(t,e){let n=Ds(p0,t,e);return n&&new Qa(n)}function f2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qa(r)}}var p2={provide:qv,deps:[[new Oe,Gv]]},g2={provide:Qa,useFactory:h2,deps:[[new Oe,Gv],qt]};function x8(t,...e){return De("angularfire",Pn.full,"fst"),xt([g2,p2,{provide:Gv,useFactory:f2(t),multi:!0,deps:[pe,je,vr,On,[new Oe,ni],[new Oe,yr],...e]}])}var P8=gt(f0,!0);var O8=gt(QS,!0);var k8=gt(YS,!0);var L8=gt(ZS,!0);var F8=gt(a0,!0);var V8=gt(u0,!0);var m2="type.googleapis.com/google.protobuf.Int64Value",y2="type.googleapis.com/google.protobuf.UInt64Value";function v0(t,e){let n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Wv(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Wv(e));if(typeof t=="function"||typeof t=="object")return v0(t,e=>Wv(e));throw new Error("Data cannot be encoded in JSON: "+t)}function jd(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case m2:case y2:{let e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>jd(e)):typeof t=="function"||typeof t=="object"?v0(t,e=>jd(e)):t}var Zv="functions";var g0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Cr=class extends lt{constructor(e,n,r){super(`${Zv}/${e}`,n||""),this.details=r}};function v2(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function _2(t,e){let n=v2(t),r=n,i;try{let s=e&&e.error;if(s){let o=s.status;if(typeof o=="string"){if(!g0[o])return new Cr("internal","internal");n=g0[o],r=o}let c=s.message;typeof c=="string"&&(r=c),i=s.details,i!==void 0&&(i=jd(i))}}catch{}return n==="ok"?null:new Cr(n,r,i)}var Kv=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return w(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return w(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return w(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return w(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var Qv="us-central1";function I2(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Cr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}var Yv=class{constructor(e,n,r,i,s=Qv,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Kv(n,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{let c=new URL(s);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Qv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function w2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function E2(t,e,n){return r=>T2(t,e,r,n||{})}function D2(t,e,n,r){return w(this,null,function*(){n["Content-Type"]="application/json";let i;try{i=yield r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=yield i.json()}catch{}return{status:i.status,json:s}})}function T2(t,e,n,r){let i=t._url(e);return b2(t,i,n,r)}function b2(t,e,n,r){return w(this,null,function*(){n=Wv(n);let i={data:n},s={},o=yield t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);let c=r.timeout||7e4,u=I2(c),l=yield Promise.race([D2(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!l)throw new Cr("cancelled","Firebase Functions instance was deleted.");let h=_2(l.status,l.json);if(h)throw h;if(!l.json)throw new Cr("internal","Response is not valid JSON object.");let p=l.json.data;if(typeof p>"u"&&(p=l.json.result),typeof p>"u")throw new Cr("internal","Response is missing data field.");return{data:jd(p)}})}var m0="@firebase/functions",y0="0.11.8";var C2="auth-internal",S2="app-check-internal",A2="messaging-internal";function R2(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(C2),c=r.getProvider(A2),u=r.getProvider(S2);return new Yv(s,o,c,u,i,t)};on(new pt(Zv,n,"PUBLIC").setMultipleInstances(!0)),De(m0,y0,e),De(m0,y0,"esm2017")}function _0(t=mr(),e=Qv){let r=Yr(be(t),Zv).getImmediate({identifier:e}),i=Tl("functions");return i&&I0(r,...i),r}function I0(t,e,n){w2(be(t),e,n)}function w0(t,e,n){return E2(be(t),e,n)}R2(fetch.bind(self));var Ya=class{constructor(e){return e}},E0="functions",Jv=class{constructor(){return Jr(E0)}};var Xv=new j("angularfire2.functions-instances");function N2(t,e){let n=Ds(E0,t,e);return n&&new Ya(n)}function M2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ya(r)}}var x2={provide:Jv,deps:[[new Oe,Xv]]},P2={provide:Ya,useFactory:N2,deps:[[new Oe,Xv],qt]};function n5(t,...e){return De("angularfire",Pn.full,"fn"),xt([P2,x2,{provide:Xv,useFactory:M2(t),multi:!0,deps:[pe,je,vr,On,[new Oe,ni],[new Oe,yr],...e]}])}var r5=gt(_0,!0),i5=gt(w0,!0);export{L as a,we as b,O2 as c,w as d,ae as e,Ze as f,Re as g,ne as h,OA as i,$ as j,Sw as k,B as l,Oo as m,j as n,W as o,O as p,Oe as q,Hw as r,Lo as s,Mu as t,xt as u,MR as v,Fo as w,X4 as x,eG as y,rp as z,je as A,sp as B,ot as C,pe as D,Uo as E,tG as F,Ot as G,qu as H,Gu as I,iG as J,bx as K,Ox as L,Gx as M,Wx as N,sG as O,oG as P,aG as Q,cG as R,MD as S,xD as T,Sp as U,uG as V,Ap as W,lG as X,dG as Y,hG as Z,OD as _,fG as $,pG as aa,os as ba,gG as ca,mG as da,Mp as ea,cs as fa,zG as ga,qG as ha,QP as ia,m9 as ja,YO as ka,Nn as la,F9 as ma,V9 as na,U9 as oa,v1 as pa,_1 as qa,rb as ra,w1 as sa,$9 as ta,Tl as ua,El as va,sb as wa,ob as xa,ub as ya,H9 as za,XT as Aa,z9 as Ba,q9 as Ca,G9 as Da,W9 as Ea,K9 as Fa,pb as Ga,Q9 as Ha,ws as Ia,tb as Ja,Y9 as Ka,Z9 as La,J9 as Ma,be as Na,pt as Oa,ue as Pa,fr as Qa,on as Ra,Yr as Sa,gr as Ta,mr as Ua,De as Va,Pn as Wa,Ds as Xa,Jr as Ya,yr as Za,vr as _a,gt as $a,qt as ab,On as bb,UW as cb,jW as db,hF as eb,uC as fb,yC as gb,ba as hb,ni as ib,k3 as jb,L3 as kb,Qa as lb,x8 as mb,P8 as nb,O8 as ob,k8 as pb,L8 as qb,F8 as rb,V8 as sb,Ya as tb,n5 as ub,r5 as vb,i5 as wb};
