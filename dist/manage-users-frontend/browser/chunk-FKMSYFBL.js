var TA=Object.defineProperty,bA=Object.defineProperties;var CA=Object.getOwnPropertyDescriptors;var Ic=Object.getOwnPropertySymbols,SA=Object.getPrototypeOf,fI=Object.prototype.hasOwnProperty,pI=Object.prototype.propertyIsEnumerable,AA=Reflect.get;var hI=(t,e,n)=>e in t?TA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})fI.call(e,n)&&hI(t,n,e[n]);if(Ic)for(var n of Ic(e))pI.call(e,n)&&hI(t,n,e[n]);return t},we=(t,e)=>bA(t,CA(e));var iB=(t,e)=>{var n={};for(var r in t)fI.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ic)for(var r of Ic(t))e.indexOf(r)<0&&pI.call(t,r)&&(n[r]=t[r]);return n};var Qn=(t,e,n)=>AA(SA(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function gI(t,e){return Object.is(t,e)}var Ve=null,wc=!1,Ec=1,wn=Symbol("SIGNAL");function oe(t){let e=Ve;return Ve=t,e}function mI(){return Ve}var vo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Dh(t){if(wc)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(t);let e=Ve.nextProducerIndex++;if(Cc(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==t&&yo(Ve)){let n=Ve.producerNode[e];bc(n,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==t&&(Ve.producerNode[e]=t,Ve.producerIndexOfThis[e]=yo(Ve)?II(t,Ve,e):0),Ve.producerLastReadVersion[e]=t.version}function RA(){Ec++}function yI(t){if(!(yo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ec)){if(!t.producerMustRecompute(t)&&!bh(t)){t.dirty=!1,t.lastCleanEpoch=Ec;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Ec}}function vI(t){if(t.liveConsumerNode===void 0)return;let e=wc;wc=!0;try{for(let n of t.liveConsumerNode)n.dirty||NA(n)}finally{wc=e}}function _I(){return Ve?.consumerAllowSignalWrites!==!1}function NA(t){t.dirty=!0,vI(t),t.consumerMarkedDirty?.(t)}function Tc(t){return t&&(t.nextProducerIndex=0),oe(t)}function Th(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(yo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)bc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function bh(t){Cc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(yI(n),r!==n.version))return!0}return!1}function Ch(t){if(Cc(t),yo(t))for(let e=0;e<t.producerNode.length;e++)bc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function II(t,e,n){if(wI(t),t.liveConsumerNode.length===0&&EI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=II(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function bc(t,e){if(wI(t),t.liveConsumerNode.length===1&&EI(t))for(let r=0;r<t.producerNode.length;r++)bc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cc(i),i.producerIndexOfThis[r]=e}}function yo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function wI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function EI(t){return t.producerNode!==void 0}function DI(t){let e=Object.create(MA);e.computation=t;let n=()=>{if(yI(e),Dh(e),e.value===Dc)throw e.error;return e.value};return n[wn]=e,n}var wh=Symbol("UNSET"),Eh=Symbol("COMPUTING"),Dc=Symbol("ERRORED"),MA=we(F({},vo),{value:wh,dirty:!0,error:null,equal:gI,producerMustRecompute(t){return t.value===wh||t.value===Eh},producerRecomputeValue(t){if(t.value===Eh)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Eh;let n=Tc(t),r;try{r=t.computation()}catch(i){r=Dc,t.error=i}finally{Th(t,n)}if(e!==wh&&e!==Dc&&r!==Dc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function xA(){throw new Error}var TI=xA;function bI(){TI()}function CI(t){TI=t}var PA=null;function SI(t){let e=Object.create(RI);e.value=t;let n=()=>(Dh(e),e.value);return n[wn]=e,n}function Sh(t,e){_I()||bI(),t.equal(t.value,e)||(t.value=e,OA(t))}function AI(t,e){_I()||bI(),Sh(t,e(t.value))}var RI=we(F({},vo),{equal:gI,value:void 0});function OA(t){t.version++,RA(),vI(t),PA?.()}function J(t){return typeof t=="function"}function Ci(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Sc=Ci(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function kr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof Sc?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{NI(s)}catch(o){e=e??[],o instanceof Sc?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Sc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)NI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&kr(n,e)}remove(e){let{_finalizers:n}=this;n&&kr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Ah=Re.EMPTY;function Ac(t){return t instanceof Re||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function NI(t){J(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Si={setTimeout(t,e,...n){let{delegate:r}=Si;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Si;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Rc(t){Si.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function _o(){}var MI=Rh("C",void 0,void 0);function xI(t){return Rh("E",void 0,t)}function PI(t){return Rh("N",t,void 0)}function Rh(t,e,n){return{kind:t,value:e,error:n}}var Lr=null;function Ai(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Lr;if(e&&(Lr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Lr;if(Lr=null,n)throw r}}else t()}function OI(t){Vt.useDeprecatedSynchronousErrorHandling&&Lr&&(Lr.errorThrown=!0,Lr.error=t)}var Fr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ac(e)&&e.add(this)):this.destination=FA}static create(e,n,r){return new Ri(e,n,r)}next(e){this.isStopped?Mh(PI(e),this):this._next(e)}error(e){this.isStopped?Mh(xI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mh(MI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kA=Function.prototype.bind;function Nh(t,e){return kA.call(t,e)}var xh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Nc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Nc(r)}else Nc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nc(n)}}},Ri=class extends Fr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Nh(e.next,s),error:e.error&&Nh(e.error,s),complete:e.complete&&Nh(e.complete,s)}):i=e}this.destination=new xh(i)}};function Nc(t){Vt.useDeprecatedSynchronousErrorHandling?OI(t):Rc(t)}function LA(t){throw t}function Mh(t,e){let{onStoppedNotification:n}=Vt;n&&Si.setTimeout(()=>n(t,e))}var FA={closed:!0,next:_o,error:LA,complete:_o};var Ni=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function Mc(...t){return Ph(t)}function Ph(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=UA(n)?n:new Ri(n,r,i);return Ai(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kI(r),new r((i,s)=>{let o=new Ri({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ni](){return this}pipe(...n){return Ph(n)(this)}toPromise(n){return n=kI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function kI(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function VA(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function UA(t){return t&&t instanceof Fr||VA(t)&&Ac(t)}function Oh(t){return J(t?.lift)}function ue(t){return e=>{if(Oh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(t,e,n,r,i){return new kh(t,e,n,r,i)}var kh=class extends Fr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mi(){return ue((t,e)=>{let n=null;t._refCount++;let r=ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var xi=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Oh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return Mi()(this)}};var LI=Ci(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new xc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new LI}next(n){Ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ai(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ah:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,kr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new xc(e,n),t})(),xc=class extends Xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ah}};var We=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Lh={now(){return(Lh.delegate||Date).now()},delegate:void 0};var Pc=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Io={setInterval(t,e,...n){let{delegate:r}=Io;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Io;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Pi=class extends Pc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Io.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Io.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,kr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Oi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Oi.now=Lh.now;var ki=class extends Oi{constructor(e,n=Oi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var wo=new ki(Pi);var Oc=class extends Pi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var kc=class extends ki{};var Fh=new kc(Oc);var wt=new ce(t=>t.complete());function FI(t){return t&&J(t.schedule)}function VI(t){return t[t.length-1]}function Lc(t){return J(VI(t))?t.pop():void 0}function Yn(t){return FI(VI(t))?t.pop():void 0}function Fc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function jI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function UI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vr(t){return this instanceof Vr?(this.v=t,this):new Vr(t)}function BI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(C){return Promise.resolve(C).then(v,p)}}function a(v,C){r[v]&&(i[v]=function(N){return new Promise(function(R,k){s.push([v,N,R,k])>1||u(v,N)})},C&&(i[v]=C(i[v])))}function u(v,C){try{l(r[v](C))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Vr?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,C){v(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function $I(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof UI=="function"?UI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Vc=t=>t&&typeof t.length=="number"&&typeof t!="function";function Uc(t){return J(t?.then)}function jc(t){return J(t[Ni])}function Bc(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function $c(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hc=jA();function zc(t){return J(t?.[Hc])}function qc(t){return BI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Vr(n.read());if(i)return yield Vr(void 0);yield yield Vr(r)}}finally{n.releaseLock()}})}function Gc(t){return J(t?.getReader)}function xe(t){if(t instanceof ce)return t;if(t!=null){if(jc(t))return BA(t);if(Vc(t))return $A(t);if(Uc(t))return HA(t);if(Bc(t))return HI(t);if(zc(t))return zA(t);if(Gc(t))return qA(t)}throw $c(t)}function BA(t){return new ce(e=>{let n=t[Ni]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $A(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function HA(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Rc)})}function zA(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function HI(t){return new ce(e=>{GA(t,e).catch(n=>e.error(n))})}function qA(t){return HI(qc(t))}function GA(t,e){var n,r,i,s;return jI(this,void 0,void 0,function*(){try{for(n=$I(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ft(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Zn(t,e=0){return ue((n,r)=>{n.subscribe(ie(r,i=>ft(r,t,()=>r.next(i),e),()=>ft(r,t,()=>r.complete(),e),i=>ft(r,t,()=>r.error(i),e)))})}function Jn(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zI(t,e){return xe(t).pipe(Jn(e),Zn(e))}function qI(t,e){return xe(t).pipe(Jn(e),Zn(e))}function GI(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function WI(t,e){return new ce(n=>{let r;return ft(n,e,()=>{r=t[Hc](),ft(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Wc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{ft(n,e,()=>{let r=t[Symbol.asyncIterator]();ft(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function KI(t,e){return Wc(qc(t),e)}function QI(t,e){if(t!=null){if(jc(t))return zI(t,e);if(Vc(t))return GI(t,e);if(Uc(t))return qI(t,e);if(Bc(t))return Wc(t,e);if(zc(t))return WI(t,e);if(Gc(t))return KI(t,e)}throw $c(t)}function Ne(t,e){return e?QI(t,e):xe(t)}function G(...t){let e=Yn(t);return Ne(t,e)}function Li(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function Vh(t){return!!t&&(t instanceof ce||J(t.lift)&&J(t.subscribe))}var En=Ci(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(t,e){return ue((n,r)=>{let i=0;n.subscribe(ie(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:WA}=Array;function KA(t,e){return WA(e)?t(...e):t(e)}function Kc(t){return ne(e=>KA(t,e))}var{isArray:QA}=Array,{getPrototypeOf:YA,prototype:ZA,keys:JA}=Object;function Qc(t){if(t.length===1){let e=t[0];if(QA(e))return{args:e,keys:null};if(XA(e)){let n=JA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function XA(t){return t&&typeof t=="object"&&YA(t)===ZA}function Yc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Eo(...t){let e=Yn(t),n=Lc(t),{args:r,keys:i}=Qc(t);if(r.length===0)return Ne([],e);let s=new ce(eR(r,e,i?o=>Yc(i,o):It));return n?s.pipe(Kc(n)):s}function eR(t,e,n=It){return r=>{YI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)YI(e,()=>{let l=Ne(t[u],e),h=!1;l.subscribe(ie(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function YI(t,e,n){t?ft(n,t,e):e()}function ZI(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;xe(n(N,h++)).subscribe(ie(e,k=>{i?.(k),s?v(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();o?ft(e,o,()=>C(k)):C(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(ie(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Pe(t,e,n=1/0){return J(e)?Pe((r,i)=>ne((s,o)=>e(r,s,i,o))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>ZI(r,i,t,n)))}function Fi(t=1/0){return Pe(It,t)}function JI(){return Fi(1)}function Vi(...t){return JI()(Ne(t,Yn(t)))}function Zc(t){return new ce(e=>{xe(t()).subscribe(e)})}function tR(...t){let e=Lc(t),{args:n,keys:r}=Qc(t),i=new ce(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;xe(n[h]).subscribe(ie(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Yc(r,a):a),s.complete())}))}});return e?i.pipe(Kc(e)):i}function Et(t,e){return ue((n,r)=>{let i=0;n.subscribe(ie(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Xn(t){return ue((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ie(n,void 0,void 0,o=>{s=xe(t(o,Xn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function XI(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ie(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Ur(t,e){return J(e)?Pe(t,e,1):Pe(t,1)}function nR(t,e=wo){return ue((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function u(){let l=o+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(ie(r,l=>{s=l,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function er(t){return ue((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Dn(t){return t<=0?()=>wt:ue((e,n)=>{let r=0;e.subscribe(ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Uh(t){return ne(()=>t)}function Jc(t=rR){return ue((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function rR(){return new En}function Do(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,s)=>t(i,s,r)):It,Dn(1),n?er(e):Jc(()=>new En))}function Ui(t){return t<=0?()=>wt:ue((e,n)=>{let r=[];e.subscribe(ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,s)=>t(i,s,r)):It,Ui(1),n?er(e):Jc(()=>new En))}function Xc(t,e){return ue(XI(t,e,arguments.length>=2,!0))}function eu(...t){let e=Yn(t);return ue((n,r)=>{(e?Vi(t,n,e):Vi(t,n)).subscribe(r)})}function Dt(t,e){return ue((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ie(r,u=>{i?.unsubscribe();let l=0,h=s++;xe(t(u,h)).subscribe(i=ie(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bh(t){return ue((e,n)=>{xe(t).subscribe(ie(n,()=>n.complete(),_o)),!n.closed&&e.subscribe(n)})}function Ue(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ie(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var Lw="https://g.co/ng/security#xss",H=class extends Error{constructor(e,n){super(Qf(e,n)),this.code=e}};function Qf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Lo(t){return{toString:t}.toString()}var tu="__parameters__";function iR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Fw(t,e,n){return Lo(()=>{let r=iR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(tu)?u[tu]:Object.defineProperty(u,tu,{value:[]})[tu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var nf=globalThis;function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("Could not find renamed property on target object.")}function sR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(gt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ew(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var oR=_e({__forward_ref__:_e});function Vw(t){return t.__forward_ref__=Vw,t.toString=function(){return gt(this())},t}function ot(t){return Uw(t)?t():t}function Uw(t){return typeof t=="function"&&t.hasOwnProperty(oR)&&t.__forward_ref__===Vw}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Fo(t){return{providers:t.providers||[],imports:t.imports||[]}}function ku(t){return tw(t,Bw)||tw(t,$w)}function jw(t){return ku(t)!==null}function tw(t,e){return t.hasOwnProperty(e)?t[e]:null}function aR(t){let e=t&&(t[Bw]||t[$w]);return e||null}function nw(t){return t&&(t.hasOwnProperty(rw)||t.hasOwnProperty(cR))?t[rw]:null}var Bw=_e({\u0275prov:_e}),rw=_e({\u0275inj:_e}),$w=_e({ngInjectableDef:_e}),cR=_e({ngInjectorDef:_e}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hw(t){return t&&!!t.\u0275providers}var uR=_e({\u0275cmp:_e}),lR=_e({\u0275dir:_e}),dR=_e({\u0275pipe:_e}),hR=_e({\u0275mod:_e}),du=_e({\u0275fac:_e}),bo=_e({__NG_ELEMENT_ID__:_e}),iw=_e({__NG_ENV_ID__:_e});function Lu(t){return typeof t=="string"?t:t==null?"":String(t)}function fR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Lu(t)}function pR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,t)}function Yf(t,e){throw new H(-201,!1)}var re=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(re||{}),rf;function zw(){return rf}function pt(t){let e=rf;return rf=t,e}function qw(t,e,n){let r=ku(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&re.Optional)return null;if(e!==void 0)return e;Yf(t,"Injector")}var gR={},Co=gR,sf="__NG_DI_FLAG__",hu="ngTempTokenPath",mR="ngTokenPath",yR=/\n/gm,vR="\u0275",sw="__source",zi;function _R(){return zi}function tr(t){let e=zi;return zi=t,e}function IR(t,e=re.Default){if(zi===void 0)throw new H(-203,!1);return zi===null?qw(t,void 0,e):zi.get(t,e&re.Optional?null:void 0,e)}function W(t,e=re.Default){return(zw()||IR)(ot(t),e)}function O(t,e=re.Default){return W(t,Fu(e))}function Fu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function of(t){let e=[];for(let n=0;n<t.length;n++){let r=ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=re.Default;for(let o=0;o<r.length;o++){let a=r[o],u=wR(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(W(i,s))}else e.push(W(r))}return e}function Gw(t,e){return t[sf]=e,t.prototype[sf]=e,t}function wR(t){return t[sf]}function ER(t,e,n,r){let i=t[hu];throw e[sw]&&i.unshift(e[sw]),t.message=DR(`
`+t.message,i,n,r),t[mR]=i,t[hu]=null,t}function DR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==vR?t.slice(2):t;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yR,`
  `)}`}var Oe=Gw(Fw("Optional"),8);var Ww=Gw(Fw("SkipSelf"),4);function Br(t,e){let n=t.hasOwnProperty(du);return n?t[du]:null}function Zf(t,e){t.forEach(n=>Array.isArray(n)?Zf(n,e):e(n))}function Kw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function TR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function bR(t,e,n){let r=Vo(t,e);return r>=0?t[r|1]=n:(r=~r,TR(t,r,e,n)),r}function $h(t,e){let n=Vo(t,e);if(n>=0)return t[n|1]}function Vo(t,e){return CR(t,e,1)}function CR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Gi={},Nt=[],Wi=new j(""),Qw=new j("",-1),Yw=new j(""),pu=class{get(e,n=Co){if(n===Co){let r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return n}},Zw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zw||{}),Jt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jt||{}),ir=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ir||{});function SR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function af(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];AR(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Jw(t){return t===3||t===4||t===6}function AR(t){return t.charCodeAt(0)===64}function So(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ow(t,n,i,null,e[++r]):ow(t,n,i,null,null))}}return t}function ow(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Xw="ng-template";function RR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Jf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Jf(t){return t.type===4&&t.value!==Xw}function NR(t,e,n){let r=t.type===4&&!n?Xw:t.value;return e===r}function MR(t,e,n){let r=4,i=t.attrs,s=i!==null?OR(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Ut(r)&&!Ut(u))return!1;if(o&&Ut(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!NR(t,u,n)||u===""&&e.length===1){if(Ut(r))return!1;o=!0}}else if(r&8){if(i===null||!RR(t,i,u,n)){if(Ut(r))return!1;o=!0}}else{let l=e[++a],h=xR(u,i,Jf(t),n);if(h===-1){if(Ut(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ut(r))return!1;o=!0}}}}return Ut(r)||o}function Ut(t){return(t&1)===0}function xR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return kR(e,t)}function PR(t,e,n=!1){for(let r=0;r<e.length;r++)if(MR(t,e[r],n))return!0;return!1}function OR(t){for(let e=0;e<t.length;e++){let n=t[e];if(Jw(n))return e}return t.length}function kR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function aw(t,e){return t?":not("+e.trim()+")":e}function LR(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ut(o)&&(e+=aw(s,i),i=""),r=o,s=s||!Ut(r);n++}return i!==""&&(e+=aw(s,i)),e}function FR(t){return t.map(LR).join(",")}function VR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ut(i))break;i=s}r++}return{attrs:e,classes:n}}function eE(t){return Lo(()=>{let e=oE(t),n=we(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jt.Emulated,styles:t.styles||Nt,_:null,schemas:t.schemas||null,tView:null,id:""});aE(n);let r=t.dependencies;return n.directiveDefs=uw(r,!1),n.pipeDefs=uw(r,!0),n.id=BR(n),n})}function UR(t){return sr(t)||nE(t)}function jR(t){return t!==null}function Uo(t){return Lo(()=>({type:t.type,bootstrap:t.bootstrap||Nt,declarations:t.declarations||Nt,imports:t.imports||Nt,exports:t.exports||Nt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function cw(t,e){if(t==null)return Gi;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=ir.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==ir.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Vu(t){return Lo(()=>{let e=oE(t);return aE(e),e})}function tE(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function sr(t){return t[uR]||null}function nE(t){return t[lR]||null}function rE(t){return t[dR]||null}function iE(t){let e=sr(t)||nE(t)||rE(t);return e!==null?e.standalone:!1}function sE(t,e){let n=t[hR]||null;if(!n&&e===!0)throw new Error(`Type ${gt(t)} does not have '\u0275mod' property.`);return n}function oE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Gi,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Nt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cw(t.inputs,e),outputs:cw(t.outputs),debugInfo:null}}function aE(t){t.features?.forEach(e=>e(t))}function uw(t,e){if(!t)return null;let n=e?rE:UR;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(jR)}function BR(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function xt(t){return{\u0275providers:t}}function $R(...t){return{\u0275providers:cE(!0,t),\u0275fromNgModule:!0}}function cE(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Zf(e,o=>{let a=o;cf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&uE(i,s),n}function uE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Xf(i,s=>{e(s,r)})}}function cf(t,e,n,r){if(t=ot(t),!t)return!1;let i=null,s=nw(t),o=!s&&sr(t);if(!s&&!o){let u=t.ngModule;if(s=nw(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)cf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Zf(s.imports,h=>{cf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&uE(l,e)}if(!a){let l=Br(i)||(()=>new i);e({provide:i,useFactory:l,deps:Nt},i),e({provide:Yw,useValue:i,multi:!0},i),e({provide:Wi,useValue:()=>W(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Xf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Xf(t,e){for(let n of t)Hw(n)&&(n=n.\u0275providers),Array.isArray(n)?Xf(n,e):e(n)}var HR=_e({provide:String,useValue:_e});function lE(t){return t!==null&&typeof t=="object"&&HR in t}function zR(t){return!!(t&&t.useExisting)}function qR(t){return!!(t&&t.useFactory)}function Ki(t){return typeof t=="function"}function GR(t){return!!t.useClass}var Uu=new j(""),ou={},WR={},Hh;function ep(){return Hh===void 0&&(Hh=new pu),Hh}var Tt=class{},Ao=class extends Tt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lf(e,o=>this.processProvider(o)),this.records.set(Qw,ji(void 0,this)),i.has("environment")&&this.records.set(Tt,ji(void 0,this));let s=this.records.get(Uu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Yw,Nt,re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=tr(this),r=pt(void 0),i;try{return e()}finally{tr(n),pt(r)}}get(e,n=Co,r=re.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(iw))return e[iw](this);r=Fu(r);let i,s=tr(this),o=pt(void 0);try{if(!(r&re.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=JR(e)&&ku(e);l&&this.injectableDefInScope(l)?u=ji(uf(e),ou):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&re.Self?ep():this.parent;return n=r&re.Optional&&n===Co?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[hu]=a[hu]||[]).unshift(gt(e)),s)throw a;return ER(a,e,"R3InjectorError",this.source)}else throw a}finally{pt(o),tr(s)}}resolveInjectorInitializers(){let e=oe(null),n=tr(this),r=pt(void 0),i;try{let s=this.get(Wi,Nt,re.Self);for(let o of s)o()}finally{tr(n),pt(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=ot(e);let n=Ki(e)?e:ot(e&&e.provide),r=QR(e);if(!Ki(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ji(void 0,ou,!0),i.factory=()=>of(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===ou&&(n.value=WR,n.value=n.factory()),typeof n.value=="object"&&n.value&&ZR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function uf(t){let e=ku(t),n=e!==null?e.factory:Br(t);if(n!==null)return n;if(t instanceof j)throw new H(204,!1);if(t instanceof Function)return KR(t);throw new H(204,!1)}function KR(t){if(t.length>0)throw new H(204,!1);let n=aR(t);return n!==null?()=>n.factory(t):()=>new t}function QR(t){if(lE(t))return ji(void 0,t.useValue);{let e=dE(t);return ji(e,ou)}}function dE(t,e,n){let r;if(Ki(t)){let i=ot(t);return Br(i)||uf(i)}else if(lE(t))r=()=>ot(t.useValue);else if(qR(t))r=()=>t.useFactory(...of(t.deps||[]));else if(zR(t))r=()=>W(ot(t.useExisting));else{let i=ot(t&&(t.useClass||t.provide));if(YR(t))r=()=>new i(...of(t.deps));else return Br(i)||uf(i)}return r}function ji(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function YR(t){return!!t.deps}function ZR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function JR(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function lf(t,e){for(let n of t)Array.isArray(n)?lf(n,e):n&&Hw(n)?lf(n.\u0275providers,e):e(n)}function tn(t,e){t instanceof Ao&&t.assertNotDestroyed();let n,r=tr(t),i=pt(void 0);try{return e()}finally{tr(r),pt(i)}}function hE(){return zw()!==void 0||_R()!=null}function XR(t){if(!hE())throw new H(-203,!1)}function eN(t){return typeof t=="function"}var Cn=0,ee=1,Q=2,ut=3,jt=4,$t=5,Ro=6,gu=7,et=8,Qi=9,Xt=10,je=11,No=12,lw=13,os=14,Bt=15,Yi=16,Bi=17,Zi=18,ju=19,fE=20,nr=21,zh=22,Mt=23,bt=25,pE=1;var $r=7,mu=8,yu=9,ct=10,vu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(vu||{});function rr(t){return Array.isArray(t)&&typeof t[pE]=="object"}function Sn(t){return Array.isArray(t)&&t[pE]===!0}function gE(t){return(t.flags&4)!==0}function Bu(t){return t.componentOffset>-1}function tp(t){return(t.flags&1)===1}function or(t){return!!t.template}function df(t){return(t[Q]&512)!==0}var hf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function mE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function jo(){return yE}function yE(t){return t.type.prototype.ngOnChanges&&(t.setInput=nN),tN}jo.ngInherit=!0;function tN(){let t=_E(this),e=t?.current;if(e){let n=t.previous;if(n===Gi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function nN(t,e,n,r,i){let s=this.declaredInputs[r],o=_E(t)||rN(t,{previous:Gi,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new hf(l&&l.currentValue,n,u===Gi),mE(t,e,i,n)}var vE="__ngSimpleChanges__";function _E(t){return t[vE]||null}function rN(t,e){return t[vE]=e}var dw=null;var Yt=function(t,e,n){dw?.(t,e,n)},iN="svg",sN="math";function en(t){for(;Array.isArray(t);)t=t[Cn];return t}function IE(t,e){return en(e[t])}function Pt(t,e){return en(e[t.index])}function np(t,e){return t.data[e]}function oN(t,e){return t[e]}function ur(t,e){let n=e[t];return rr(n)?n:n[Cn]}function rp(t){return(t[Q]&128)===128}function aN(t){return Sn(t[ut])}function Ji(t,e){return e==null?null:t[e]}function wE(t){t[Bi]=0}function EE(t){t[Q]&1024||(t[Q]|=1024,rp(t)&&Hu(t))}function cN(t,e){for(;t>0;)e=e[os],t--;return e}function $u(t){return!!(t[Q]&9216||t[Mt]?.dirty)}function ff(t){t[Xt].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),$u(t)&&Hu(t)}function Hu(t){t[Xt].changeDetectionScheduler?.notify(0);let e=Hr(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!rp(e)));)e=Hr(e)}function DE(t,e){if((t[Q]&256)===256)throw new H(911,!1);t[nr]===null&&(t[nr]=[]),t[nr].push(e)}function uN(t,e){if(t[nr]===null)return;let n=t[nr].indexOf(e);n!==-1&&t[nr].splice(n,1)}function Hr(t){let e=t[ut];return Sn(e)?e[ut]:e}var ae={lFrame:xE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TE=!1;function lN(){return ae.lFrame.elementDepthCount}function dN(){ae.lFrame.elementDepthCount++}function hN(){ae.lFrame.elementDepthCount--}function bE(){return ae.bindingsEnabled}function fN(){return ae.skipHydrationRootTNode!==null}function pN(t){return ae.skipHydrationRootTNode===t}function gN(){ae.skipHydrationRootTNode=null}function me(){return ae.lFrame.lView}function lt(){return ae.lFrame.tView}function RG(t){return ae.lFrame.contextLView=t,t[et]}function NG(t){return ae.lFrame.contextLView=null,t}function mt(){let t=CE();for(;t!==null&&t.type===64;)t=t.parent;return t}function CE(){return ae.lFrame.currentTNode}function mN(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bo(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function SE(){return ae.lFrame.isParent}function yN(){ae.lFrame.isParent=!1}function AE(){return TE}function hw(t){TE=t}function vN(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _N(t){return ae.lFrame.bindingIndex=t}function as(){return ae.lFrame.bindingIndex++}function IN(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function wN(){return ae.lFrame.inI18n}function EN(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,pf(e)}function DN(){return ae.lFrame.currentDirectiveIndex}function pf(t){ae.lFrame.currentDirectiveIndex=t}function TN(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function RE(t){ae.lFrame.currentQueryIndex=t}function bN(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function NE(t,e,n){if(n&re.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&re.Host);)if(i=bN(s),i===null||(s=s[os],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ae.lFrame=ME();return r.currentTNode=e,r.lView=t,!0}function ip(t){let e=ME(),n=t[ee];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ME(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?xE(t):e}function xE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function PE(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var OE=PE;function sp(){let t=PE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function CN(t){return(ae.lFrame.contextLView=cN(t,ae.lFrame.contextLView))[et]}function Kr(){return ae.lFrame.selectedIndex}function zr(t){ae.lFrame.selectedIndex=t}function op(){let t=ae.lFrame;return np(t.tView,t.selectedIndex)}function SN(){return ae.lFrame.currentNamespace}var kE=!0;function ap(){return kE}function cp(t){kE=t}function AN(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=yE(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function up(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function au(t,e,n){LE(t,e,3,n)}function cu(t,e,n,r){(t[Q]&3)===n&&LE(t,e,n,r)}function qh(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function LE(t,e,n,r){let i=r!==void 0?t[Bi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Bi]+=65536),(a<s||s==-1)&&(RN(t,n,e,u),t[Bi]=(t[Bi]&4294901760)+u+2),u++}function fw(t,e){Yt(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),Yt(5,t,e)}}function RN(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[Bi]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,fw(a,s)):fw(a,s)}var qi=-1,qr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function NN(t){return t instanceof qr}function MN(t){return(t.flags&8)!==0}function xN(t){return(t.flags&16)!==0}var Gh={},gf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Fu(r);let i=this.injector.get(e,Gh,r);return i!==Gh||n===Gh?i:this.parentInjector.get(e,n,r)}};function FE(t){return t!==qi}function _u(t){return t&32767}function PN(t){return t>>16}function Iu(t,e){let n=PN(t),r=e;for(;n>0;)r=r[os],n--;return r}var mf=!0;function wu(t){let e=mf;return mf=t,e}var ON=256,VE=ON-1,UE=5,kN=0,Zt={};function LN(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(bo)&&(r=n[bo]),r==null&&(r=n[bo]=kN++);let i=r&VE,s=1<<i;e.data[t+(i>>UE)]|=s}function Eu(t,e){let n=jE(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,Wh(r.data,t),Wh(e,null),Wh(r.blueprint,null));let i=lp(t,e),s=t.injectorIndex;if(FE(i)){let o=_u(i),a=Iu(i,e),u=a[ee].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Wh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jE(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function lp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=qE(i),r===null)return qi;if(n++,i=i[os],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return qi}function yf(t,e,n){LN(t,e,n)}function FN(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(Jw(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function BE(t,e,n){if(n&re.Optional||t!==void 0)return t;Yf(e,"NodeInjector")}function $E(t,e,n,r){if(n&re.Optional&&r===void 0&&(r=null),!(n&(re.Self|re.Host))){let i=t[Qi],s=pt(void 0);try{return i?i.get(e,r,n&re.Optional):qw(e,r,n&re.Optional)}finally{pt(s)}}return BE(r,e,n)}function HE(t,e,n,r=re.Default,i){if(t!==null){if(e[Q]&2048&&!(r&re.Self)){let o=$N(t,e,n,r,Zt);if(o!==Zt)return o}let s=zE(t,e,n,r,Zt);if(s!==Zt)return s}return $E(e,n,r,i)}function zE(t,e,n,r,i){let s=jN(n);if(typeof s=="function"){if(!NE(e,t,r))return r&re.Host?BE(i,n,r):$E(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&re.Optional))Yf(n);else return o}finally{OE()}}else if(typeof s=="number"){let o=null,a=jE(t,e),u=qi,l=r&re.Host?e[Bt][$t]:null;for((a===-1||r&re.SkipSelf)&&(u=a===-1?lp(t,e):e[a+8],u===qi||!gw(r,!1)?a=-1:(o=e[ee],a=_u(u),e=Iu(u,e)));a!==-1;){let h=e[ee];if(pw(s,a,h.data)){let p=VN(a,e,n,o,r,l);if(p!==Zt)return p}u=e[a+8],u!==qi&&gw(r,e[ee].data[a+8]===l)&&pw(s,a,e)?(o=h,a=_u(u),e=Iu(u,e)):a=-1}}return i}function VN(t,e,n,r,i,s){let o=e[ee],a=o.data[t+8],u=r==null?Bu(a)&&mf:r!=o&&(a.type&3)!==0,l=i&re.Host&&s===a,h=UN(a,o,n,u,l);return h!==null?Xi(e,o,h,a):Zt}function UN(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let C=o[v];if(v<u&&n===C||v>=u&&C.type===n)return v}if(i){let v=o[u];if(v&&or(v)&&v.type===n)return u}return null}function Xi(t,e,n,r){let i=t[n],s=e.data;if(NN(i)){let o=i;o.resolving&&pR(fR(s[n]));let a=wu(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?pt(o.injectImpl):null,h=NE(t,r,re.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&AN(n,s[n],e)}finally{l!==null&&pt(l),wu(a),o.resolving=!1,OE()}}return i}function jN(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(bo)?t[bo]:void 0;return typeof e=="number"?e>=0?e&VE:BN:e}function pw(t,e,n){let r=1<<t;return!!(n[e+(t>>UE)]&r)}function gw(t,e){return!(t&re.Self)&&!(t&re.Host&&e)}var jr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return HE(this._tNode,this._lView,e,Fu(r),n)}};function BN(){return new jr(mt(),me())}function dp(t){return Lo(()=>{let e=t.prototype.constructor,n=e[du]||vf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[du]||vf(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function vf(t){return Uw(t)?()=>{let e=vf(ot(t));return e&&e()}:Br(t)}function $N(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=zE(s,o,n,r|re.Self,Zt);if(a!==Zt)return a;let u=s.parent;if(!u){let l=o[fE];if(l){let h=l.get(n,Zt,r);if(h!==Zt)return h}u=qE(o),o=o[os]}s=u}return i}function qE(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}function hp(t){return FN(mt(),t)}function mw(t,e=null,n=null,r){let i=GE(t,e,n,r);return i.resolveInjectorInitializers(),i}function GE(t,e=null,n=null,r,i=new Set){let s=[n||Nt,$R(t)];return r=r||(typeof t=="object"?void 0:gt(t)),new Ao(s,e||ep(),r||null,i)}var $e=class t{static{this.THROW_IF_NOT_FOUND=Co}static{this.NULL=new pu}static create(e,n){if(Array.isArray(e))return mw({name:""},n,e,"");{let r=e.name??"";return mw({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:t,providedIn:"any",factory:()=>W(Qw)})}static{this.__NG_ELEMENT_ID__=-1}};var HN=new j("");HN.__NG_ELEMENT_ID__=t=>{let e=mt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&re.Optional)return null;throw new H(204,!1)};var zN="ngOriginalError";function Kh(t){return t[zN]}var WE=!0,fp=(()=>{class t{static{this.__NG_ELEMENT_ID__=qN}static{this.__NG_ENV_ID__=n=>n}}return t})(),_f=class extends fp{constructor(e){super(),this._lView=e}onDestroy(e){return DE(this._lView,e),()=>uN(this._lView,e)}};function qN(){return new _f(me())}var cs=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}}return t})();var If=class extends Xe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,hE()&&(this.destroyRef=O(fp,{optional:!0})??void 0,this.pendingTasks=O(cs,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},at=If;function Du(...t){}function KE(t){let e,n;function r(){t=Du;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function yw(t){return queueMicrotask(()=>t()),()=>{t=Du}}var pp="isAngularZone",Tu=pp+"_ID",GN=0,pe=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=WE}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,QN(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(pp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,WN,Du,Du);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},WN={};function gp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function KN(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){KE(()=>{t.callbackScheduled=!1,wf(t),t.isCheckStableRunning=!0,gp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),wf(t)}function QN(t){let e=()=>{KN(t)},n=GN++;t._inner=t._inner.fork({name:"angular",properties:{[pp]:!0,[Tu]:n,[Tu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(YN(u))return r.invokeTask(s,o,a,u);try{return vw(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),_w(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return vw(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!ZN(u)&&e(),_w(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,wf(t),gp(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function wf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function vw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function _w(t){t._nesting--,gp(t)}var Ef=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new at,this.onMicrotaskEmpty=new at,this.onStable=new at,this.onError=new at}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function YN(t){return QE(t,"__ignore_ng_zone__")}function ZN(t){return QE(t,"__scheduler_tick__")}function QE(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Tn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Kh(e);for(;n&&Kh(n);)n=Kh(n);return n||null}},JN=new j("",{providedIn:"root",factory:()=>{let t=O(pe),e=O(Tn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function XN(){return mp(mt(),me())}function mp(t,e){return new $o(Pt(t,e))}var $o=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=XN}}return t})();function YE(t){return(t.flags&128)===128}var ZE=new Map,eM=0;function tM(){return eM++}function nM(t){ZE.set(t[ju],t)}function Df(t){ZE.delete(t[ju])}var Iw="__ngContext__";function Gr(t,e){rr(e)?(t[Iw]=e[ju],nM(e)):t[Iw]=e}function JE(t){return eD(t[No])}function XE(t){return eD(t[jt])}function eD(t){for(;t!==null&&!Sn(t);)t=t[jt];return t}var Tf;function tD(t){Tf=t}function rM(){if(Tf!==void 0)return Tf;if(typeof document<"u")return document;throw new H(210,!1)}var yp=new j("",{providedIn:"root",factory:()=>iM}),iM="ng",vp=new j(""),nn=new j("",{providedIn:"platform",factory:()=>"unknown"});var _p=new j("",{providedIn:"root",factory:()=>rM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sM="h",oM="b";var aM=()=>null;function Ip(t,e,n=!1){return aM(t,e,n)}var nD=!1,cM=new j("",{providedIn:"root",factory:()=>nD});var nu;function uM(){if(nu===void 0&&(nu=null,nf.trustedTypes))try{nu=nf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return nu}function ww(t){return uM()?.createScriptURL(t)||t}var bu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lw})`}};function Ho(t){return t instanceof bu?t.changingThisBreaksApplicationSecurity:t}function wp(t,e){let n=lM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Lw})`)}return n===e}function lM(t){return t instanceof bu&&t.getTypeName()||null}var dM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rD(t){return t=String(t),t.match(dM)?t:"unsafe:"+t}var zu=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(zu||{});function hM(t){let e=sD();return e?e.sanitize(zu.URL,t)||"":wp(t,"URL")?Ho(t):rD(Lu(t))}function fM(t){let e=sD();if(e)return ww(e.sanitize(zu.RESOURCE_URL,t)||"");if(wp(t,"ResourceURL"))return ww(Ho(t));throw new H(904,!1)}function pM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?fM:hM}function iD(t,e,n){return pM(e,n)(t)}function sD(){let t=me();return t&&t[Xt].sanitizer}function oD(t){return t instanceof Function?t():t}function gM(t){return(t??O($e)).get(nn)==="browser"}var bn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(bn||{}),mM;function Ep(t,e){return mM(t,e)}function $i(t,e,n,r,i){if(r!=null){let s,o=!1;Sn(r)?s=r:rr(r)&&(o=!0,r=r[Cn]);let a=en(r);t===0&&n!==null?i==null?lD(e,n,a):Cu(e,n,a,i||null,!0):t===1&&n!==null?Cu(e,n,a,i||null,!0):t===2?MM(e,a,o):t===3&&e.destroyNode(a),s!=null&&PM(e,t,s,n,i)}}function yM(t,e){return t.createText(e)}function vM(t,e,n){t.setValue(e,n)}function aD(t,e,n){return t.createElement(e,n)}function _M(t,e){cD(t,e),e[Cn]=null,e[$t]=null}function IM(t,e,n,r,i,s){r[Cn]=i,r[$t]=e,Gu(t,r,n,1,i,s)}function cD(t,e){e[Xt].changeDetectionScheduler?.notify(9),Gu(t,e,e[je],2,null,null)}function wM(t){let e=t[No];if(!e)return Qh(t[ee],t);for(;e;){let n=null;if(rr(e))n=e[No];else{let r=e[ct];r&&(n=r)}if(!n){for(;e&&!e[jt]&&e!==t;)rr(e)&&Qh(e[ee],e),e=e[ut];e===null&&(e=t),rr(e)&&Qh(e[ee],e),n=e&&e[jt]}e=n}}function EM(t,e,n,r){let i=ct+r,s=n.length;r>0&&(n[i-1][jt]=e),r<s-ct?(e[jt]=n[i],Kw(n,ct+r,e)):(n.push(e),e[jt]=null),e[ut]=n;let o=e[Yi];o!==null&&n!==o&&uD(o,e);let a=e[Zi];a!==null&&a.insertView(t),ff(e),e[Q]|=128}function uD(t,e){let n=t[yu],r=e[ut];if(rr(r))t[Q]|=vu.HasTransplantedViews;else{let i=r[ut][Bt];e[Bt]!==i&&(t[Q]|=vu.HasTransplantedViews)}n===null?t[yu]=[e]:n.push(e)}function Dp(t,e){let n=t[yu],r=n.indexOf(e);n.splice(r,1)}function Mo(t,e){if(t.length<=ct)return;let n=ct+e,r=t[n];if(r){let i=r[Yi];i!==null&&i!==t&&Dp(i,r),e>0&&(t[n-1][jt]=r[jt]);let s=fu(t,ct+e);_M(r[ee],r);let o=s[Zi];o!==null&&o.detachView(s[ee]),r[ut]=null,r[jt]=null,r[Q]&=-129}return r}function qu(t,e){if(!(e[Q]&256)){let n=e[je];n.destroyNode&&Gu(t,e,n,3,null,null),wM(e)}}function Qh(t,e){if(e[Q]&256)return;let n=oe(null);try{e[Q]&=-129,e[Q]|=256,e[Mt]&&Ch(e[Mt]),TM(t,e),DM(t,e),e[ee].type===1&&e[je].destroy();let r=e[Yi];if(r!==null&&Sn(e[ut])){r!==e[ut]&&Dp(r,e);let i=e[Zi];i!==null&&i.detachView(t)}Df(e)}finally{oe(n)}}function DM(t,e){let n=t.cleanup,r=e[gu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[gu]=null);let i=e[nr];if(i!==null){e[nr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function TM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof qr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Yt(4,a,u);try{u.call(a)}finally{Yt(5,a,u)}}else{Yt(4,i,s);try{s.call(i)}finally{Yt(5,i,s)}}}}}function bM(t,e,n){return CM(t,e.parent,n)}function CM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Cn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jt.None||s===Jt.Emulated)return null}return Pt(r,n)}}function Cu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function lD(t,e,n){t.appendChild(e,n)}function Ew(t,e,n,r,i){r!==null?Cu(t,e,n,r,i):lD(t,e,n)}function dD(t,e){return t.parentNode(e)}function SM(t,e){return t.nextSibling(e)}function AM(t,e,n){return NM(t,e,n)}function RM(t,e,n){return t.type&40?Pt(t,n):null}var NM=RM,Dw;function Tp(t,e,n,r){let i=bM(t,r,e),s=e[je],o=r.parent||e[$t],a=AM(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Ew(s,i,n[u],a,!1);else Ew(s,i,n,a,!1);Dw!==void 0&&Dw(s,r,e,n,i)}function To(t,e){if(e!==null){let n=e.type;if(n&3)return Pt(e,t);if(n&4)return bf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return To(t,r);{let i=t[e.index];return Sn(i)?bf(-1,i):en(i)}}else{if(n&128)return To(t,e.next);if(n&32)return Ep(e,t)()||en(t[e.index]);{let r=hD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Hr(t[Bt]);return To(i,r)}else return To(t,e.next)}}}return null}function hD(t,e){if(e!==null){let r=t[Bt][$t],i=e.projection;return r.projection[i]}return null}function bf(t,e){let n=ct+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return To(r,i)}return e[$r]}function MM(t,e,n){t.removeChild(null,e,n)}function bp(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Gr(en(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)bp(t,e,n.child,r,i,s,!1),$i(e,t,i,a,s);else if(u&32){let l=Ep(n,r),h;for(;h=l();)$i(e,t,i,h,s);$i(e,t,i,a,s)}else u&16?xM(t,e,r,n,i,s):$i(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Gu(t,e,n,r,i,s){bp(n,r,t.firstChild,e,i,s,!1)}function xM(t,e,n,r,i,s){let o=n[Bt],u=o[$t].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];$i(e,t,i,h,s)}else{let l=u,h=o[ut];YE(r)&&(l.flags|=128),bp(t,e,l,h,i,s,!0)}}function PM(t,e,n,r,i){let s=n[$r],o=en(n);s!==o&&$i(e,t,r,s,i);for(let a=ct;a<n.length;a++){let u=n[a];Gu(u[ee],u,t,e,r,s)}}function OM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:bn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=bn.Important),t.setStyle(n,r,i,s))}}function kM(t,e,n){t.setAttribute(e,"style",n)}function fD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pD(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&af(t,e,r),i!==null&&fD(t,e,i),s!==null&&kM(t,e,s)}var lr={};function MG(t=1){gD(lt(),me(),Kr()+t,!1)}function gD(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&au(e,s,n)}else{let s=t.preOrderHooks;s!==null&&cu(e,s,0,n)}zr(n)}function Ot(t,e=re.Default){let n=me();if(n===null)return W(t,e);let r=mt();return HE(r,n,ot(t),e)}function mD(){let t="invalid";throw new Error(t)}function yD(t,e,n,r,i,s){let o=oe(null);try{let a=null;i&ir.SignalBased&&(a=e[r][wn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ir.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):mE(e,a,r,s)}finally{oe(o)}}function LM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zr(~i);else{let s=i,o=n[++r],a=n[++r];EN(o,s);let u=e[s];a(2,u)}}}finally{zr(-1)}}function Wu(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Cn]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),wE(p),p[ut]=p[os]=t,p[et]=n,p[Xt]=o||t&&t[Xt],p[je]=a||t&&t[je],p[Qi]=u||t&&t[Qi]||null,p[$t]=s,p[ju]=tM(),p[Ro]=h,p[fE]=l,p[Bt]=e.type==2?t[Bt]:p,p}function Ku(t,e,n,r,i){let s=t.data[e];if(s===null)s=FM(t,e,n,r,i),wN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=mN();s.injectorIndex=o===null?-1:o.injectorIndex}return Bo(s,!0),s}function FM(t,e,n,r,i){let s=CE(),o=SE(),a=o?s:s&&s.parent,u=t.data[e]=$M(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function vD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function _D(t,e,n,r,i){let s=Kr(),o=r&2;try{zr(-1),o&&e.length>bt&&gD(t,e,bt,!1),Yt(o?2:0,i),n(r,i)}finally{zr(s),Yt(o?3:1,i)}}function ID(t,e,n){if(gE(e)){let r=oe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{oe(r)}}}function wD(t,e,n){bE()&&(KM(t,e,n,Pt(n,e)),(n.flags&64)===64&&SD(t,e,n))}function ED(t,e,n=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function DD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cp(t,e,n,r,i,s,o,a,u,l,h){let p=bt+r,m=p+i,v=VM(p,m),C=typeof l=="function"?l():l;return v[ee]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function VM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:lr);return n}function UM(t,e,n,r){let s=r.get(cM,nD)||n===Jt.ShadowDom,o=t.selectRootElement(e,s);return jM(o),o}function jM(t){BM(t)}var BM=()=>null;function $M(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return fN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Tw(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=ir.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?bw(r,n,l,a,u):bw(r,n,l,a)}return r}function bw(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function HM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,C=m?m.outputs:null;u=Tw(0,p.inputs,h,u,v),l=Tw(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!Jf(e)?sx(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function zM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function TD(t,e,n,r,i,s,o,a){let u=Pt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Sp(t,n,h,r,i),Bu(e)&&qM(n,e.index)):e.type&3?(r=zM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function qM(t,e){let n=ur(e,t);n[Q]&16||(n[Q]|=64)}function bD(t,e,n,r){if(bE()){let i=r===null?null:{"":-1},s=YM(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&CD(t,e,n,o,i,a),i&&ZM(n,r,i)}n.mergedAttrs=So(n.mergedAttrs,n.attrs)}function CD(t,e,n,r,i,s){for(let l=0;l<r.length;l++)yf(Eu(n,e),t,r[l].type);XM(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=vD(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=So(n.mergedAttrs,h.hostAttrs),ex(t,n,e,u,h),JM(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}HM(t,n,s)}function GM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;WM(o)!=a&&o.push(a),o.push(n,r,s)}}function WM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function KM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Bu(n)&&tx(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Eu(n,e),Gr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Xi(e,t,a,n);if(Gr(l,e),o!==null&&ix(e,a-i,l,u,n,o),or(u)){let h=ur(n.index,e);h[et]=Xi(e,t,a,n)}}}function SD(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=DN();try{zr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];pf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&QM(u,l)}}finally{zr(-1),pf(o)}}function QM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(PR(e,o.selectors,!1))if(r||(r=[]),or(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Cf(t,e,u)}else r.unshift(o),Cf(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Cf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ZM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function JM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;or(e)&&(n[""]=t)}}function XM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ex(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Br(i.type,!0)),o=new qr(s,or(i),Ot);t.blueprint[r]=o,n[r]=o,GM(t,e,r,vD(t,n,i.hostVars,lr),i)}function tx(t,e,n){let r=Pt(e,t),i=DD(n),s=t[Xt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Qu(t,Wu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function nx(t,e,n,r,i,s){let o=Pt(t,e);rx(e[je],o,s,t.value,n,r,i)}function rx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Lu(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function ix(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];yD(r,n,u,l,h,p)}}function sx(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function AD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function RD(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];RE(s),a.contentQueries(2,e[o],o)}}}finally{oe(r)}}}function Qu(t,e){return t[No]?t[lw][jt]=e:t[No]=e,t[lw]=e,e}function Sf(t,e,n){RE(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function ox(t){return t[gu]??=[]}function ax(t){return t.cleanup??=[]}function ND(t,e){let n=t[Qi],r=n?n.get(Tn,null):null;r&&r.handleError(e)}function Sp(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];yD(h,l,r,a,u,i)}}function cx(t,e,n){let r=IE(e,t);vM(t[je],r,n)}function ux(t,e){let n=ur(e,t),r=n[ee];lx(r,n);let i=n[Cn];i!==null&&n[Ro]===null&&(n[Ro]=Ip(i,n[Qi])),Ap(r,n,n[et])}function lx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ap(t,e,n){ip(e);try{let r=t.viewQuery;r!==null&&Sf(1,r,n);let i=t.template;i!==null&&_D(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Zi]?.finishViewCreation(t),t.staticContentQueries&&RD(t,e),t.staticViewQueries&&Sf(2,t.viewQuery,n);let s=t.components;s!==null&&dx(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,sp()}}function dx(t,e){for(let n=0;n<e.length;n++)ux(t,e[n])}function Rp(t,e,n,r){let i=oe(null);try{let s=e.tView,a=t[Q]&4096?4096:16,u=Wu(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Yi]=l;let h=t[Zi];return h!==null&&(u[Zi]=h.createEmbeddedView(s)),Ap(s,u,n),u}finally{oe(i)}}function MD(t,e){let n=ct+e;if(n<t.length)return t[n]}function xo(t,e){return!e||e.firstChild===null||YE(t)}function Yu(t,e,n,r=!0){let i=e[ee];if(EM(i,e,t,n),r){let o=bf(n,t),a=e[je],u=dD(a,t[$r]);u!==null&&IM(i,t[$t],a,e,u,o)}let s=e[Ro];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function xD(t,e){let n=Mo(t,e);return n!==void 0&&qu(n[ee],n),n}function Su(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(en(s)),Sn(s)&&hx(s,r);let o=n.type;if(o&8)Su(t,e,n.child,r);else if(o&32){let a=Ep(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=hD(e,n);if(Array.isArray(a))r.push(...a);else{let u=Hr(e[Bt]);Su(u[ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function hx(t,e){for(let n=ct;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Su(r[ee],r,i,e)}t[$r]!==t[Cn]&&e.push(t[$r])}var PD=[];function fx(t){return t[Mt]??px(t)}function px(t){let e=PD.pop()??Object.create(mx);return e.lView=t,e}function gx(t){t.lView[Mt]!==t&&(t.lView=null,PD.push(t))}var mx=we(F({},vo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Hu(t.lView)},consumerOnSignalRead(){this.lView[Mt]=this}});function yx(t){let e=t[Mt]??Object.create(vx);return e.lView=t,e}var vx=we(F({},vo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Hr(t.lView);for(;e&&!OD(e[ee]);)e=Hr(e);e&&EE(e)},consumerOnSignalRead(){this.lView[Mt]=this}});function OD(t){return t.type!==2}var _x=100;function kD(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ix(t,n)}catch(o){throw e&&ND(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ix(t,e){let n=AE();try{hw(!0),Af(t,e);let r=0;for(;$u(t);){if(r===_x)throw new H(103,!1);r++,Af(t,1)}}finally{hw(n)}}function wx(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Xt].inlineEffectRunner?.flush(),ip(e);let a=!0,u=null,l=null;s||(OD(t)?(l=fx(e),u=Tc(l)):mI()===null?(a=!1,l=yx(e),u=Tc(l)):e[Mt]&&(Ch(e[Mt]),e[Mt]=null));try{wE(e),_N(t.bindingStartIndex),n!==null&&_D(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let v=t.preOrderCheckHooks;v!==null&&au(e,v,null)}else{let v=t.preOrderHooks;v!==null&&cu(e,v,0,null),qh(e,0)}if(o||Ex(e),LD(e,0),t.contentQueries!==null&&RD(t,e),!s)if(h){let v=t.contentCheckHooks;v!==null&&au(e,v)}else{let v=t.contentHooks;v!==null&&cu(e,v,1),qh(e,1)}LM(t,e);let p=t.components;p!==null&&VD(e,p,0);let m=t.viewQuery;if(m!==null&&Sf(2,m,r),!s)if(h){let v=t.viewCheckHooks;v!==null&&au(e,v)}else{let v=t.viewHooks;v!==null&&cu(e,v,2),qh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[zh]){for(let v of e[zh])v();e[zh]=null}s||(e[Q]&=-73)}catch(h){throw s||Hu(e),h}finally{l!==null&&(Th(l,u),a&&gx(l)),sp()}}function LD(t,e){for(let n=JE(t);n!==null;n=XE(n))for(let r=ct;r<n.length;r++){let i=n[r];FD(i,e)}}function Ex(t){for(let e=JE(t);e!==null;e=XE(e)){if(!(e[Q]&vu.HasTransplantedViews))continue;let n=e[yu];for(let r=0;r<n.length;r++){let i=n[r];EE(i)}}}function Dx(t,e,n){let r=ur(e,t);FD(r,n)}function FD(t,e){rp(t)&&Af(t,e)}function Af(t,e){let r=t[ee],i=t[Q],s=t[Mt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&bh(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)wx(r,t,r.template,t[et]);else if(i&8192){LD(t,1);let a=r.components;a!==null&&VD(t,a,1)}}function VD(t,e,n){for(let r=0;r<e.length;r++)Dx(t,e[r],n)}function Np(t,e){let n=AE()?64:1088;for(t[Xt].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=Hr(t);if(df(t)&&!r)return t;t=r}return null}var es=class{get rootNodes(){let e=this._lView,n=e[ee];return Su(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[et]}set context(e){this._lView[et]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Sn(e)){let n=e[mu],r=n?n.indexOf(this):-1;r>-1&&(Mo(e,r),fu(n,r))}this._attachedToViewContainer=!1}qu(this._lView[ee],this._lView)}onDestroy(e){DE(this._lView,e)}markForCheck(){Np(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){ff(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,kD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=df(this._lView),n=this._lView[Yi];n!==null&&!e&&Dp(n,this._lView),cD(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=df(this._lView),r=this._lView[Yi];r!==null&&!n&&uD(r,this._lView),ff(this._lView)}};var xG=new RegExp(`^(\\d+)*(${oM}|${sM})*(.*)`);var Tx=()=>null;function Po(t,e){return Tx(t,e)}var ts=class{},Mp=new j("",{providedIn:"root",factory:()=>!1});var UD=new j(""),jD=new j(""),Rf=class{},Au=class{};function bx(t){let e=Error(`No component factory found for ${gt(t)}.`);return e[Cx]=t,e}var Cx="ngComponent";var Nf=class{resolveComponentFactory(e){throw bx(e)}},ns=class{static{this.NULL=new Nf}},rs=class{},Zu=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Sx()}}return t})();function Sx(){let t=me(),e=mt(),n=ur(e.index,t);return(rr(n)?n:t)[je]}var Ax=(()=>{class t{static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>null})}}return t})();function Mf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ew(i,a);else if(s==2){let u=a,l=e[++o];r=ew(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ru=class extends ns{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=sr(e);return new is(n,this.ngModule)}};function Cw(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:ir.None;e?n.push({propName:o,templateName:r,isSignal:(a&ir.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Rx(t){let e=t.toLowerCase();return e==="svg"?iN:e==="math"?sN:null}var is=class extends Au{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Cw(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Cw(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=FR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=oe(null);try{i=i||this.ngModule;let o=i instanceof Tt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new gf(e,o):e,u=a.get(rs,null);if(u===null)throw new H(407,!1);let l=a.get(Ax,null),h=a.get(ts,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=r?UM(m,r,this.componentDef.encapsulation,a):aD(m,v,Rx(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=Ip(C,a,!0));let k=Cp(0,null,null,1,0,null,null,null,null,null,null),U=Wu(null,k,null,N,null,null,p,m,a,null,R);ip(U);let z,se,Se=null;try{let Z=this.componentDef,D,y=null;Z.findHostDirectiveDefs?(D=[],y=new Map,Z.findHostDirectiveDefs(Z,D,y),D.push(Z)):D=[Z];let _=Nx(U,C);Se=Mx(_,C,Z,D,U,p,m),se=np(k,bt),C&&Ox(m,Z,C,r),n!==void 0&&kx(se,this.ngContentSelectors,n),z=Px(Se,Z,D,y,U,[Lx]),Ap(k,U,null)}catch(Z){throw Se!==null&&Df(Se),Df(U),Z}finally{sp()}return new xf(this.componentType,z,mp(se,U),U,se)}finally{oe(s)}}},xf=class extends Rf{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new es(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Sp(s[ee],s,i,e,n),this.previousInputValues.set(e,n);let o=ur(this._tNode.index,s);Np(o,1)}}get injector(){return new jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Nx(t,e){let n=t[ee],r=bt;return t[r]=e,Ku(n,r,2,"#host",null)}function Mx(t,e,n,r,i,s,o){let a=i[ee];xx(r,t,e,o);let u=null;e!==null&&(u=Ip(e,i[Qi]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Wu(i,DD(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Cf(a,t,r.length-1),Qu(i,p),i[t.index]=p}function xx(t,e,n,r){for(let i of t)e.mergedAttrs=So(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Mf(e,e.mergedAttrs,!0),n!==null&&pD(r,n,e))}function Px(t,e,n,r,i,s){let o=mt(),a=i[ee],u=Pt(o,i);CD(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Xi(i,a,p,o);Gr(m,i)}SD(a,i,o),u&&Gr(u,i);let l=Xi(i,a,o.directiveStart+o.componentOffset,o);if(t[et]=i[et]=l,s!==null)for(let h of s)h(l,e);return ID(a,o,i),l}function Ox(t,e,n,r){if(r)af(t,n,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=VR(e.selectors[0]);i&&af(t,n,i),s&&s.length>0&&fD(t,n,s.join(" "))}}function kx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Lx(){let t=mt();up(me()[ee],t)}var Ju=(()=>{class t{static{this.__NG_ELEMENT_ID__=Fx}}return t})();function Fx(){let t=mt();return Ux(t,me())}var Vx=Ju,BD=class extends Vx{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return mp(this._hostTNode,this._hostLView)}get injector(){return new jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=lp(this._hostTNode,this._hostLView);if(FE(e)){let n=Iu(e,this._hostLView),r=_u(e),i=n[ee].data[r+8];return new jr(i,n)}else return new jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Sw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Po(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,xo(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!eN(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new is(sr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(Tt,null);N&&(s=N)}let h=sr(u.componentType??{}),p=Po(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,xo(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(aN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ut],l=new BD(u,u[$t],u[ut]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Yu(o,i,s,r),e.attachToViewContainerRef(),Kw(Yh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Sw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Mo(this._lContainer,n);r&&(fu(Yh(this._lContainer),n),qu(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=Mo(this._lContainer,n);return r&&fu(Yh(this._lContainer),n)!=null?new es(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Sw(t){return t[mu]}function Yh(t){return t[mu]||(t[mu]=[])}function Ux(t,e){let n,r=e[t.index];return Sn(r)?n=r:(n=AD(r,e,null,t),e[t.index]=n,Qu(e,n)),Bx(n,e,t,r),new BD(n,t,e)}function jx(t,e){let n=t[je],r=n.createComment(""),i=Pt(e,t),s=dD(n,i);return Cu(n,s,r,SM(n,i),!1),r}var Bx=zx,$x=()=>!1;function Hx(t,e,n){return $x(t,e,n)}function zx(t,e,n,r){if(t[$r])return;let i;n.type&8?i=en(r):i=jx(e,n),t[$r]=i}var Aw=new Set;function dr(t){Aw.has(t)||(Aw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function qx(t){return typeof t=="function"&&t[wn]!==void 0}function OG(t,e){dr("NgSignals");let n=SI(t),r=n[wn];return e?.equal&&(r.equal=e.equal),n.set=i=>Sh(r,i),n.update=i=>AI(r,i),n.asReadonly=Gx.bind(n),n}function Gx(){let t=this[wn];if(t.readonlyFn===void 0){let e=()=>this();e[wn]=t,t.readonlyFn=e}return t.readonlyFn}function $D(t){return qx(t)&&typeof t.set=="function"}function Wx(t){return Object.getPrototypeOf(t.prototype).constructor}function Kx(t){let e=Wx(t.type),n=!0,r=[t];for(;e;){let i;if(or(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=ru(t.inputs),o.inputTransforms=ru(t.inputTransforms),o.declaredInputs=ru(t.declaredInputs),o.outputs=ru(t.outputs);let a=i.hostBindings;a&&Xx(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Zx(t,u),l&&Jx(t,l),Qx(t,i),sR(t.outputs,i.outputs),or(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Kx&&(n=!1)}}e=Object.getPrototypeOf(e)}Yx(r)}function Qx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Yx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=So(i.hostAttrs,n=So(n,i.hostAttrs))}}function ru(t){return t===Gi?{}:t===Nt?[]:t}function Zx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Jx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Xx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function xp(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var ar=class{},Oo=class{};var Pf=class extends ar{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ru(this);let s=sE(e);this._bootstrapComponents=oD(s.bootstrap),this._r3Injector=GE(e,n,[{provide:ar,useValue:this},{provide:ns,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Of=class extends Oo{constructor(e){super(),this.moduleType=e}create(e){return new Pf(this.moduleType,e,[])}};var Nu=class extends ar{constructor(e){super(),this.componentFactoryResolver=new Ru(this),this.instance=null;let n=new Ao([...e.providers,{provide:ar,useValue:this},{provide:ns,useValue:this.componentFactoryResolver}],e.parent||ep(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xu(t,e,n=null){return new Nu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function eP(t,e,n){return t[e]=n}function hr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function tP(t){return(t.flags&32)===32}function nP(t,e,n,r,i,s,o,a,u){let l=e.consts,h=Ku(e,t,4,o||null,a||null);bD(e,n,h,Ji(l,u)),up(e,h);let p=h.tView=Cp(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kf(t,e,n,r,i,s,o,a,u,l){let h=n+bt,p=e.firstCreatePass?nP(h,e,t,r,i,s,o,a,u):e.data[h];Bo(p,!1);let m=iP(e,t,p,n);ap()&&Tp(e,t,m,p),Gr(m,t);let v=AD(m,t,m,p);return t[h]=v,Qu(t,v),Hx(v,p,t),tp(p)&&wD(e,t,p),u!=null&&ED(t,p,l),p}function rP(t,e,n,r,i,s,o,a){let u=me(),l=lt(),h=Ji(l.consts,s);return kf(u,l,t,e,n,r,i,h,o,a),rP}var iP=sP;function sP(t,e,n,r){return cp(!0),e[je].createComment("")}var Hi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Hi||{}),HD=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}}return t})(),Lf=class t{constructor(){this.ngZone=O(pe),this.scheduler=O(ts),this.errorHandler=O(Tn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Hi.EarlyRead,Hi.Write,Hi.MixedReadWrite,Hi.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}},Ff=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Pp(t,e){!e?.injector&&XR(Pp);let n=e?.injector??O($e);return gM(n)?(dr("NgAfterNextRender"),aP(t,n,e,!0)):cP}function oP(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function aP(t,e,n,r){let i=e.get(HD);i.impl??=e.get(Lf);let s=n?.phase??Hi.MixedReadWrite,o=new Ff(i.impl,oP(t,s),r,e.get(fp));return i.impl.register(o),o}var cP={destroy(){}};function Op(t,e,n,r){let i=me(),s=as();if(hr(i,s,e)){let o=lt(),a=op();nx(a,i,t,e,n,r)}return Op}function uP(t,e,n,r){return hr(t,as(),n)?e+Lu(n)+r:lr}function iu(t,e){return t<<17|e<<2}function Wr(t){return t>>17&32767}function lP(t){return(t&2)==2}function dP(t,e){return t&131071|e<<17}function Vf(t){return t|2}function ss(t){return(t&131068)>>2}function Zh(t,e){return t&-131069|e<<2}function hP(t){return(t&1)===1}function Uf(t){return t|1}function fP(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Wr(o),u=ss(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Vo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Wr(t[a+1]);t[r+1]=iu(m,a),m!==0&&(t[m+1]=Zh(t[m+1],r)),t[a+1]=dP(t[a+1],r)}else t[r+1]=iu(a,0),a!==0&&(t[a+1]=Zh(t[a+1],r)),a=r;else t[r+1]=iu(u,0),a===0?a=r:t[u+1]=Zh(t[u+1],r),u=r;l&&(t[r+1]=Vf(t[r+1])),Rw(t,h,r,!0),Rw(t,h,r,!1),pP(e,h,t,r,s),o=iu(a,u),s?e.classBindings=o:e.styleBindings=o}function pP(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Vo(s,e)>=0&&(n[r+1]=Uf(n[r+1]))}function Rw(t,e,n,r){let i=t[n+1],s=e===null,o=r?Wr(i):ss(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];gP(u,e)&&(a=!0,t[o+1]=r?Uf(l):Vf(l)),o=r?Wr(l):ss(l)}a&&(t[n+1]=r?Vf(i):Uf(i))}function gP(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Vo(t,e)>=0:!1}function mP(t,e,n){let r=me(),i=as();if(hr(r,i,e)){let s=lt(),o=op();TD(s,o,r,t,e,r[je],n,!1)}return mP}function Nw(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Sp(t,n,s[o],o,r)}function yP(t,e){return vP(t,e,null,!0),yP}function vP(t,e,n,r){let i=me(),s=lt(),o=IN(2);if(s.firstUpdatePass&&IP(s,t,o,r),e!==lr&&hr(i,o,e)){let a=s.data[Kr()];bP(s,a,i,i[je],t,i[o+1]=CP(e,n),r,o)}}function _P(t,e){return e>=t.expandoStartIndex}function IP(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Kr()],o=_P(t,n);SP(s,r)&&e===null&&!o&&(e=!1),e=wP(i,s,e,r),fP(i,s,e,n,o,r)}}function wP(t,e,n,r){let i=TN(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Jh(null,t,e,n,r),n=ko(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Jh(i,t,e,n,r),s===null){let u=EP(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Jh(null,t,e,u[1],r),u=ko(u,e.attrs,r),DP(t,e,r,u))}else s=TP(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function EP(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ss(r)!==0)return t[Wr(r)]}function DP(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Wr(i)]=r}function TP(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ko(r,o,n)}return ko(r,e.attrs,n)}function Jh(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ko(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ko(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),bR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function bP(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=hP(l)?Mw(u,e,n,i,ss(l),o):void 0;if(!Mu(h)){Mu(s)||lP(l)&&(s=Mw(u,null,n,i,a,o));let p=IE(Kr(),n);OM(r,o,p,i,s)}}function Mw(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===lr&&(m=p?Nt:void 0);let v=p?$h(m,r):h===r?m:void 0;if(l&&!Mu(v)&&(v=$h(u,r)),Mu(v)&&(a=v,o))return a;let C=t[i+1];i=o?Wr(C):ss(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=$h(u,r))}return a}function Mu(t){return t!==void 0}function CP(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=gt(Ho(t)))),t}function SP(t,e){return(t.flags&(e?8:16))!==0}var jf=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,n){this.attach(n,this.detach(e))}};function Xh(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function AP(t,e,n){let r,i,s=0,o=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){let l=t.at(s),h=e[s],p=Xh(s,l,s,h,n);if(p!==0){p<0&&t.updateValue(s,h),s++;continue}let m=t.at(o),v=e[u],C=Xh(o,m,u,v,n);if(C!==0){C<0&&t.updateValue(o,v),o--,u--;continue}let N=n(s,l),R=n(o,m),k=n(s,h);if(Object.is(k,R)){let U=n(u,v);Object.is(U,N)?(t.swap(s,o),t.updateValue(o,v),u--,o--):t.move(o,s),t.updateValue(s,h),s++;continue}if(r??=new xu,i??=Pw(t,s,o,n),Bf(t,r,s,k))t.updateValue(s,h),s++,o++;else if(i.has(k))r.set(N,t.detach(s)),o--;else{let U=t.create(s,e[s]);t.attach(s,U),s++,o++}}for(;s<=u;)xw(t,r,n,s,e[s]),s++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&s<=o;){let h=t.at(s),p=l.value,m=Xh(s,h,s,p,n);if(m!==0)m<0&&t.updateValue(s,p),s++,l=u.next();else{r??=new xu,i??=Pw(t,s,o,n);let v=n(s,p);if(Bf(t,r,s,v))t.updateValue(s,p),s++,o++,l=u.next();else if(!i.has(v))t.attach(s,t.create(s,p)),s++,o++,l=u.next();else{let C=n(s,h);r.set(C,t.detach(s)),o--}}}for(;!l.done;)xw(t,r,n,t.length,l.value),l=u.next()}for(;s<=o;)t.destroy(t.detach(o--));r?.forEach(u=>{t.destroy(u)})}function Bf(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function xw(t,e,n,r,i){if(Bf(t,e,r,n(r,i)))t.updateValue(r,i);else{let s=t.create(r,i);t.attach(r,s)}}function Pw(t,e,n,r){let i=new Set;for(let s=e;s<=n;s++)i.add(r(s,t.at(s)));return i}var xu=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function kG(t,e){dr("NgControlFlow");let n=me(),r=as(),i=n[r]!==lr?n[r]:-1,s=i!==-1?Pu(n,bt+i):void 0,o=0;if(hr(n,r,t)){let a=oe(null);try{if(s!==void 0&&xD(s,o),t!==-1){let u=bt+t,l=Pu(n,u),h=qf(n[ee],u),p=Po(l,h.tView.ssrId),m=Rp(n,h,e,{dehydratedView:p});Yu(l,m,o,xo(h,p))}}finally{oe(a)}}else if(s!==void 0){let a=MD(s,o);a!==void 0&&(a[et]=e)}}var $f=class{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ct}};function LG(t){return t}var Hf=class{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function FG(t,e,n,r,i,s,o,a,u,l,h,p,m){dr("NgControlFlow");let v=me(),C=lt(),N=u!==void 0,R=me(),k=a?o.bind(R[Bt][et]):o,U=new Hf(N,k);R[bt+t]=U,kf(v,C,t+1,e,n,r,i,Ji(C.consts,s)),N&&kf(v,C,t+2,u,l,h,p,Ji(C.consts,m))}var zf=class extends jf{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ct}at(e){return this.getLView(e)[et].$implicit}attach(e,n){let r=n[Ro];this.needsIndexUpdate||=e!==this.length,Yu(this.lContainer,n,e,xo(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,RP(this.lContainer,e)}create(e,n){let r=Po(this.lContainer,this.templateTNode.tView.ssrId),i=Rp(this.hostLView,this.templateTNode,new $f(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){qu(e[ee],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[et].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[et].$index=e}getLView(e){return NP(this.lContainer,e)}};function VG(t){let e=oe(null),n=Kr();try{let r=me(),i=r[ee],s=r[n],o=n+1,a=Pu(r,o);if(s.liveCollection===void 0){let l=qf(i,o);s.liveCollection=new zf(a,r,l)}else s.liveCollection.reset();let u=s.liveCollection;if(AP(u,t,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let l=as(),h=u.length===0;if(hr(r,l,h)){let p=n+2,m=Pu(r,p);if(h){let v=qf(i,p),C=Po(m,v.tView.ssrId),N=Rp(r,v,void 0,{dehydratedView:C});Yu(m,N,0,xo(v,C))}else xD(m,0)}}}finally{oe(e)}}function Pu(t,e){return t[e]}function RP(t,e){return Mo(t,e)}function NP(t,e){return MD(t,e)}function qf(t,e){return np(t,e)}function MP(t,e,n,r,i,s){let o=e.consts,a=Ji(o,i),u=Ku(e,t,2,r,a);return bD(e,n,u,Ji(o,s)),u.attrs!==null&&Mf(u,u.attrs,!1),u.mergedAttrs!==null&&Mf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function zD(t,e,n,r){let i=me(),s=lt(),o=bt+t,a=i[je],u=s.firstCreatePass?MP(o,s,i,e,n,r):s.data[o],l=xP(s,i,u,a,e,t);i[o]=l;let h=tp(u);return Bo(u,!0),pD(a,l,u),!tP(u)&&ap()&&Tp(s,i,l,u),lN()===0&&Gr(l,i),dN(),h&&(wD(s,i,u),ID(s,u,i)),r!==null&&ED(i,u),zD}function qD(){let t=mt();SE()?yN():(t=t.parent,Bo(t,!1));let e=t;pN(e)&&gN(),hN();let n=lt();return n.firstCreatePass&&(up(n,t),gE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&MN(e)&&Nw(n,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&xN(e)&&Nw(n,e,me(),e.stylesWithoutHost,!1),qD}function kp(t,e,n,r){return zD(t,e,n,r),qD(),kp}var xP=(t,e,n,r,i,s)=>(cp(!0),aD(r,i,SN()));function UG(){return me()}var Ou="en-US";var PP=Ou;function OP(t){typeof t=="string"&&(PP=t.toLowerCase().replace(/_/g,"-"))}var kP=(t,e,n)=>{};function Lp(t,e,n,r){let i=me(),s=lt(),o=mt();return GD(s,i,i[je],o,t,e,r),Lp}function LP(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[gu],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function GD(t,e,n,r,i,s,o){let a=tp(r),l=t.firstCreatePass&&ax(t),h=e[et],p=ox(e),m=!0;if(r.type&3||o){let N=Pt(r,e),R=o?o(N):N,k=p.length,U=o?se=>o(en(se[r.index])):r.index,z=null;if(!o&&a&&(z=LP(t,e,i,r.index)),z!==null){let se=z.__ngLastListenerFn__||z;se.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=kw(r,e,h,s),kP(N,i,s);let se=n.listen(R,i,s);p.push(s,se),l&&l.push(i,U,k,k+1)}}else s=kw(r,e,h,s);let v=r.outputs,C;if(m&&v!==null&&(C=v[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let k=C[R],U=C[R+1],Se=e[k][U].subscribe(s),Z=p.length;p.push(s,Se),l&&l.push(i,r.index,Z,-(Z+1))}}}function Ow(t,e,n,r){let i=oe(null);try{return Yt(6,e,n),n(r)!==!1}catch(s){return ND(t,s),!1}finally{Yt(7,e,n),oe(i)}}function kw(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?ur(t.index,e):e;Np(o,5);let a=Ow(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=Ow(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function jG(t=1){return CN(t)}function FP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function BG(t,e=""){let n=me(),r=lt(),i=t+bt,s=r.firstCreatePass?Ku(r,i,1,e,null):r.data[i],o=VP(r,n,s,e,t);n[i]=o,ap()&&Tp(r,n,o,s),Bo(s,!1)}var VP=(t,e,n,r,i)=>(cp(!0),yM(e[je],r));function UP(t){return WD("",t,""),UP}function WD(t,e,n){let r=me(),i=uP(r,t,e,n);return i!==lr&&cx(r,Kr(),i),WD}function jP(t,e,n){$D(e)&&(e=e());let r=me(),i=as();if(hr(r,i,e)){let s=lt(),o=op();TD(s,o,r,t,e,r[je],n,!1)}return jP}function $G(t,e){let n=$D(t);return n&&t.set(e),n}function BP(t,e){let n=me(),r=lt(),i=mt();return GD(r,n,n[je],i,t,e),BP}function $P(t,e,n){let r=lt();if(r.firstCreatePass){let i=or(t);Gf(n,r.data,r.blueprint,i,!0),Gf(e,r.data,r.blueprint,i,!1)}}function Gf(t,e,n,r,i){if(t=ot(t),Array.isArray(t))for(let s=0;s<t.length;s++)Gf(t[s],e,n,r,i);else{let s=lt(),o=me(),a=mt(),u=Ki(t)?t:ot(t.provide),l=dE(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ki(t)||!t.multi){let v=new qr(l,i,Ot),C=tf(u,e,i?h:h+m,p);C===-1?(yf(Eu(a,o),s,u),ef(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[C]=v,o[C]=v)}else{let v=tf(u,e,h+m,p),C=tf(u,e,h,h+m),N=v>=0&&n[v],R=C>=0&&n[C];if(i&&!R||!i&&!N){yf(Eu(a,o),s,u);let k=qP(i?zP:HP,n.length,i,r,l);!i&&R&&(n[C].providerFactory=k),ef(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),o.push(k)}else{let k=KD(n[i?C:v],l,!i&&r);ef(s,t,v>-1?v:C,k)}!i&&r&&R&&n[C].componentProviders++}}}function ef(t,e,n,r){let i=Ki(e),s=GR(e);if(i||s){let u=(s?ot(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function KD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function tf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function HP(t,e,n,r){return Wf(this.multi,[])}function zP(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Xi(n,n[ee],this.providerFactory.index,r);s=a.slice(0,o),Wf(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Wf(i,s);return s}function Wf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function qP(t,e,n,r,i){let s=new qr(t,n,Ot);return s.multi=[],s.index=e,s.componentProviders=0,KD(s,i,r&&!n),s}function HG(t,e=[]){return n=>{n.providersResolver=(r,i)=>$P(r,i?i(t):t,e)}}var GP=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=cE(!1,n.type),i=r.length>0?Xu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(W(Tt))})}}return t})();function QD(t){dr("NgStandalone"),t.getStandaloneInjector=e=>e.get(GP).getOrCreateStandaloneInjector(t)}function WP(t,e){let n=t[e];return n===lr?void 0:n}function KP(t,e,n,r,i,s){let o=e+n;return hr(t,o,i)?eP(t,o+1,s?r.call(s,i):r(i)):WP(t,o+1)}function zG(t,e){let n=lt(),r,i=t+bt;n.firstCreatePass?(r=QP(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Br(r.type,!0)),o,a=pt(Ot);try{let u=wu(!1),l=s();return wu(u),FP(n,me(),i,l),l}finally{pt(a)}}function QP(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function qG(t,e,n){let r=t+bt,i=me(),s=oN(i,r);return YP(i,r)?KP(i,vN(),e,s.transform,n,s):s.transform(n)}function YP(t,e){return t[ee].data[e].pure}var cr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},YD=new cr("18.2.5");var el=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var ZD=new j("");function us(t){return!!t&&typeof t.then=="function"}function Fp(t){return!!t&&typeof t.subscribe=="function"}var tl=new j(""),JD=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=O(tl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(us(s))n.push(s);else if(Fp(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),nl=new j("");function ZP(){CI(()=>{throw new H(600,!1)})}function JP(t){return t.isBoundToModule}var XP=10;function eO(t,e,n){try{let r=n();return us(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Qr=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=O(JN),this.afterRenderManager=O(HD),this.zonelessEnabled=O(Mp),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Xe,this.afterTick=new Xe,this.componentTypes=[],this.components=[],this.isStable=O(cs).hasPendingTasks.pipe(ne(n=>!n)),this._injector=O(Tt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Au;if(!this._injector.get(JD).done){let m=!i&&iE(n),v=!1;throw new H(405,v)}let o;i?o=n:o=this._injector.get(ns).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=JP(o)?void 0:this._injector.get(ar),u=r||o.selector,l=o.create($e.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(ZD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),uu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new H(101,!1);let n=oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,oe(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(rs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<XP;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)tO(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>$u(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;uu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(nl,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>uu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function uu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function tO(t,e,n,r){if(!n&&!$u(t))return;kD(t,e,n&&!r?0:1)}var Kf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},rl=(()=>{class t{compileModuleSync(n){return new Of(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=sE(n),s=oD(i.declarations).reduce((o,a)=>{let u=sr(a);return u&&o.push(new is(u)),o},[]);return new Kf(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nO=(()=>{class t{constructor(){this.zone=O(pe),this.changeDetectionScheduler=O(ts),this.applicationRef=O(Qr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),rO=new j("",{factory:()=>!1});function XD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new pe(we(F({},eT()),{scheduleInRootZone:n})),[{provide:pe,useFactory:t},{provide:Wi,multi:!0,useFactory:()=>{let r=O(nO,{optional:!0});return()=>r.initialize()}},{provide:Wi,multi:!0,useFactory:()=>{let r=O(iO);return()=>{r.initialize()}}},e===!0?{provide:UD,useValue:!0}:[],{provide:jD,useValue:n??WE}]}function GG(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=XD({ngZoneFactory:()=>{let i=eT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&dr("NgZone_CoalesceEvent"),new pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return xt([{provide:rO,useValue:!0},{provide:Mp,useValue:!1},r])}function eT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var iO=(()=>{class t{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=O(pe),this.pendingTasks=O(cs)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var sO=(()=>{class t{constructor(){this.appRef=O(Qr),this.taskService=O(cs),this.ngZone=O(pe),this.zonelessEnabled=O(Mp),this.disableScheduling=O(UD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Re,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Tu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(O(jD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ef||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?yw:KE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Tu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function oO(){return typeof $localize<"u"&&$localize.locale||Ou}var Vp=new j("",{providedIn:"root",factory:()=>O(Vp,re.Optional|re.SkipSelf)||oO()});var tT=new j("");function su(t){return!!t.platformInjector}function aO(t){let e=su(t)?t.r3Injector:t.moduleRef.injector,n=e.get(pe);return n.run(()=>{su(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Tn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),su(t)){let s=()=>e.destroy(),o=t.platformInjector.get(tT);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{uu(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return eO(r,n,()=>{let s=e.get(JD);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Vp,Ou);if(OP(o||Ou),su(t)){let a=e.get(Qr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return cO(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function cO(t,e){let n=t.injector.get(Qr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new H(-403,!1);e.push(t)}var lu=null;function uO(t=[],e){return $e.create({name:e,providers:[{provide:Uu,useValue:"platform"},{provide:tT,useValue:new Set([()=>lu=null])},...t]})}function lO(t=[]){if(lu)return lu;let e=uO(t);return lu=e,ZP(),dO(e),e}function dO(t){t.get(vp,null)?.forEach(n=>n())}var ls=(()=>{class t{static{this.__NG_ELEMENT_ID__=hO}}return t})();function hO(t){return fO(mt(),me(),(t&16)===16)}function fO(t,e,n){if(Bu(t)&&!n){let r=ur(t.index,e);return new es(r,r)}else if(t.type&175){let r=e[Bt];return new es(r,e)}return null}function nT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=lO(r),s=[XD({}),{provide:ts,useExisting:sO},...n||[]],o=new Nu({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return aO({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var rT=new j("");function zo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function WG(t,e){dr("NgSignals");let n=DI(t);return e?.equal&&(n[wn].equal=e.equal),n}function Up(t){let e=oe(null);try{return t()}finally{oe(e)}}function iT(t){let e=sr(t);if(!e)return null;let n=new is(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var aT=null;function ds(){return aT}function cT(t){aT??=t}var sl=class{};var dt=new j(""),zp=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>O(pO),providedIn:"platform"})}}return t})(),uT=new j(""),pO=(()=>{class t extends zp{constructor(){super(),this._doc=O(dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ds().getBaseHref(this._doc)}onPopState(n){let r=ds().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ds().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function qp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function sT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function An(t){return t&&t[0]!=="?"?"?"+t:t}var Rn=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>O(Gp),providedIn:"root"})}}return t})(),lT=new j(""),Gp=(()=>{class t extends Rn{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??O(dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return qp(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+An(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+An(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+An(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(zp),W(lT,8))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),dT=(()=>{class t extends Rn{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=qp(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+An(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+An(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(W(zp),W(lT,8))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),hs=(()=>{class t{constructor(n){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yO(sT(oT(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+An(r))}normalize(n){return t.stripTrailingSlash(mO(this._basePath,oT(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+An(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+An(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=An}static{this.joinWithSlash=qp}static{this.stripTrailingSlash=sT}static{this.\u0275fac=function(r){return new(r||t)(W(Rn))}}static{this.\u0275prov=$({token:t,factory:()=>gO(),providedIn:"root"})}}return t})();function gO(){return new hs(W(Rn))}function mO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function oT(t){return t.replace(/\/index.html$/,"")}function yO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function hT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function vO(t,e){return new H(2100,!1)}var jp=class{createSubscription(e,n){return Up(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){Up(()=>e.unsubscribe())}},Bp=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},_O=new Bp,IO=new jp,w9=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(us(n))return _O;if(Fp(n))return IO;throw vO(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)(Ot(ls,16))}}static{this.\u0275pipe=tE({name:"async",type:t,pure:!1,standalone:!0})}}return t})();var E9=new j("");var wO=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Uo({type:t})}static{this.\u0275inj=Fo({})}}return t})(),Wp="browser",EO="server";function DO(t){return t===Wp}function Kp(t){return t===EO}var fT=(()=>{class t{static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>DO(O(nn))?new $p(O(dt),window):new Hp})}}return t})(),$p=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=TO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function TO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Hp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ol=class{};var Zp=class extends sl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Jp=class t extends Zp{static makeCurrent(){cT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=CO();return n==null?null:SO(n)}resetBaseElement(){qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hT(document.cookie,e)}},qo=null;function CO(){return qo=qo||document.querySelector("base"),qo?qo.getAttribute("href"):null}function SO(t){return new URL(t,document.baseURI).pathname}var AO=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),al=new j(""),yT=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(W(al),W(pe))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),Go=class{constructor(e){this._doc=e}},Qp="ng-app-id",vT=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Kp(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Qp}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Qp),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Qp,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(W(dt),W(yp),W(_p,8),W(nn))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),Yp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},eg=/%COMP%/g,_T="%COMP%",RO=`_nghost-${_T}`,NO=`_ngcontent-${_T}`,MO=!0,xO=new j("",{providedIn:"root",factory:()=>MO});function PO(t){return NO.replace(eg,t)}function OO(t){return RO.replace(eg,t)}function IT(t,e){return e.map(n=>n.replace(eg,t))}var pT=(()=>{class t{constructor(n,r,i,s,o,a,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Kp(a),this.defaultRenderer=new Wo(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Jt.ShadowDom&&(r=we(F({},r),{encapsulation:Jt.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof cl?i.applyToHost(n):i instanceof Ko&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Jt.Emulated:s=new cl(u,l,r,this.appId,h,o,a,p);break;case Jt.ShadowDom:return new Xp(u,l,n,r,o,a,this.nonce,p);default:s=new Ko(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(W(yT),W(vT),W(yp),W(xO),W(dt),W(nn),W(pe),W(_p))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),Wo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Yp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(gT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(gT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Yp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Yp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(bn.DashCase|bn.Important)?e.style.setProperty(n,r,i&bn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&bn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ds().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function gT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Xp=class extends Wo{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=IT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ko=class extends Wo{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?IT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cl=class extends Ko{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=PO(l),this.hostAttr=OO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},kO=(()=>{class t extends Go{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(W(dt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),LO=(()=>{class t extends Go{constructor(n){super(n),this.delegate=O(rT,{optional:!0})}supports(n){return this.delegate?this.delegate.supports(n):!1}addEventListener(n,r,i){return this.delegate.addEventListener(n,r,i)}removeEventListener(n,r,i){return this.delegate.removeEventListener(n,r,i)}static{this.\u0275fac=function(r){return new(r||t)(W(dt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),mT=["alt","control","meta","shift"],FO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},UO=(()=>{class t extends Go{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ds().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),mT.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=FO[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),mT.forEach(o=>{if(o!==i){let a=VO[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(W(dt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})();function W9(t,e){return nT(F({rootComponent:t},jO(e)))}function jO(t){return{appProviders:[...qO,...t?.providers??[]],platformProviders:zO}}function BO(){Jp.makeCurrent()}function $O(){return new Tn}function HO(){return tD(document),document}var zO=[{provide:nn,useValue:Wp},{provide:vp,useValue:BO,multi:!0},{provide:dt,useFactory:HO,deps:[]}];var qO=[{provide:Uu,useValue:"root"},{provide:Tn,useFactory:$O,deps:[]},{provide:al,useClass:kO,multi:!0,deps:[dt,pe,nn]},{provide:al,useClass:UO,multi:!0,deps:[dt]},{provide:al,useClass:LO,multi:!0},pT,vT,yT,{provide:rs,useExisting:pT},{provide:ol,useClass:AO,deps:[]},[]];var wT=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(W(dt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var te="primary",ua=Symbol("RouteTitle"),sg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vs(t){return new sg(t)}function WO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function KO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rn(t[n],e[n]))return!1;return!0}function rn(t,e){let n=t?og(t):void 0,r=e?og(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!xT(t[i],e[i]))return!1;return!0}function og(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function xT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function PT(t){return t.length>0?t[t.length-1]:null}function gr(t){return Vh(t)?t:us(t)?Ne(Promise.resolve(t)):G(t)}var QO={exact:kT,subset:LT},OT={exact:YO,subset:ZO,ignored:()=>!0};function ET(t,e,n){return QO[n.paths](t.root,e.root,n.matrixParams)&&OT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function YO(t,e){return rn(t,e)}function kT(t,e,n){if(!Zr(t.segments,e.segments)||!dl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!kT(t.children[r],e.children[r],n))return!1;return!0}function ZO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>xT(t[n],e[n]))}function LT(t,e,n){return FT(t,e,e.segments,n)}function FT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Zr(i,n)||e.hasChildren()||!dl(i,n,r))}else if(t.segments.length===n.length){if(!Zr(t.segments,n)||!dl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!LT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Zr(t.segments,i)||!dl(t.segments,i,r)||!t.children[te]?!1:FT(t.children[te],e,s,r)}}function dl(t,e,n){return e.every((r,i)=>OT[n](t[i].parameters,r.parameters))}var Mn=class{constructor(e=new ye([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){return ek.serialize(this)}},ye=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hl(this)}},Yr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=vs(this.parameters),this._parameterMap}toString(){return UT(this)}};function JO(t,e){return Zr(t,e)&&t.every((n,r)=>rn(n.parameters,e[r].parameters))}function Zr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function XO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var la=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>new _s,providedIn:"root"})}}return t})(),_s=class{parse(e){let n=new cg(e);return new Mn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Qo(e.root,!0)}`,r=rk(e.queryParams),i=typeof e.fragment=="string"?`#${tk(e.fragment)}`:"";return`${n}${r}${i}`}},ek=new _s;function hl(t){return t.segments.map(e=>UT(e)).join("/")}function Qo(t,e){if(!t.hasChildren())return hl(t);if(e){let n=t.children[te]?Qo(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==te&&r.push(`${i}:${Qo(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=XO(t,(r,i)=>i===te?[Qo(t.children[te],!1)]:[`${i}:${Qo(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${hl(t)}/${n[0]}`:`${hl(t)}/(${n.join("//")})`}}function VT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ul(t){return VT(t).replace(/%3B/gi,";")}function tk(t){return encodeURI(t)}function ag(t){return VT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fl(t){return decodeURIComponent(t)}function DT(t){return fl(t.replace(/\+/g,"%20"))}function UT(t){return`${ag(t.path)}${nk(t.parameters)}`}function nk(t){return Object.entries(t).map(([e,n])=>`;${ag(e)}=${ag(n)}`).join("")}function rk(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ul(n)}=${ul(i)}`).join("&"):`${ul(n)}=${ul(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var ik=/^[^\/()?;#]+/;function tg(t){let e=t.match(ik);return e?e[0]:""}var sk=/^[^\/()?;=#]+/;function ok(t){let e=t.match(sk);return e?e[0]:""}var ak=/^[^=?&#]+/;function ck(t){let e=t.match(ak);return e?e[0]:""}var uk=/^[^&#]+/;function lk(t){let e=t.match(uk);return e?e[0]:""}var cg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ye(e,n)),r}parseSegment(){let e=tg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Yr(fl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ok(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=tg(this.remaining);i&&(r=i,this.capture(r))}e[fl(n)]=fl(r)}parseQueryParam(e){let n=ck(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=lk(this.remaining);o&&(r=o,this.capture(r))}let i=DT(n),s=DT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=te);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[te]:new ye([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function jT(t){return t.segments.length>0?new ye([],{[te]:t}):t}function BT(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=BT(i);if(r===te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ye(t.segments,e);return dk(n)}function dk(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ye(t.segments.concat(e.segments),e.children)}return t}function Jr(t){return t instanceof Mn}function hk(t,e,n=null,r=null){let i=$T(t);return HT(i,e,n,r)}function $T(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ye(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=jT(r);return e??i}function HT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ng(i,i,i,n,r);let s=fk(e);if(s.toRoot())return ng(i,i,new ye([],{}),n,r);let o=pk(s,i,t),a=o.processChildren?Jo(o.segmentGroup,o.index,s.commands):qT(o.segmentGroup,o.index,s.commands);return ng(i,o.segmentGroup,a,n,r)}function pl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ta(t){return typeof t=="object"&&t!=null&&t.outlets}function ng(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=zT(t,e,n);let a=jT(BT(o));return new Mn(a,s,i)}function zT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=zT(s,e,n)}),new ye(t.segments,r)}var gl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&pl(r[0]))throw new H(4003,!1);let i=r.find(ta);if(i&&i!==PT(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fk(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new gl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new gl(n,e,r)}var gs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function pk(t,e,n){if(t.isAbsolute)return new gs(e,!0,0);if(!n)return new gs(e,!1,NaN);if(n.parent===null)return new gs(n,!0,0);let r=pl(t.commands[0])?0:1,i=n.segments.length-1+r;return gk(n,i,t.numberOfDoubleDots)}function gk(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new gs(r,!1,i-s)}function mk(t){return ta(t[0])?t[0].outlets:{[te]:t}}function qT(t,e,n){if(t??=new ye([],{}),t.segments.length===0&&t.hasChildren())return Jo(t,e,n);let r=yk(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ye(t.segments.slice(0,r.pathIndex),{});return s.children[te]=new ye(t.segments.slice(r.pathIndex),t.children),Jo(s,0,i)}else return r.match&&i.length===0?new ye(t.segments,{}):r.match&&!t.hasChildren()?ug(t,e,n):r.match?Jo(t,0,i):ug(t,e,n)}function Jo(t,e,n){if(n.length===0)return new ye(t.segments,{});{let r=mk(n),i={};if(Object.keys(r).some(s=>s!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let s=Jo(t.children[te],e,n);return new ye(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=qT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ye(t.segments,i)}}function yk(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ta(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!bT(u,l,o))return s;r+=2}else{if(!bT(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ug(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ta(s)){let u=vk(s.outlets);return new ye(r,u)}if(i===0&&pl(n[0])){let u=t.segments[e];r.push(new Yr(u.path,TT(n[0]))),i++;continue}let o=ta(s)?s.outlets[te]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&pl(a)?(r.push(new Yr(o,TT(a))),i+=2):(r.push(new Yr(o,{})),i++)}return new ye(r,{})}function vk(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ug(new ye([],{}),0,r))}),e}function TT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function bT(t,e,n){return t==n.path&&rn(e,n.parameters)}var Xo="imperative",He=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(He||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},Is=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=He.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(St||{}),ml=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ml||{}),Nn=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationSkipped}},na=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yl=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dg=class extends kt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pg=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gg=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mg=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vg=class{constructor(e){this.snapshot=e,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_g=class{constructor(e){this.snapshot=e,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=He.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ra=class{},ws=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function _k(t,e){return t.providers&&!t._injector&&(t._injector=Xu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ht(t){return t.outlet||te}function Ik(t,e){let n=t.filter(r=>Ht(r)===e);return n.push(...t.filter(r=>Ht(r)!==e)),n}function da(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ig=class{get injector(){return da(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ha(this.rootInjector),this.attachRef=null}},ha=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ig(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(W(Tt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),_l=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Eg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Eg(e,this._root).map(n=>n.value)}};function wg(t,e){if(t===e.value)return e;for(let n of e.children){let r=wg(t,n);if(r)return r}return null}function Eg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Eg(t,n);if(r.length)return r.unshift(e),r}return[]}var Ct=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ps(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Il=class extends _l{constructor(e,n){super(e),this.snapshot=n,Mg(this,e)}toString(){return this.snapshot.toString()}};function GT(t){let e=wk(t),n=new We([new Yr("",{})]),r=new We({}),i=new We({}),s=new We({}),o=new We(""),a=new pr(n,r,s,o,i,te,t,e.root);return a.snapshot=e.root,new Il(new Ct(a,[]),e)}function wk(t){let e={},n={},r={},i="",s=new ms([],e,r,i,n,te,t,null,{});return new El("",new Ct(s,[]))}var pr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[ua]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&KT(i)&&(r.resolve[ua]=i.title),r}var ms=class{get title(){return this.data?.[ua]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},El=class extends _l{constructor(e,n){super(n),this.url=e,Mg(this,n)}toString(){return WT(this._root)}};function Mg(t,e){e.value._routerState=t,e.children.forEach(n=>Mg(t,n))}function WT(t){let e=t.children.length>0?` { ${t.children.map(WT).join(", ")} } `:"";return`${t.value}${e}`}function rg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),rn(e.params,n.params)||t.paramsSubject.next(n.params),KO(e.url,n.url)||t.urlSubject.next(n.url),rn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Dg(t,e){let n=rn(t.params,e.params)&&JO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Dg(t.parent,e.parent))}function KT(t){return typeof t.title=="string"||t.title===null}var Ek=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=O(ha),this.location=O(Ju),this.changeDetector=O(ls),this.inputBinder=O(Cl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Tg(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Vu({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jo]})}}return t})(),Tg=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===pr?this.route:e===ha?this.childContexts:this.parent.get(e,n)}},Cl=new j(""),CT=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=Eo([r.queryParams,r.params,r.data]).pipe(Dt(([s,o,a],u)=>(a=F(F(F({},s),o),a),u===0?G(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let o=iT(r.component);if(!o){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})();function Dk(t,e,n){let r=ia(t,e._root,n?n._root:void 0);return new Il(r,e)}function ia(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Tk(t,e,n);return new Ct(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ia(t,a)),o}}let r=bk(e.value),i=e.children.map(s=>ia(t,s));return new Ct(r,i)}}function Tk(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ia(t,r,i);return ia(t,r)})}function bk(t){return new pr(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var sa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},QT="ngNavigationCancelingError";function Dl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Jr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=YT(!1,St.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function YT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[QT]=!0,n.cancellationCode=e,n}function Ck(t){return ZT(t)&&Jr(t.url)}function ZT(t){return!!t&&t[QT]}var Sk=(t,e,n,r)=>ne(i=>(new bg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),bg=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),rg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ps(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ps(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ps(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ps(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new _g(s.value.snapshot))}),e.children.length&&this.forwardEvent(new yg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(rg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Tl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ys=class{constructor(e,n){this.component=e,this.route=n}};function Ak(t,e,n){let r=t._root,i=e?e._root:null;return Yo(r,i,n,[r.value])}function Rk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ds(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jw(t)?t:e.get(t):r}function Yo(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ps(e);return t.children.forEach(o=>{Nk(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ea(a,n.getContext(o),i)),i}function Nk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Mk(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Tl(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Yo(t,e,a?a.children:null,r,i):Yo(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ys(a.outlet.component,o))}else o&&ea(e,a,i),i.canActivateChecks.push(new Tl(r)),s.component?Yo(t,null,a?a.children:null,r,i):Yo(t,null,n,r,i);return i}function Mk(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Zr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zr(t.url,e.url)||!rn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dg(t,e)||!rn(t.queryParams,e.queryParams);case"paramsChange":default:return!Dg(t,e)}}function ea(t,e,n){let r=ps(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ea(o,e.children.getContext(s),n):ea(o,null,n):ea(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ys(e.outlet.component,i)):n.canDeactivateChecks.push(new ys(null,i)):n.canDeactivateChecks.push(new ys(null,i))}function fa(t){return typeof t=="function"}function xk(t){return typeof t=="boolean"}function Pk(t){return t&&fa(t.canLoad)}function Ok(t){return t&&fa(t.canActivate)}function kk(t){return t&&fa(t.canActivateChild)}function Lk(t){return t&&fa(t.canDeactivate)}function Fk(t){return t&&fa(t.canMatch)}function JT(t){return t instanceof En||t?.name==="EmptyError"}var ll=Symbol("INITIAL_VALUE");function Es(){return Dt(t=>Eo(t.map(e=>e.pipe(Dn(1),eu(ll)))).pipe(ne(e=>{for(let n of e)if(n!==!0){if(n===ll)return ll;if(n===!1||Vk(n))return n}return!0}),Et(e=>e!==ll),Dn(1)))}function Vk(t){return Jr(t)||t instanceof sa}function Uk(t,e){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(we(F({},n),{guardsResult:!0})):jk(o,r,i,t).pipe(Pe(a=>a&&xk(a)?Bk(r,s,t,e):G(a)),ne(a=>we(F({},n),{guardsResult:a})))})}function jk(t,e,n,r){return Ne(t).pipe(Pe(i=>Gk(i.component,i.route,n,e,r)),Qt(i=>i!==!0,!0))}function Bk(t,e,n,r){return Ne(e).pipe(Ur(i=>Vi(Hk(i.route.parent,r),$k(i.route,r),qk(t,i.path,n),zk(t,i.route,n))),Qt(i=>i!==!0,!0))}function $k(t,e){return t!==null&&e&&e(new vg(t)),G(!0)}function Hk(t,e){return t!==null&&e&&e(new mg(t)),G(!0)}function zk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Zc(()=>{let o=da(e)??n,a=Ds(s,o),u=Ok(a)?a.canActivate(e,t):tn(o,()=>a(e,t));return gr(u).pipe(Qt())}));return G(i).pipe(Es())}function qk(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Rk(o)).filter(o=>o!==null).map(o=>Zc(()=>{let a=o.guards.map(u=>{let l=da(o.node)??n,h=Ds(u,l),p=kk(h)?h.canActivateChild(r,t):tn(l,()=>h(r,t));return gr(p).pipe(Qt())});return G(a).pipe(Es())}));return G(s).pipe(Es())}function Gk(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let u=da(e)??i,l=Ds(a,u),h=Lk(l)?l.canDeactivate(t,e,n,r):tn(u,()=>l(t,e,n,r));return gr(h).pipe(Qt())});return G(o).pipe(Es())}function Wk(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=Ds(o,t),u=Pk(a)?a.canLoad(e,n):tn(t,()=>a(e,n));return gr(u)});return G(s).pipe(Es(),XT(r))}function XT(t){return Mc(Ue(e=>{if(typeof e!="boolean")throw Dl(t,e)}),ne(e=>e===!0))}function Kk(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=Ds(o,t),u=Fk(a)?a.canMatch(e,n):tn(t,()=>a(e,n));return gr(u)});return G(s).pipe(Es(),XT(r))}var oa=class{constructor(e){this.segmentGroup=e||null}},aa=class extends Error{constructor(e){super(),this.urlTree=e}};function fs(t){return Li(new oa(t))}function Qk(t){return Li(new H(4e3,!1))}function Yk(t){return Li(YT(!1,St.GuardRejected))}var Cg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[te])return Qk(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:C,title:N}=i,R=tn(s,()=>a({params:v,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Mn)throw new aa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new aa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Mn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ye(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Sg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Zk(t,e,n,r,i){let s=eb(t,e,n);return s.matched?(r=_k(e,r),Kk(r,e,n,i).pipe(ne(o=>o===!0?s:F({},Sg)))):G(s)}function eb(t,e,n){if(e.path==="**")return Jk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Sg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||WO)(n,t,e);if(!i)return F({},Sg);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Jk(t){return{matched:!0,parameters:t.length>0?PT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ST(t,e,n,r){return n.length>0&&t1(t,n,r)?{segmentGroup:new ye(e,e1(r,new ye(n,t.children))),slicedSegments:[]}:n.length===0&&n1(t,n,r)?{segmentGroup:new ye(t.segments,Xk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ye(t.segments,t.children),slicedSegments:n}}function Xk(t,e,n,r){let i={};for(let s of n)if(Sl(t,e,s)&&!r[Ht(s)]){let o=new ye([],{});i[Ht(s)]=o}return F(F({},r),i)}function e1(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&Ht(r)!==te){let i=new ye([],{});n[Ht(r)]=i}return n}function t1(t,e,n){return n.some(r=>Sl(t,e,r)&&Ht(r)!==te)}function n1(t,e,n){return n.some(r=>Sl(t,e,r))}function Sl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function r1(t,e,n){return e.length===0&&!t.children[n]}var Ag=class{};function i1(t,e,n,r,i,s,o="emptyOnly"){return new Rg(t,e,n,r,i,o,s).recognize()}var s1=31,Rg=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Cg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=ST(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:n,rootSnapshot:r})=>{let i=new Ct(r,n),s=new El("",i),o=hk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ms([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ne(r=>({children:r,rootSnapshot:n})),Xn(r=>{if(r instanceof aa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof oa?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ne(o=>o instanceof Ct?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ne(s).pipe(Ur(o=>{let a=r.children[o],u=Ik(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Xc((o,a)=>(o.push(...a),o)),er(null),jh(),Pe(o=>{if(o===null)return fs(r);let a=tb(o);return o1(a),G(a)}))}processSegment(e,n,r,i,s,o,a){return Ne(n).pipe(Ur(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(Xn(l=>{if(l instanceof oa)return G(null);throw l}))),Qt(u=>!!u),Xn(u=>{if(JT(u))return r1(r,i,s)?G(new Ag):fs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return Ht(r)!==o&&(o===te||!Sl(i,s,r))?fs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):fs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=eb(n,i,s);if(!u)return fs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s1&&(this.allowRedirects=!1));let v=new ms(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,AT(i),Ht(i),i.component??i._loadedComponent??null,i,RT(i)),C=wl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Pe(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=Zk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Dt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Dt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,C=new ms(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,AT(r),Ht(r),r.component??r._loadedComponent??null,r,RT(r)),N=wl(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=ST(n,m,v,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(ne(z=>new Ct(C,z)));if(l.length===0&&k.length===0)return G(new Ct(C,[]));let U=Ht(r)===s;return this.processSegment(h,l,R,k,U?te:s,!0,C).pipe(ne(z=>new Ct(C,z instanceof Ct?[z]:[])))}))):fs(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):Wk(e,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ue(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Yk(n))):G({routes:[],injector:e})}};function o1(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function a1(t){let e=t.value.routeConfig;return e&&e.path===""}function tb(t){let e=[],n=new Set;for(let r of t){if(!a1(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=tb(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!n.has(r))}function AT(t){return t.data||{}}function RT(t){return t.resolve||{}}function c1(t,e,n,r,i,s){return Pe(o=>i1(t,e,n,r,o.extractedUrl,i,s).pipe(ne(({state:a,tree:u})=>we(F({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function u1(t,e){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of nb(u))o.add(l);let a=0;return Ne(o).pipe(Ur(u=>s.has(u)?l1(u,r,t,e):(u.data=wl(u,u.parent,t).resolve,G(void 0))),Ue(()=>a++),Ui(1),Pe(u=>a===o.size?G(n):wt))})}function nb(t){let e=t.children.map(n=>nb(n)).flat();return[t,...e]}function l1(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!KT(i)&&(s[ua]=i.title),d1(s,t,e,r).pipe(ne(o=>(t._resolvedData=o,t.data=wl(t,t.parent,n).resolve,null)))}function d1(t,e,n,r){let i=og(t);if(i.length===0)return G({});let s={};return Ne(i).pipe(Pe(o=>h1(t[o],e,n,r).pipe(Qt(),Ue(a=>{if(a instanceof sa)throw Dl(new _s,a);s[o]=a}))),Ui(1),Uh(s),Xn(o=>JT(o)?wt:Li(o)))}function h1(t,e,n,r){let i=da(e)??r,s=Ds(t,i),o=s.resolve?s.resolve(e,n):tn(i,()=>s(e,n));return gr(o)}function ig(t){return Dt(e=>{let n=t(e);return n?Ne(n).pipe(ne(()=>e)):G(e)})}var rb=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[ua]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>O(f1),providedIn:"root"})}}return t})(),f1=(()=>{class t extends rb{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(W(wT))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pa=new j("",{providedIn:"root",factory:()=>({})}),p1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=eE({type:t,selectors:[["ng-component"]],standalone:!0,features:[QD],decls:1,vars:0,template:function(r,i){r&1&&kp(0,"router-outlet")},dependencies:[Ek],encapsulation:2})}}return t})();function xg(t){let e=t.children&&t.children.map(xg),n=e?we(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=p1),n}var ca=new j(""),Pg=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(rl)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=gr(n.loadComponent()).pipe(ne(ib),Ue(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Do(()=>{this.componentLoaders.delete(n)})),i=new xi(r,()=>new Xe).pipe(Mi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=g1(r,this.compiler,n,this.onLoadEndListener).pipe(Do(()=>{this.childrenLoaders.delete(r)})),o=new xi(s,()=>new Xe).pipe(Mi());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function g1(t,e,n,r){return gr(t.loadChildren()).pipe(ne(ib),Pe(i=>i instanceof Oo||Array.isArray(i)?G(i):Ne(e.compileModuleAsync(i))),ne(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(ca,[],{optional:!0,self:!0}).flat()),{routes:o.map(xg),injector:s}}))}function m1(t){return t&&typeof t=="object"&&"default"in t}function ib(t){return m1(t)?t.default:t}var Og=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>O(y1),providedIn:"root"})}}return t})(),y1=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),sb=new j(""),ob=new j("");function v1(t,e,n){let r=t.get(ob),i=t.get(dt);return t.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),_1(t))),{onViewTransitionCreated:u}=r;return u&&tn(t,()=>u({transition:a,from:e,to:n})),o})}function _1(t){return new Promise(e=>{Pp({read:()=>setTimeout(e)},{injector:t})})}var I1=new j(""),kg=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=O(Pg),this.environmentInjector=O(Tt),this.urlSerializer=O(la),this.rootContexts=O(ha),this.location=O(hs),this.inputBindingEnabled=O(Cl,{optional:!0})!==null,this.titleStrategy=O(rb),this.options=O(pa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Og),this.createViewTransition=O(sb,{optional:!0}),this.navigationErrorHandler=O(I1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let n=i=>this.events.next(new pg(i)),r=i=>this.events.next(new gg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(we(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new We({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Xo,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(s=>s.id!==0),ne(s=>we(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Dt(s=>{let o=!1,a=!1;return G(s).pipe(Dt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),wt;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?we(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new fr(u.id,this.urlSerializer.serialize(u.rawUrl),p,ml.IgnoredSameUrlNavigation)),u.resolve(!1),wt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(Dt(p=>{let m=this.transitions?.getValue();return this.events.next(new Is(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?wt:Promise.resolve(p)}),c1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=we(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new yl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:C,extras:N}=u,R=new Is(p,this.urlSerializer.serialize(m),v,C);this.events.next(R);let k=GT(this.rootComponentType).snapshot;return this.currentTransition=s=we(F({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:we(F({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,G(s)}else{let p="";return this.events.next(new fr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,ml.IgnoredByUrlHandlingStrategy)),u.resolve(!1),wt}}),Ue(u=>{let l=new lg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),ne(u=>(this.currentTransition=s=we(F({},u),{guards:Ak(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),Uk(this.environmentInjector,u=>this.events.next(u)),Ue(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Dl(this.urlSerializer,u.guardsResult);let l=new dg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Et(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",St.GuardRejected),!1)),ig(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(Ue(l=>{let h=new hg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Dt(l=>{let h=!1;return G(l).pipe(u1(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",St.NoDataFromResolver)}}))}),Ue(l=>{let h=new fg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),ig(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ue(m=>{h.component=m}),ne(()=>{})));for(let m of h.children)p.push(...l(m));return p};return Eo(l(u.targetSnapshot.root)).pipe(er(null),Dn(1))}),ig(()=>this.afterPreactivation()),Dt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ne(h).pipe(ne(()=>s)):G(s)}),ne(u=>{let l=Dk(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=we(F({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ue(()=>{this.events.next(new ra)}),Sk(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Dn(1),Ue({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),Bh(this.transitionAbortSubject.pipe(Ue(u=>{throw u}))),Do(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xn(u=>{if(a=!0,ZT(u))this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),Ck(u)?this.events.next(new ws(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new na(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=tn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof sa){let{message:p,cancellationCode:m}=Dl(this.urlSerializer,h);this.events.next(new Nn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new ws(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=n.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return wt}))}))}cancelNavigationTransition(n,r,i){let s=new Nn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function w1(t){return t!==Xo}var E1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>O(D1),providedIn:"root"})}}return t})(),Ng=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},D1=(()=>{class t extends Ng{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=dp(t)))(i||t)}})()}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ab=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>O(T1),providedIn:"root"})}}return t})(),T1=(()=>{class t extends ab{constructor(){super(...arguments),this.location=O(hs),this.urlSerializer=O(la),this.options=O(pa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Og),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=GT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Is)this.stateMemento=this.createStateMemento();else if(n instanceof fr)this.rawUrlTree=r.initialUrl;else if(n instanceof yl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof ra?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Nn&&(n.code===St.GuardRejected||n.code===St.NoDataFromResolver)?this.restoreHistory(r):n instanceof na?this.restoreHistory(r,!0):n instanceof sn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Mn?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=dp(t)))(i||t)}})()}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Zo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Zo||{});function cb(t,e){t.events.pipe(Et(n=>n instanceof sn||n instanceof Nn||n instanceof na||n instanceof fr),ne(n=>n instanceof sn||n instanceof fr?Zo.COMPLETE:(n instanceof Nn?n.code===St.Redirect||n.code===St.SupersededByNewNavigation:!1)?Zo.REDIRECTING:Zo.FAILED),Et(n=>n!==Zo.REDIRECTING),Dn(1)).subscribe(()=>{e()})}function b1(t){throw t}var C1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=O(el),this.stateManager=O(ab),this.options=O(pa,{optional:!0})||{},this.pendingTasks=O(cs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(kg),this.urlSerializer=O(la),this.location=O(hs),this.urlHandlingStrategy=O(Og),this._events=new Xe,this.errorHandler=this.options.errorHandler||b1,this.navigated=!1,this.routeReuseStrategy=O(E1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(ca,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Cl,{optional:!0}),this.eventsSubscription=new Re,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Nn&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sn)this.navigated=!0;else if(r instanceof ws){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||w1(i.source)},o);this.scheduleNavigation(a,Xo,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}R1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=$T(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return HT(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Jr(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Xo,null,r)}navigate(n,r={skipLocationChange:!1}){return A1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},C1):r===!1?i=F({},S1):i=r,Jr(n))return ET(this.currentUrlTree,n,i);let s=this.parseUrl(n);return ET(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return cb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function A1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function R1(t){return!(t instanceof ra)&&!(t instanceof ws)}var pW=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new Xe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Jr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.href=n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;let r=this.href===null?null:iD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return this.routerLinkInput===null?null:Jr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(Ot(xn),Ot(pr),hp("tabindex"),Ot(Zu),Ot($o),Ot(Rn))}}static{this.\u0275dir=Vu({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Lp("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Op("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",zo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",zo],replaceUrl:[2,"replaceUrl","replaceUrl",zo],routerLink:"routerLink"},standalone:!0,features:[xp,jo]})}}return t})();var bl=class{};var N1=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Et(n=>n instanceof sn),Ur(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Xu(s.providers,n,`Route: ${s.path}`));let o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ne(i).pipe(Fi())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=G(null);let s=i.pipe(Pe(o=>o===null?G(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ne([s,o]).pipe(Fi())}else return s})}static{this.\u0275fac=function(r){return new(r||t)(W(xn),W(rl),W(Tt),W(bl),W(Pg))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ub=new j(""),M1=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Is?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof sn?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof fr&&n.code===ml.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof vl&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new vl(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){mD()}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})();function gW(t,...e){return xt([{provide:ca,multi:!0,useValue:t},[],{provide:pr,useFactory:lb,deps:[xn]},{provide:nl,multi:!0,useFactory:db},e.map(n=>n.\u0275providers)])}function lb(t){return t.routerState.root}function ga(t,e){return{\u0275kind:t,\u0275providers:e}}function db(){let t=O($e);return e=>{let n=t.get(Qr);if(e!==n.components[0])return;let r=t.get(xn),i=t.get(hb);t.get(Lg)===1&&r.initialNavigation(),t.get(fb,null,re.Optional)?.setUpPreloading(),t.get(ub,null,re.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hb=new j("",{factory:()=>new Xe}),Lg=new j("",{providedIn:"root",factory:()=>1});function x1(){return ga(2,[{provide:Lg,useValue:0},{provide:tl,multi:!0,deps:[$e],useFactory:e=>{let n=e.get(uT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(xn),s=e.get(hb);cb(i,()=>{r(!0)}),e.get(kg).afterPreactivation=()=>(r(!0),s.closed?G(void 0):s),i.initialNavigation()}))}}])}function P1(){return ga(3,[{provide:tl,multi:!0,useFactory:()=>{let e=O(xn);return()=>{e.setUpLocationChangeListener()}}},{provide:Lg,useValue:2}])}var fb=new j("");function O1(t){return ga(0,[{provide:fb,useExisting:N1},{provide:bl,useExisting:t}])}function k1(){return ga(8,[CT,{provide:Cl,useExisting:CT}])}function L1(t){let e=[{provide:sb,useValue:v1},{provide:ob,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return ga(9,e)}var NT=new j("ROUTER_FORROOT_GUARD"),F1=[hs,{provide:la,useClass:_s},xn,ha,{provide:pr,useFactory:lb,deps:[xn]},Pg,[]],mW=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[F1,[],{provide:ca,multi:!0,useValue:n},{provide:NT,useFactory:B1,deps:[[xn,new Oe,new Ww]]},{provide:pa,useValue:r||{}},r?.useHash?U1():j1(),V1(),r?.preloadingStrategy?O1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?$1(r):[],r?.bindToComponentInputs?k1().\u0275providers:[],r?.enableViewTransitions?L1().\u0275providers:[],H1()]}}static forChild(n){return{ngModule:t,providers:[{provide:ca,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(W(NT,8))}}static{this.\u0275mod=Uo({type:t})}static{this.\u0275inj=Fo({})}}return t})();function V1(){return{provide:ub,useFactory:()=>{let t=O(fT),e=O(pe),n=O(pa),r=O(kg),i=O(la);return n.scrollOffset&&t.setOffset(n.scrollOffset),new M1(i,r,t,e,n)}}}function U1(){return{provide:Rn,useClass:dT}}function j1(){return{provide:Rn,useClass:Gp}}function B1(t){return"guarded"}function $1(t){return[t.initialNavigation==="disabled"?P1().\u0275providers:[],t.initialNavigation==="enabledBlocking"?x1().\u0275providers:[]]}var MT=new j("");function H1(){return[{provide:MT,useFactory:db},{provide:nl,multi:!0,useExisting:MT}]}var Vg={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var z1=function(t,e){if(!t)throw q1(e)},q1=function(t){return new Error("Firebase Database ("+Vg.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var yb=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},G1=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Ug;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ug=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},W1=function(t){let e=yb(t);return vb.encodeByteArray(e,!0)},ma=function(t){return W1(t).replace(/\./g,"")},ya=function(t){try{return vb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _W(t){return _b(void 0,t)}function _b(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!K1(n)||(t[n]=_b(t[n],e[n]));return t}function K1(t){return t!=="__proto__"}function Q1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Y1=()=>Q1().__FIREBASE_DEFAULTS__,Z1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},J1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ya(t[1]);return e&&JSON.parse(e)},Rl=()=>{try{return Y1()||Z1()||J1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bg=t=>{var e,n;return(n=(e=Rl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Nl=t=>{let e=Bg(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$g=()=>{var t;return(t=Rl())===null||t===void 0?void 0:t.config},Hg=t=>{var e;return(e=Rl())===null||e===void 0?void 0:e[`_${t}`]};var Al=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ib(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ma(JSON.stringify(n)),ma(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function X1(){var t;let e=(t=Rl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Eb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Db(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Tb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bb(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IW(){return Vg.NODE_CLIENT===!0||Vg.NODE_ADMIN===!0}function Cb(){return!X1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zg(){try{return typeof indexedDB=="object"}catch{return!1}}function Sb(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var eL="FirebaseError",ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pn.prototype.create)}},Pn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ht(i,a,r)}};function tL(t,e){return t.replace(nL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var nL=/\{\$([^}]+)}/g;function pb(t){return JSON.parse(t)}function wW(t){return JSON.stringify(t)}var Ab=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=pb(ya(s[0])||""),n=pb(ya(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var EW=function(t){let e=Ab(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},DW=function(t){let e=Ab(t).claims;return typeof e=="object"&&e.admin===!0};function TW(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bW(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Rb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function CW(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Xr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(gb(s)&&gb(o)){if(!Xr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function gb(t){return t!==null&&typeof t=="object"}function Ts(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var mb=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):p<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let m=(i<<5|i>>>27)+l+u+h+r[p]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Nb(t,e){let n=new jg(t,e);return n.subscribe.bind(n)}var jg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");rL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fg),i.error===void 0&&(i.error=Fg),i.complete===void 0&&(i.complete=Fg);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function rL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fg(){}function SW(t,e){return`${t} failed: ${e} argument `}var AW=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,z1(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RW=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var NW=4*60*60*1e3;function De(t){return t&&t._delegate?t._delegate:t}var yt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ei="[DEFAULT]";var qg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Al;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sL(e))try{this.getOrInitializeService({instanceIdentifier:ei})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ei){return this.instances.has(e)}getOptions(e=ei){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ei){return this.component?this.component.multipleInstances?e:ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function iL(t){return t===ei?void 0:t}function sL(t){return t.instantiationMode==="EAGER"}var Ml=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new qg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var oL=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),aL={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},cL=le.INFO,uL={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},lL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=uL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},mr=class{constructor(e){this.name=e,this._logLevel=cL,this._logHandler=lL,this._userLogHandler=null,oL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var dL=(t,e)=>e.some(n=>t instanceof n),Mb,xb;function hL(){return Mb||(Mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fL(){return xb||(xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Pb=new WeakMap,Wg=new WeakMap,Ob=new WeakMap,Gg=new WeakMap,Qg=new WeakMap;function pL(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(on(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Pb.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function gL(t){if(Wg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Wg.set(t,e)}var Kg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ob.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kb(t){Kg=t(Kg)}function mL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(xl(this),e,...n);return Ob.set(r,e.sort?e.sort():[e]),on(r)}:fL().includes(t)?function(...e){return t.apply(xl(this),e),on(Pb.get(this))}:function(...e){return on(t.apply(xl(this),e))}}function yL(t){return typeof t=="function"?mL(t):(t instanceof IDBTransaction&&gL(t),dL(t,hL())?new Proxy(t,Kg):t)}function on(t){if(t instanceof IDBRequest)return pL(t);if(Gg.has(t))return Gg.get(t);let e=yL(t);return e!==t&&(Gg.set(t,e),Qg.set(e,t)),e}var xl=t=>Qg.get(t);function Fb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=on(o);return r&&o.addEventListener("upgradeneeded",u=>{r(on(o.result),u.oldVersion,u.newVersion,on(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var vL=["get","getKey","getAll","getAllKeys","count"],_L=["put","add","delete","clear"],Yg=new Map;function Lb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=_L.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vL.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Yg.set(e,s),s}kb(t=>we(F({},t),{get:(e,n,r)=>Lb(e,n)||t.get(e,n,r),has:(e,n)=>!!Lb(e,n)||t.has(e,n)}));var Jg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IL(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function IL(t){let e=t.getComponent();return e?.type==="VERSION"}var Xg="@firebase/app",Vb="0.10.11";var On=new mr("@firebase/app"),wL="@firebase/app-compat",EL="@firebase/analytics-compat",DL="@firebase/analytics",TL="@firebase/app-check-compat",bL="@firebase/app-check",CL="@firebase/auth",SL="@firebase/auth-compat",AL="@firebase/database",RL="@firebase/database-compat",NL="@firebase/functions",ML="@firebase/functions-compat",xL="@firebase/installations",PL="@firebase/installations-compat",OL="@firebase/messaging",kL="@firebase/messaging-compat",LL="@firebase/performance",FL="@firebase/performance-compat",VL="@firebase/remote-config",UL="@firebase/remote-config-compat",jL="@firebase/storage",BL="@firebase/storage-compat",$L="@firebase/firestore",HL="@firebase/vertexai-preview",zL="@firebase/firestore-compat",qL="firebase",GL="10.13.2";var em="[DEFAULT]",WL={[Xg]:"fire-core",[wL]:"fire-core-compat",[DL]:"fire-analytics",[EL]:"fire-analytics-compat",[bL]:"fire-app-check",[TL]:"fire-app-check-compat",[CL]:"fire-auth",[SL]:"fire-auth-compat",[AL]:"fire-rtdb",[RL]:"fire-rtdb-compat",[NL]:"fire-fn",[ML]:"fire-fn-compat",[xL]:"fire-iid",[PL]:"fire-iid-compat",[OL]:"fire-fcm",[kL]:"fire-fcm-compat",[LL]:"fire-perf",[FL]:"fire-perf-compat",[VL]:"fire-rc",[UL]:"fire-rc-compat",[jL]:"fire-gcs",[BL]:"fire-gcs-compat",[$L]:"fire-fst",[zL]:"fire-fst-compat",[HL]:"fire-vertex","fire-js":"fire-js",[qL]:"fire-js-all"};var va=new Map,KL=new Map,tm=new Map;function Ub(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function an(t){let e=t.name;if(tm.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,t);for(let n of va.values())Ub(n,t);for(let n of KL.values())Ub(n,t);return!0}function ti(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zt(t){return t.settings!==void 0}var QL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Pn("app","Firebase",QL);var nm=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}};var vr=GL;function sm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:em,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw yr.create("bad-app-name",{appName:String(i)});if(n||(n=$g()),!n)throw yr.create("no-options");let s=va.get(i);if(s){if(Xr(n,s.options)&&Xr(r,s.config))return s;throw yr.create("duplicate-app",{appName:i})}let o=new Ml(i);for(let u of tm.values())o.addComponent(u);let a=new nm(n,r,o);return va.set(i,a),a}function _r(t=em){let e=va.get(t);if(!e&&t===em&&$g())return sm();if(!e)throw yr.create("no-app",{appName:t});return e}function Pl(){return Array.from(va.values())}function Te(t,e,n){var r;let i=(r=WL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(a.join(" "));return}an(new yt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var YL="firebase-heartbeat-database",ZL=1,_a="firebase-heartbeat-store",Zg=null;function Hb(){return Zg||(Zg=Fb(YL,ZL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),Zg}function JL(t){return w(this,null,function*(){try{let n=(yield Hb()).transaction(_a),r=yield n.objectStore(_a).get(zb(t));return yield n.done,r}catch(e){if(e instanceof ht)On.warn(e.message);else{let n=yr.create("idb-get",{originalErrorMessage:e?.message});On.warn(n.message)}}})}function jb(t,e){return w(this,null,function*(){try{let r=(yield Hb()).transaction(_a,"readwrite");yield r.objectStore(_a).put(e,zb(t)),yield r.done}catch(n){if(n instanceof ht)On.warn(n.message);else{let r=yr.create("idb-set",{originalErrorMessage:n?.message});On.warn(r.message)}}})}function zb(t){return`${t.name}!${t.options.appId}`}var XL=1024,eF=30*24*60*60*1e3,rm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new im(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bb();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=eF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){On.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Bb(),{heartbeatsToSend:r,unsentEntries:i}=tF(this._heartbeatsCache.heartbeats),s=ma(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return On.warn(n),""}})}};function Bb(){return new Date().toISOString().substring(0,10)}function tF(t,e=XL){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$b(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$b(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var im=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return zg()?Sb().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield JL(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return jb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function $b(t){return ma(JSON.stringify({version:2,heartbeats:t})).length}function nF(t){an(new yt("platform-logger",e=>new Jg(e),"PRIVATE")),an(new yt("heartbeat",e=>new rm(e),"PRIVATE")),Te(Xg,Vb,t),Te(Xg,Vb,"esm2017"),Te("fire-js","")}nF("");var rF="firebase",iF="10.13.2";Te(rF,iF,"app");var kn=new cr("ANGULARFIRE2_VERSION");function Cs(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ri=(t,e)=>{let n=e?[e]:Pl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ir=class{constructor(){return ri(sF)}},sF="app-check";function bs(){}var Ol=class{zone;delegate;constructor(e,n=Fh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},om=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),n.pipe(Ue({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ol(Zone.current)),this.insideAngular=n.run(()=>new Ol(Zone.current,wo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(W(pe))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function oF(t){return kl().ngZone.runOutsideAngular(()=>t())}function ni(t){return kl().ngZone.run(()=>t())}function aF(t){return cF(kl())(t)}function cF(t){return function(n){return n=n.lift(new om(t.ngZone)),n.pipe(Jn(t.outsideAngular),Zn(t.insideAngular))}}var uF=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ni(()=>t.apply(void 0,r))},Be=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ni(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs))),r[s]=uF(r[s],n));let i=oF(()=>t.apply(this,r));if(!e)if(i instanceof ce){let s=kl();return i.pipe(Jn(s.outsideAngular),Zn(s.insideAngular))}else return ni(()=>i);return i instanceof ce?i.pipe(aF):i instanceof Promise?ni(()=>new Promise((s,o)=>i.then(a=>ni(()=>s(a)),a=>ni(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ni(()=>i)};var qt=class{constructor(e){return e}},Ln=class{constructor(){return Pl()}};function lF(t){return t&&t.length===1?t[0]:new qt(_r())}var am=new j("angularfire2._apps"),dF={provide:qt,useFactory:lF,deps:[[new Oe,am]]},hF={provide:Ln,deps:[[new Oe,am]]};function fF(t){return(e,n)=>{let r=n.get(nn);Te("angularfire",kn.full,"core"),Te("angularfire",kn.full,"app"),Te("angular",YD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new qt(i)}}function m3(t,...e){return xt([dF,hF,{provide:am,useFactory:fF(t),multi:!0,deps:[pe,$e,wr,...e]}])}var y3=Be(sm,!0);function sC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var oC=sC,aC=new Pn("auth","Firebase",sC());var Bl=new mr("@firebase/auth");function pF(t,...e){Bl.logLevel<=le.WARN&&Bl.warn(`Auth (${vr}): ${t}`,...e)}function Fl(t,...e){Bl.logLevel<=le.ERROR&&Bl.error(`Auth (${vr}): ${t}`,...e)}function un(t,...e){throw bm(t,...e)}function Gt(t,...e){return bm(t,...e)}function Tm(t,e,n){let r=Object.assign(Object.assign({},oC()),{[e]:n});return new Pn("auth","Firebase",r).create(e,{appName:t.name})}function Dr(t){return Tm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gF(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&un(t,"argument-error"),Tm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return aC.create(t,...e)}function K(t,e,...n){if(!t)throw bm(e,...n)}function Fn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Fl(e),new Error(e)}function Un(t,e){t||Fn(e)}function lm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mF(){return qb()==="http:"||qb()==="https:"}function qb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function yF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mF()||Db()||"connection"in navigator)?navigator.onLine:!0}function vF(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ii=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=wb()||Tb()}get(){return yF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Cm(t,e){Un(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var $l=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _F={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var IF=new ii(3e4,6e4);function Xl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Rs(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return cC(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Ts(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let v=Object.assign({method:e,headers:m},l);return Eb()||(v.referrerPolicy="no-referrer"),$l.fetch()(lC(t,t.config.apiHost,n,p),v)}))})}function cC(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},_F),e);try{let i=new dm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ll(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Tm(t,h,l);un(t,h)}}catch(i){if(i instanceof ht)throw i;un(t,"network-request-failed",{message:String(i)})}})}function uC(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Rs(t,e,n,r,i);return"mfaPendingCredential"in l&&un(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function lC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Cm(t.config,i):`${t.config.apiScheme}://${i}`}var dm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gt(this.auth,"network-request-failed")),IF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ll(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Gt(t,e,r);return i.customData._tokenResponse=n,i}function wF(t,e){return w(this,null,function*(){return Rs(t,"POST","/v1/accounts:delete",e)})}function dC(t,e){return w(this,null,function*(){return Rs(t,"POST","/v1/accounts:lookup",e)})}function Ia(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Sm(t,e=!1){return w(this,null,function*(){let n=De(t),r=yield n.getIdToken(e),i=Am(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ia(cm(i.auth_time)),issuedAtTime:Ia(cm(i.iat)),expirationTime:Ia(cm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function cm(t){return Number(t)*1e3}function Am(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fl("JWT malformed, contained fewer than 3 sections"),null;try{let i=ya(n);return i?JSON.parse(i):(Fl("Failed to decode base64 JWT payload"),null)}catch(i){return Fl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Gb(t){let e=Am(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ea(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ht&&EF(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function EF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var hm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Da=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ia(this.lastLoginAt),this.creationTime=Ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Hl(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ea(t,dC(n,{idToken:r}));K(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hC(s.providerUserInfo):[],a=DF(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Da(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Rm(t){return w(this,null,function*(){let e=De(t);yield Hl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function DF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hC(t){return t.map(e=>{var{providerId:n}=e,r=Fc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function TF(t,e){return w(this,null,function*(){let n=yield cC(t,{},()=>w(this,null,function*(){let r=Ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=lC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$l.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function bF(t,e){return w(this,null,function*(){return Rs(t,"POST","/v2/accounts:revokeToken",Xl(t,e))})}var wa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=Gb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield TF(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Fn("not implemented")}};function Er(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var As=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Fc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Da(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield Ea(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Sm(this,e)}reload(){return Rm(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Hl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(zt(this.auth.app))return Promise.reject(Dr(this.auth));let e=yield this.getIdToken();return yield Ea(this,wF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:se,isAnonymous:Se,providerData:Z,stsTokenManager:D}=n;K(z&&D,e,"internal-error");let y=wa.fromJSON(this.name,D);K(typeof z=="string",e,"internal-error"),Er(p,e.name),Er(m,e.name),K(typeof se=="boolean",e,"internal-error"),K(typeof Se=="boolean",e,"internal-error"),Er(v,e.name),Er(C,e.name),Er(N,e.name),Er(R,e.name),Er(k,e.name),Er(U,e.name);let _=new t({uid:z,auth:e,email:m,emailVerified:se,displayName:p,isAnonymous:Se,photoURL:C,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:k,lastLoginAt:U});return Z&&Array.isArray(Z)&&(_.providerData=Z.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new wa;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Hl(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];K(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?hC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new wa;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Da(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var Wb=new Map;function Vn(t){Un(t instanceof Function,"Expected a class definition");let e=Wb.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Wb.set(t,e),e)}var CF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),fm=CF;function Vl(t,e,n){return`firebase:${t}:${e}:${n}`}var zl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Vl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Vn(fm),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Vn(fm),o=Vl(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=As._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function Kb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vC(e))return"Blackberry";if(_C(e))return"Webos";if(pC(e))return"Safari";if((e.includes("chrome/")||gC(e))&&!e.includes("edge/"))return"Chrome";if(yC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function fC(t=ze()){return/firefox\//i.test(t)}function pC(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gC(t=ze()){return/crios\//i.test(t)}function mC(t=ze()){return/iemobile/i.test(t)}function yC(t=ze()){return/android/i.test(t)}function vC(t=ze()){return/blackberry/i.test(t)}function _C(t=ze()){return/webos/i.test(t)}function Nm(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SF(t=ze()){var e;return Nm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AF(){return bb()&&document.documentMode===10}function IC(t=ze()){return Nm(t)||yC(t)||_C(t)||vC(t)||/windows phone/i.test(t)||mC(t)}function wC(t,e=[]){let n;switch(t){case"Browser":n=Kb(ze());break;case"Worker":n=`${Kb(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vr}/${r}`}var pm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function RF(n){return w(this,arguments,function*(t,e={}){return Rs(t,"GET","/v2/passwordPolicy",Xl(t,e))})}var NF=6,gm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:NF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ql(this),this.idTokenSubscription=new ql(this),this.beforeStateQueue=new pm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield zl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield dC(this,{idToken:e}),r=yield As._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Hl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vF()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(zt(this.app))return Promise.reject(Dr(this));let n=e?De(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return zt(this.app)?Promise.reject(Dr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zt(this.app)?Promise.reject(Dr(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Vn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield RF(this),n=new gm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield bF(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Vn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield zl.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&pF(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Sa(t){return De(t)}var ql=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nb(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Mm={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MF(t){Mm=t}function xF(t){return Mm.loadJS(t)}function PF(){return Mm.gapiScript}function EC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function xm(t,e){let n=ti(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Xr(s,e??{}))return i;un(i,"already-initialized")}return n.initialize({options:e})}function OF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Vn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Pm(t,e,n){let r=Sa(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=DC(e),{host:o,port:a}=kF(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||LF()}function DC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kF(t){let e=DC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Qb(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Qb(o)}}}function Qb(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function LF(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ta=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}};function Ss(t,e){return w(this,null,function*(){return uC(t,"POST","/v1/accounts:signInWithIdp",Xl(t,e))})}var FF="http://localhost",Gl=class t extends Ta{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Fc(n,["providerId","signInMethod"]);if(!r||!i)return null;let o=new t(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let n=this.buildRequest();return Ss(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Ss(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Ss(e,n)}buildRequest(){let e={requestUri:FF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ts(n)}return e}};var ba=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Wl=class extends ba{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var VF=(()=>{class t extends Wl{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Gl._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function UF(t,e){return w(this,null,function*(){return uC(t,"POST","/v1/accounts:signUp",Xl(t,e))})}var si=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield As._fromIdTokenResponse(e,r,i),o=Yb(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Yb(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Yb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function Om(t){return w(this,null,function*(){var e;if(zt(t.app))return Promise.reject(Dr(t));let n=Sa(t);if(yield n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new si({user:n.currentUser,providerId:null,operationType:"signIn"});let r=yield UF(n,{returnSecureToken:!0}),i=yield si._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})}var ym=class t extends ht{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function TC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ym._fromErrorAndOperation(t,s,e,r):s})}function jF(t,e,n=!1){return w(this,null,function*(){let r=yield Ea(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return si._forOperation(t,"link",r)})}function BF(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(zt(r.app))return Promise.reject(Dr(r));let i="reauthenticate";try{let s=yield Ea(t,TC(r,i,e,t),n);K(s.idToken,r,"internal-error");let o=Am(s.idToken);K(o,r,"internal-error");let{sub:a}=o;return K(t.uid===a,r,"user-mismatch"),si._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&un(r,"user-mismatch"),s}})}function $F(t,e,n=!1){return w(this,null,function*(){if(zt(t.app))return Promise.reject(Dr(t));let r="signIn",i=yield TC(t,r,e),s=yield si._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function km(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function Lm(t,e,n){return De(t).beforeAuthStateChanged(e,n)}var Kl="__sak";var Ql=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var HF=1e3,zF=10,qF=(()=>{class t extends Ql{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);AF()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,zF):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},HF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield Qn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield Qn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield Qn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),bC=qF;var GF=(()=>{class t extends Ql{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Fm=GF;function WF(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var KF=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield WF(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Vm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var vm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=Vm("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function cn(){return window}function QF(t){cn().location.href=t}function CC(){return typeof cn().WorkerGlobalScope<"u"&&typeof cn().importScripts=="function"}function YF(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function ZF(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function JF(){return CC()?self:null}var SC="firebaseLocalStorageDb",XF=1,Yl="firebaseLocalStorage",AC="fbase_key",oi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ed(t,e){return t.transaction([Yl],e?"readwrite":"readonly").objectStore(Yl)}function eV(){let t=indexedDB.deleteDatabase(SC);return new oi(t).toPromise()}function _m(){let t=indexedDB.open(SC,XF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Yl,{keyPath:AC})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Yl)?e(r):(r.close(),yield eV(),e(yield _m()))}))})}function Zb(t,e,n){return w(this,null,function*(){let r=ed(t,!0).put({[AC]:e,value:n});return new oi(r).toPromise()})}function tV(t,e){return w(this,null,function*(){let n=ed(t,!1).get(e),r=yield new oi(n).toPromise();return r===void 0?null:r.value})}function Jb(t,e){let n=ed(t,!0).delete(e);return new oi(n).toPromise()}var nV=800,rV=3,iV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield _m(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>rV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return CC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=KF._getInstance(JF()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield YF(),!this.activeServiceWorker)return;this.sender=new vm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||ZF()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield _m();return yield Zb(n,Kl,"1"),yield Jb(n,Kl),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>Zb(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>tV(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>Jb(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=ed(s,!1).getAll();return new oi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),nV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RC=iV;var S3=EC("rcb"),A3=new ii(3e4,6e4);function NC(t,e){return e?Vn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ca=class extends Ta{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ss(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ss(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ss(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function sV(t){return $F(t.auth,new Ca(t),t.bypassAuthState)}function oV(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),BF(n,new Ca(t),t.bypassAuthState)}function aV(t){return w(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),jF(n,new Ca(t),t.bypassAuthState)})}var Zl=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sV;case"linkViaPopup":case"linkViaRedirect":return aV;case"reauthViaPopup":case"reauthViaRedirect":return oV;default:un(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var cV=new ii(2e3,1e4);function Um(t,e,n){return w(this,null,function*(){if(zt(t.app))return Promise.reject(Gt(t,"operation-not-supported-in-this-environment"));let r=Sa(t);gF(t,e,ba);let i=NC(r,n);return new uV(r,"signInViaPopup",e,i).executeNotNull()})}var uV=(()=>{class t extends Zl{constructor(n,r,i,s,o){super(n,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return w(this,null,function*(){let n=yield this.execute();return K(n,this.auth,"internal-error"),n})}onExecution(){return w(this,null,function*(){Un(this.filter.length===1,"Popup operations only handle one event");let n=Vm();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,cV.get())};n()}}t.currentPopupAction=null;return t})(),lV="pendingRedirect",Ul=new Map,Im=class t extends Zl{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Ul.get(this.auth._key());if(!e){try{let r=(yield dV(this.resolver,this.auth))?yield Qn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ul.set(this.auth._key(),e)}return this.bypassAuthState||Ul.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return Qn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Qn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function dV(t,e){return w(this,null,function*(){let n=pV(e),r=fV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function hV(t,e){Ul.set(t._key(),e)}function fV(t){return Vn(t._redirectPersistence)}function pV(t){return Vl(lV,t.config.apiKey,t.name)}function gV(t,e,n=!1){return w(this,null,function*(){if(zt(t.app))return Promise.reject(Dr(t));let r=Sa(t),i=NC(r,e),o=yield new Im(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var mV=10*60*1e3,wm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!MC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xb(e))}saveEventToCache(e){this.cachedEventUids.add(Xb(e)),this.lastProcessedEventTime=Date.now()}};function Xb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function MC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function yV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(t);default:return!1}}function vV(n){return w(this,arguments,function*(t,e={}){return Rs(t,"GET","/v1/projects",e)})}var _V=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IV=/^https?/;function wV(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield vV(t);for(let n of e)try{if(EV(n))return}catch{}un(t,"unauthorized-domain")})}function EV(t){let e=lm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IV.test(n))return!1;if(_V.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var DV=new ii(3e4,6e4);function eC(){let t=cn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TV(t){return new Promise((e,n)=>{var r,i,s;function o(){eC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eC(),n(Gt(t,"network-request-failed"))},timeout:DV.get()})}if(!((i=(r=cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cn().gapi)===null||s===void 0)&&s.load)o();else{let a=EC("iframefcb");return cn()[a]=()=>{gapi.load?o():n(Gt(t,"network-request-failed"))},xF(`${PF()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw jl=null,e})}var jl=null;function bV(t){return jl=jl||TV(t),jl}var CV=new ii(5e3,15e3),SV="__/auth/iframe",AV="emulator/auth/iframe",RV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MV(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Cm(e,AV):`https://${t.config.authDomain}/${SV}`,r={apiKey:e.apiKey,appName:t.name,v:vr},i=NV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ts(r).slice(1)}`}function xV(t){return w(this,null,function*(){let e=yield bV(t),n=cn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:MV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RV,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Gt(t,"network-request-failed"),a=cn().setTimeout(()=>{s(o)},CV.get());function u(){cn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var PV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OV=500,kV=600,LV="_blank",FV="http://localhost",Jl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function VV(t,e,n,r=OV,i=kV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},PV),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=gC(l)?LV:n),fC(l)&&(e=e||FV,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,C])=>`${m}${v}=${C},`,"");if(SF(l)&&a!=="_self")return UV(e||"",a),new Jl(null);let p=window.open(e||"",a,h);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Jl(p)}function UV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var jV="__/auth/handler",BV="emulator/auth/handler",$V=encodeURIComponent("fac");function tC(t,e,n,r,i,s){return w(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vr,eventId:i};if(e instanceof ba){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Wl){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${$V}=${encodeURIComponent(u)}`:"";return`${HV(t)}?${Ts(a).slice(1)}${l}`})}function HV({config:t}){return t.emulator?Cm(t,BV):`https://${t.authDomain}/${jV}`}var um="webStorageSupport",Em=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fm,this._completeRedirectFn=gV,this._overrideRedirectResult=hV}_openPopup(e,n,r,i){return w(this,null,function*(){var s;Un((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield tC(e,n,r,lm(),i);return VV(e,o,Vm())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield tC(e,n,r,lm(),i);return QF(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Un(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield xV(e),r=new wm(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(um,{type:um},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[um];o!==void 0&&n(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IC()||pC()||Nm()}},xC=Em;var nC="@firebase/auth",rC="1.7.9";var Dm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function zV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qV(t){an(new yt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wC(t)},l=new mm(r,i,s,u);return OF(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),an(new yt("auth-internal",e=>{let n=Sa(e.getProvider("auth").getImmediate());return(r=>new Dm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Te(nC,rC,zV(t)),Te(nC,rC,"esm2017")}var GV=5*60,WV=Hg("authIdTokenMaxAge")||GV,iC=null,KV=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>WV)return;let i=n?.token;iC!==i&&(iC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function jm(t=_r()){let e=ti(t,"auth");if(e.isInitialized())return e.getImmediate();let n=xm(t,{popupRedirectResolver:xC,persistence:[RC,bC,Fm]}),r=Hg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=KV(s.toString());Lm(n,o,()=>o(n.currentUser)),km(n,a=>o(a))}}let i=Bg("auth");return i&&Pm(n,`http://${i}`),n}function QV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}MF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Gt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",QV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qV("Browser");var PC="auth",Aa=class{constructor(e){return e}},ai=class{constructor(){return ri(PC)}};var Bm=new j("angularfire2.auth-instances");function BU(t,e){let n=Cs(PC,t,e);return n&&new Aa(n)}function $U(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Aa(r)}}var HU={provide:ai,deps:[[new Oe,Bm]]},zU={provide:Aa,useFactory:BU,deps:[[new Oe,Bm],qt]};function h6(t,...e){return Te("angularfire",kn.full,"auth"),xt([zU,HU,{provide:Bm,useFactory:$U(t),multi:!0,deps:[pe,$e,wr,Ln,[new Oe,Ir],...e]}])}var f6=Be(jm,!0);var p6=Be(Om,!0);var g6=Be(Um,!0);var OC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kC={};var Tr,$m;(function(){var t;function e(D,y){function _(){}_.prototype=y.prototype,D.D=y.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(E,T,S){for(var I=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)I[vn-2]=arguments[vn];return y.prototype[T].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)E[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;16>T;++T)E[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=D.g[0],_=D.g[1],T=D.g[2];var S=D.g[3],I=y+(S^_&(T^S))+E[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[1]+3905402710&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[2]+606105819&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[3]+3250441966&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(S^_&(T^S))+E[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[5]+1200080426&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[6]+2821735955&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[7]+4249261313&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(S^_&(T^S))+E[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[9]+2336552879&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[10]+4294925233&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[11]+2304563134&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(S^_&(T^S))+E[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=S+(T^y&(_^T))+E[13]+4254626195&4294967295,S=y+(I<<12&4294967295|I>>>20),I=T+(_^S&(y^_))+E[14]+2792965006&4294967295,T=S+(I<<17&4294967295|I>>>15),I=_+(y^T&(S^y))+E[15]+1236535329&4294967295,_=T+(I<<22&4294967295|I>>>10),I=y+(T^S&(_^T))+E[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[6]+3225465664&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[11]+643717713&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[0]+3921069994&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(T^S&(_^T))+E[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[10]+38016083&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[15]+3634488961&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[4]+3889429448&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(T^S&(_^T))+E[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[14]+3275163606&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[3]+4107603335&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[8]+1163531501&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(T^S&(_^T))+E[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=S+(_^T&(y^_))+E[2]+4243563512&4294967295,S=y+(I<<9&4294967295|I>>>23),I=T+(y^_&(S^y))+E[7]+1735328473&4294967295,T=S+(I<<14&4294967295|I>>>18),I=_+(S^y&(T^S))+E[12]+2368359562&4294967295,_=T+(I<<20&4294967295|I>>>12),I=y+(_^T^S)+E[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[8]+2272392833&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[11]+1839030562&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[14]+4259657740&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(_^T^S)+E[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[4]+1272893353&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[7]+4139469664&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[10]+3200236656&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(_^T^S)+E[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[0]+3936430074&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[3]+3572445317&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[6]+76029189&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(_^T^S)+E[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=S+(y^_^T)+E[12]+3873151461&4294967295,S=y+(I<<11&4294967295|I>>>21),I=T+(S^y^_)+E[15]+530742520&4294967295,T=S+(I<<16&4294967295|I>>>16),I=_+(T^S^y)+E[2]+3299628645&4294967295,_=T+(I<<23&4294967295|I>>>9),I=y+(T^(_|~S))+E[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[7]+1126891415&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[14]+2878612391&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[5]+4237533241&4294967295,_=T+(I<<21&4294967295|I>>>11),I=y+(T^(_|~S))+E[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[3]+2399980690&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[10]+4293915773&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[1]+2240044497&4294967295,_=T+(I<<21&4294967295|I>>>11),I=y+(T^(_|~S))+E[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[15]+4264355552&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[6]+2734768916&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[13]+1309151649&4294967295,_=T+(I<<21&4294967295|I>>>11),I=y+(T^(_|~S))+E[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=S+(_^(y|~T))+E[11]+3174756917&4294967295,S=y+(I<<10&4294967295|I>>>22),I=T+(y^(S|~_))+E[2]+718787259&4294967295,T=S+(I<<15&4294967295|I>>>17),I=_+(S^(T|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(T+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var _=y-this.blockSize,E=this.B,T=this.h,S=0;S<y;){if(T==0)for(;S<=_;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<y;)if(E[T++]=D.charCodeAt(S++),T==this.blockSize){i(this,E),T=0;break}}else for(;S<y;)if(E[T++]=D[S++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var _=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=_&255,_/=256;for(this.u(D),D=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)D[_++]=this.g[y]>>>E&255;return D};function s(D,y){var _=a;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=y(D)}function o(D,y){this.h=y;for(var _=[],E=!0,T=D.length-1;0<=T;T--){var S=D[T]|0;E&&S==y||(_[T]=S,E=!1)}this.g=_}var a={};function u(D){return-128<=D&&128>D?s(D,function(y){return new o([y|0],0>y?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var y=[],_=1,E=0;D>=_;E++)y[E]=D/_|0,_*=4294967296;return new o(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return R(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,T=0;T<D.length;T+=8){var S=Math.min(8,D.length-T),I=parseInt(D.substring(T,T+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var D=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var y=l(Math.pow(D,6)),_=this,E="";;){var T=se(_,y).g;_=k(_,T.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=T,C(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function C(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=k(this,D),N(D)?-1:C(D)?0:1};function R(D){for(var y=D.g.length,_=[],E=0;E<y;E++)_[E]=~D.g[E];return new o(_,~D.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0,T=0;T<=y;T++){var S=E+(this.i(T)&65535)+(D.i(T)&65535),I=(S>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);E=I>>>16,S&=65535,I&=65535,_[T]=I<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function k(D,y){return D.add(R(y))}t.j=function(D){if(C(this)||C(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(v)&&0>D.l(v))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<D.g.length;T++){var S=this.i(E)>>>16,I=this.i(E)&65535,vn=D.i(T)>>>16,Zs=D.i(T)&65535;_[2*E+2*T]+=I*Zs,U(_,2*E+2*T),_[2*E+2*T+1]+=S*Zs,U(_,2*E+2*T+1),_[2*E+2*T+1]+=I*vn,U(_,2*E+2*T+1),_[2*E+2*T+2]+=S*vn,U(_,2*E+2*T+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function U(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function z(D,y){this.g=D,this.h=y}function se(D,y){if(C(y))throw Error("division by zero");if(C(D))return new z(p,p);if(N(D))return y=se(R(D),y),new z(R(y.g),R(y.h));if(N(y))return y=se(D,R(y)),new z(R(y.g),y.h);if(30<D.g.length){if(N(D)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(D);)_=Se(_),E=Se(E);var T=Z(_,1),S=Z(E,1);for(E=Z(E,2),_=Z(_,2);!C(E);){var I=S.add(E);0>=I.l(D)&&(T=T.add(_),S=I),E=Z(E,1),_=Z(_,1)}return y=k(D,T.j(y)),new z(T,y)}for(T=p;0<=D.l(y);){for(_=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),I=S.j(y);N(I)||0<I.l(D);)_-=E,S=l(_),I=S.j(y);C(S)&&(S=m),T=T.add(S),D=k(D,I)}return new z(T,D)}t.A=function(D){return se(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&D.i(E);return new o(_,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|D.i(E);return new o(_,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^D.i(E);return new o(_,this.h^D.h)};function Se(D){for(var y=D.g.length+1,_=[],E=0;E<y;E++)_[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(_,D.h)}function Z(D,y){var _=y>>5;y%=32;for(var E=D.g.length-_,T=[],S=0;S<E;S++)T[S]=0<y?D.i(S+_)>>>y|D.i(S+_+1)<<32-y:D.i(S+_);return new o(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$m=kC.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Tr=kC.Integer=o}).apply(typeof OC<"u"?OC:typeof self<"u"?self:typeof window<"u"?window:{});var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jn={};var Hm,zm,Ns,qm,Ra,nd,Gm,Wm,Km;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof td=="object"&&td];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var P=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)P[ve-2]=arguments[ve];return d.prototype[b].apply(g,P)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let P=0;P<A;P++)c[b+P]=g[P]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function se(c){return se[" "](c),c}se[" "]=function(){};var Se=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Yd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class vn{constructor(){this.h=this.g=null}add(d,f){let g=Zs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Zs=new k(()=>new z0,c=>c.reset());class z0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Js,Xs=!1,Yd=new vn,d_=()=>{let c=a.Promise.resolve(void 0);Js=()=>{c.then(q0)}};var q0=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){S(f)}var d=Zs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Xs=!1};function qn(){this.s=this.s,this.C=this.C}qn.prototype.s=!1,qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Qe(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var G0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function eo(c,d){if(Qe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Se){e:{try{se(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:W0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&eo.aa.h.call(this)}}C(eo,Qe);var W0={2:"touch",3:"pen",4:"mouse"};eo.prototype.h=function(){eo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var to="closure_listenable_"+(1e6*Math.random()|0),K0=0;function Q0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++K0,this.da=this.fa=!1}function rc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ic(c){this.src=c,this.g={},this.h=0}ic.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var P=Jd(c,d,g,b);return-1<P?(d=c[P],f||(d.fa=!1)):(d=new Q0(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function Zd(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(rc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Jd(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Xd="closure_lm_"+(1e6*Math.random()|0),eh={};function h_(c,d,f,g,b){if(g&&g.once)return p_(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)h_(c,d[A],f,g,b);return null}return f=ih(f),c&&c[to]?c.K(d,f,l(g)?!!g.capture:!!g,b):f_(c,d,f,!1,g,b)}function f_(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var P=l(b)?!!b.capture:!!b,ve=nh(c);if(ve||(c[Xd]=ve=new ic(c)),f=ve.add(d,f,g,P,A),f.proxy)return f;if(g=Y0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)G0||(b=P),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(m_(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Y0(){function c(f){return d.call(c.src,c.listener,f)}let d=Z0;return c}function p_(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)p_(c,d[A],f,g,b);return null}return f=ih(f),c&&c[to]?c.L(d,f,l(g)?!!g.capture:!!g,b):f_(c,d,f,!0,g,b)}function g_(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)g_(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=ih(f),c&&c[to]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Jd(A,f,g,b),-1<f&&(rc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=nh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Jd(d,f,g,b)),(f=-1<c?d[c]:null)&&th(f))}function th(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[to])Zd(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(m_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=nh(d))?(Zd(f,c),f.h==0&&(f.src=null,d[Xd]=null)):rc(c)}}}function m_(c){return c in eh?eh[c]:eh[c]="on"+c}function Z0(c,d){if(c.da)c=!0;else{d=new eo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&th(c),c=f.call(g,d)}return c}function nh(c){return c=c[Xd],c instanceof ic?c:null}var rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ih(c){return typeof c=="function"?c:(c[rh]||(c[rh]=function(d){return c.handleEvent(d)}),c[rh])}function Ye(){qn.call(this),this.i=new ic(this),this.M=this,this.F=null}C(Ye,qn),Ye.prototype[to]=!0,Ye.prototype.removeEventListener=function(c,d,f,g){g_(this,c,d,f,g)};function it(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Qe(d,c);else if(d instanceof Qe)d.target=d.target||c;else{var b=d;d=new Qe(g,c),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var P=d.g=f[A];b=sc(P,g,!0,d)&&b}if(P=d.g=c,b=sc(P,g,!0,d)&&b,b=sc(P,g,!1,d)&&b,f)for(A=0;A<f.length;A++)P=d.g=f[A],b=sc(P,g,!1,d)&&b}Ye.prototype.N=function(){if(Ye.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)rc(f[g]);delete c.g[d],c.h--}}this.F=null},Ye.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Ye.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function sc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var P=d[A];if(P&&!P.da&&P.capture==f){var ve=P.listener,Ge=P.ha||P.src;P.fa&&Zd(c.i,P),b=ve.call(Ge,g)!==!1&&b}}return b&&!g.defaultPrevented}function y_(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function v_(c){c.g=y_(()=>{c.g=null,c.i&&(c.i=!1,v_(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class J0 extends qn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:v_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function no(c){qn.call(this),this.h=c,this.g={}}C(no,qn);var __=[];function I_(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&th(d)},c),c.g={}}no.prototype.N=function(){no.aa.N.call(this),I_(this)},no.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sh=a.JSON.stringify,X0=a.JSON.parse,eA=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function oh(){}oh.prototype.h=null;function w_(c){return c.h||(c.h=c.i())}function E_(){}var ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ah(){Qe.call(this,"d")}C(ah,Qe);function ch(){Qe.call(this,"c")}C(ch,Qe);var Mr={},D_=null;function oc(){return D_=D_||new Ye}Mr.La="serverreachability";function T_(c){Qe.call(this,Mr.La,c)}C(T_,Qe);function io(c){let d=oc();it(d,new T_(d))}Mr.STAT_EVENT="statevent";function b_(c,d){Qe.call(this,Mr.STAT_EVENT,c),this.stat=d}C(b_,Qe);function st(c){let d=oc();it(d,new b_(d,c))}Mr.Ma="timingevent";function C_(c,d){Qe.call(this,Mr.Ma,c),this.size=d}C(C_,Qe);function so(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function oo(){this.g=!0}oo.prototype.xa=function(){this.g=!1};function tA(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var P="",ve=A.split("&"),Ge=0;Ge<ve.length;Ge++){var fe=ve[Ge].split("=");if(1<fe.length){var Ze=fe[0];fe=fe[1];var Je=Ze.split("_");P=2<=Je.length&&Je[1]=="type"?P+(Ze+"="+fe+"&"):P+(Ze+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+P})}function nA(c,d,f,g,b,A,P){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+P})}function Ei(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+iA(c,f)+(g?" "+g:"")})}function rA(c,d){c.info(function(){return"TIMEOUT: "+d})}oo.prototype.info=function(){};function iA(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return sh(f)}catch{return d}}var ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},S_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},uh;function cc(){}C(cc,oh),cc.prototype.g=function(){return new XMLHttpRequest},cc.prototype.i=function(){return{}},uh=new cc;function Gn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new no(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new A_}function A_(){this.i=null,this.g="",this.h=!1}var R_={},lh={};function dh(c,d,f){c.L=1,c.v=hc(_n(d)),c.m=f,c.P=!0,N_(c,null)}function N_(c,d){c.F=Date.now(),uc(c),c.A=_n(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),z_(f.i,"t",g),c.C=0,f=c.j.J,c.h=new A_,c.g=cI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new J0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(__[0]=b.toString()),b=__);for(var A=0;A<b.length;A++){var P=h_(f,b[A],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),io(),tA(c.i,c.u,c.A,c.l,c.R,c.m)}Gn.prototype.ca=function(c){c=c.target;let d=this.M;d&&In(c)==3?d.j():this.Y(c)},Gn.prototype.Y=function(c){try{if(c==this.g)e:{let Je=In(this.g);var d=this.g.Ba();let bi=this.g.Z();if(!(3>Je)&&(Je!=3||this.g&&(this.h.h||this.g.oa()||Z_(this.g)))){this.J||Je!=4||d==7||(d==8||0>=bi?io(3):io(2)),hh(this);var f=this.g.Z();this.X=f;t:if(M_(this)){var g=Z_(this.g);c="";var b=g.length,A=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xr(this),ao(this);var P="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=f==200,nA(this.i,this.u,this.A,this.l,this.R,Je,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,Ge=this.g;if((ve=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(ve)){var fe=ve;break t}}fe=null}if(f=fe)Ei(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fh(this,f);else{this.o=!1,this.s=3,st(12),xr(this),ao(this);break e}}if(this.P){f=!0;let Ft;for(;!this.J&&this.C<P.length;)if(Ft=sA(this,P),Ft==lh){Je==4&&(this.s=4,st(14),f=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==R_){this.s=4,st(15),Ei(this.i,this.l,P,"[Invalid Chunk]"),f=!1;break}else Ei(this.i,this.l,Ft,null),fh(this,Ft);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||P.length!=0||this.h.h||(this.s=1,st(16),f=!1),this.o=this.o&&f,!f)Ei(this.i,this.l,P,"[Invalid Chunked Response]"),xr(this),ao(this);else if(0<P.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),_h(Ze),Ze.M=!0,st(11))}}else Ei(this.i,this.l,P,null),fh(this,P);Je==4&&xr(this),this.o&&!this.J&&(Je==4?iI(this.j,this):(this.o=!1,uc(this)))}else EA(this.g),f==400&&0<P.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),xr(this),ao(this)}}}catch{}finally{}};function M_(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function sA(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?lh:(f=Number(d.substring(f,g)),isNaN(f)?R_:(g+=1,g+f>d.length?lh:(d=d.slice(g,g+f),c.C=g+f,d)))}Gn.prototype.cancel=function(){this.J=!0,xr(this)};function uc(c){c.S=Date.now()+c.I,x_(c,c.I)}function x_(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=so(m(c.ba,c),d)}function hh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Gn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(rA(this.i,this.A),this.L!=2&&(io(),st(17)),xr(this),this.s=2,ao(this)):x_(this,this.S-c)};function ao(c){c.j.G==0||c.J||iI(c.j,c)}function xr(c){hh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,I_(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function fh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||ph(f.h,c))){if(!c.K&&ph(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)yc(f),gc(f);else break e;vh(f),st(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=so(m(f.Za,f),6e3));if(1>=k_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Or(f,11)}else if((c.K||f.g==c)&&yc(f),!U(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let fe=b[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let Ze=fe[3];Ze!=null&&(f.la=Ze,f.j.info("VER="+f.la));let Je=fe[4];Je!=null&&(f.Aa=Je,f.j.info("SVER="+f.Aa));let bi=fe[5];bi!=null&&typeof bi=="number"&&0<bi&&(g=1.5*bi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ft=c.g;if(Ft){let _c=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_c){var A=g.h;A.g||_c.indexOf("spdy")==-1&&_c.indexOf("quic")==-1&&_c.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(gh(A,A.h),A.h=null))}if(g.D){let Ih=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;Ih&&(g.ya=Ih,Ee(g.I,g.D,Ih))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var P=c;if(g.qa=aI(g,g.J?g.ia:null,g.W),P.K){L_(g.h,P);var ve=P,Ge=g.L;Ge&&(ve.I=Ge),ve.B&&(hh(ve),uc(ve)),g.g=P}else nI(g);0<f.i.length&&mc(f)}else fe[0]!="stop"&&fe[0]!="close"||Or(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Or(f,7):yh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}io(4)}catch{}}var oA=class{constructor(c,d){this.g=c,this.map=d}};function P_(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function O_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function k_(c){return c.h?1:c.g?c.g.size:0}function ph(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function gh(c,d){c.g?c.g.add(d):c.h=d}function L_(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}P_.prototype.cancel=function(){if(this.i=F_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function F_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function aA(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function cA(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function V_(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=cA(c),g=aA(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var U_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uA(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Pr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Pr){this.h=c.h,lc(this,c.j),this.o=c.o,this.g=c.g,dc(this,c.s),this.l=c.l;var d=c.i,f=new lo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),j_(this,f),this.m=c.m}else c&&(d=String(c).match(U_))?(this.h=!1,lc(this,d[1]||"",!0),this.o=co(d[2]||""),this.g=co(d[3]||"",!0),dc(this,d[4]),this.l=co(d[5]||"",!0),j_(this,d[6]||"",!0),this.m=co(d[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}Pr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(uo(d,B_,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(uo(d,B_,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(uo(f,f.charAt(0)=="/"?hA:dA,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",uo(f,pA)),c.join("")};function _n(c){return new Pr(c)}function lc(c,d,f){c.j=f?co(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function dc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function j_(c,d,f){d instanceof lo?(c.i=d,gA(c.i,c.h)):(f||(d=uo(d,fA)),c.i=new lo(d,c.h))}function Ee(c,d,f){c.i.set(d,f)}function hc(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function co(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function uo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,lA),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lA(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var B_=/[#\/\?@]/g,dA=/[#\?:]/g,hA=/[#\?]/g,fA=/[#\?@]/g,pA=/#/g;function lo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Wn(c){c.g||(c.g=new Map,c.h=0,c.i&&uA(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=lo.prototype,t.add=function(c,d){Wn(this),this.i=null,c=Di(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function $_(c,d){Wn(c),d=Di(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function H_(c,d){return Wn(c),d=Di(c,d),c.g.has(d)}t.forEach=function(c,d){Wn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){Wn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){Wn(this);let d=[];if(typeof c=="string")H_(this,c)&&(d=d.concat(this.g.get(Di(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Wn(this),this.i=null,c=Di(this,c),H_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function z_(c,d,f){$_(c,d),0<f.length&&(c.i=null,c.g.set(Di(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),P=this.V(g);for(g=0;g<P.length;g++){var b=A;P[g]!==""&&(b+="="+encodeURIComponent(String(P[g]))),c.push(b)}}return this.i=c.join("&")};function Di(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function gA(c,d){d&&!c.j&&(Wn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&($_(this,g),z_(this,b,f))},c)),c.j=d}function mA(c,d){let f=new oo;if(a.Image){let g=new Image;g.onload=v(Kn,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Kn,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Kn,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Kn,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function yA(c,d){let f=new oo,g=new AbortController,b=setTimeout(()=>{g.abort(),Kn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?Kn(f,"TestPingServer: ok",!0,d):Kn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Kn(f,"TestPingServer: error",!1,d)})}function Kn(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function vA(){this.g=new eA}function _A(c,d,f){let g=f||"";try{V_(c,function(b,A){let P=b;l(b)&&(P=sh(b)),d.push(g+A+"="+encodeURIComponent(P))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function ho(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ho,oh),ho.prototype.g=function(){return new fc(this.l,this.j)},ho.prototype.i=function(c){return function(){return c}}({});function fc(c,d){Ye.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(fc,Ye),t=fc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,po(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,po(this)),this.g&&(this.readyState=3,po(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;q_(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function q_(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?fo(this):po(this),this.readyState==3&&q_(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,fo(this))},t.Qa=function(c){this.g&&(this.response=c,fo(this))},t.ga=function(){this.g&&fo(this)};function fo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,po(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function po(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function G_(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function mh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=G_(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ee(c,d,f))}function Ae(c){Ye.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,Ye);var IA=/^https?$/i,wA=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():uh.g(),this.v=this.o?w_(this.o):w_(uh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){W_(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wA,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of f)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Y_(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){W_(this,A)}};function W_(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,K_(c),pc(c)}function K_(c){c.A||(c.A=!0,it(c,"complete"),it(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,it(this,"complete"),it(this,"abort"),pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pc(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Q_(this):this.bb())},t.bb=function(){Q_(this)};function Q_(c){if(c.h&&typeof o<"u"&&(!c.v[1]||In(c)!=4||c.Z()!=2)){if(c.u&&In(c)==4)y_(c.Ea,0,c);else if(it(c,"readystatechange"),In(c)==4){c.h=!1;try{let P=c.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=P===0){var b=String(c.D).match(U_)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!IA.test(b?b.toLowerCase():"")}f=g}if(f)it(c,"complete"),it(c,"success");else{c.m=6;try{var A=2<In(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",K_(c)}}finally{pc(c)}}}}function pc(c,d){if(c.g){Y_(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||it(c,"ready");try{f.onreadystatechange=g}catch{}}}function Y_(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function In(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),X0(d)}};function Z_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function EA(c){let d={};c=(c.g&&2<=In(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(U(c[g]))continue;var f=T(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function J_(c){this.Aa=0,this.i=[],this.j=new oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=go("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=go("baseRetryDelayMs",5e3,c),this.cb=go("retryDelaySeedMs",1e4,c),this.Wa=go("forwardChannelMaxRetries",2,c),this.wa=go("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new P_(c&&c.concurrentRequestLimit),this.Da=new vA,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=J_.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){st(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=aI(this,null,this.W),mc(this)};function yh(c){if(X_(c),c.G==3){var d=c.U++,f=_n(c.I);if(Ee(f,"SID",c.K),Ee(f,"RID",d),Ee(f,"TYPE","terminate"),mo(c,f),d=new Gn(c,c.j,d),d.L=2,d.v=hc(_n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=cI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),uc(d)}oI(c)}function gc(c){c.g&&(_h(c),c.g.cancel(),c.g=null)}function X_(c){gc(c),c.u&&(a.clearTimeout(c.u),c.u=null),yc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function mc(c){if(!O_(c.h)&&!c.s){c.s=!0;var d=c.Ga;Js||d_(),Xs||(Js(),Xs=!0),Yd.add(d,c),c.B=0}}function DA(c,d){return k_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=so(m(c.Ga,c,d),sI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Gn(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tI(this,b,d),f=_n(this.I),Ee(f,"RID",c),Ee(f,"CVER",22),this.D&&Ee(f,"X-HTTP-Session-Id",this.D),mo(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(G_(A)))+"&"+d:this.m&&mh(f,this.m,A)),gh(this.h,b),this.Ua&&Ee(f,"TYPE","init"),this.P?(Ee(f,"$req",d),Ee(f,"SID","null"),b.T=!0,dh(b,f,null)):dh(b,f,d),this.G=2}}else this.G==3&&(c?eI(this,c):this.i.length==0||O_(this.h)||eI(this))};function eI(c,d){var f;d?f=d.l:f=c.U++;let g=_n(c.I);Ee(g,"SID",c.K),Ee(g,"RID",f),Ee(g,"AID",c.T),mo(c,g),c.m&&c.o&&mh(g,c.m,c.o),f=new Gn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=tI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),gh(c.h,f),dh(f,g,d)}function mo(c,d){c.H&&Z(c.H,function(f,g){Ee(d,g,f)}),c.l&&V_({},function(f,g){Ee(d,g,f)})}function tI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let P=["count="+f];A==-1?0<f?(A=b[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let ve=!0;for(let Ge=0;Ge<f;Ge++){let fe=b[Ge].g,Ze=b[Ge].map;if(fe-=A,0>fe)A=Math.max(0,b[Ge].g-100),ve=!1;else try{_A(Ze,P,"req"+fe+"_")}catch{g&&g(Ze)}}if(ve){g=P.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function nI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Js||d_(),Xs||(Js(),Xs=!0),Yd.add(d,c),c.v=0}}function vh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=so(m(c.Fa,c),sI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,rI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=so(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),gc(this),rI(this))};function _h(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function rI(c){c.g=new Gn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=_n(c.qa);Ee(d,"RID","rpc"),Ee(d,"SID",c.K),Ee(d,"AID",c.T),Ee(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(d,"TO",c.ja),Ee(d,"TYPE","xmlhttp"),mo(c,d),c.m&&c.o&&mh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=hc(_n(d)),f.m=null,f.P=!0,N_(f,c)}t.Za=function(){this.C!=null&&(this.C=null,gc(this),vh(this),st(19))};function yc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function iI(c,d){var f=null;if(c.g==d){yc(c),_h(c),c.g=null;var g=2}else if(ph(c.h,d))f=d.D,L_(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=oc(),it(g,new C_(g,f)),mc(c)}else nI(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&DA(c,d)||g==2&&vh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Or(c,5);break;case 4:Or(c,10);break;case 3:Or(c,6);break;default:Or(c,2)}}}function sI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Or(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Pr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||lc(g,"https"),hc(g),b?mA(g.toString(),f):yA(g.toString(),f)}else st(2);c.G=0,c.l&&c.l.sa(d),oI(c),X_(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function oI(c){if(c.G=0,c.ka=[],c.l){let d=F_(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function aI(c,d,f){var g=f instanceof Pr?_n(f):new Pr(f);if(g.g!="")d&&(g.g=d+"."+g.g),dc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Pr(null);g&&lc(A,g),d&&(A.g=d),b&&dc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Ee(g,f,d),Ee(g,"VER",c.la),mo(c,g),g}function cI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new ho({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uI(){}t=uI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vc(){}vc.prototype.g=function(c,d){return new _t(c,d)};function _t(c,d){Ye.call(this),this.g=new J_(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!U(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ti(this)}C(_t,Ye),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){yh(this.g)},_t.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=sh(c),c=f);d.i.push(new oA(d.Ya++,c)),d.G==3&&mc(d)},_t.prototype.N=function(){this.g.l=null,delete this.j,yh(this.g),delete this.g,_t.aa.N.call(this)};function lI(c){ah.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(lI,ah);function dI(){ch.call(this),this.status=1}C(dI,ch);function Ti(c){this.g=c}C(Ti,uI),Ti.prototype.ua=function(){it(this.g,"a")},Ti.prototype.ta=function(c){it(this.g,new lI(c))},Ti.prototype.sa=function(c){it(this.g,new dI)},Ti.prototype.ra=function(){it(this.g,"b")},vc.prototype.createWebChannel=vc.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,Km=jn.createWebChannelTransport=function(){return new vc},Wm=jn.getStatEventTarget=function(){return oc()},Gm=jn.Event=Mr,nd=jn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ac.NO_ERROR=0,ac.TIMEOUT=8,ac.HTTP_ERROR=6,Ra=jn.ErrorCode=ac,S_.COMPLETE="complete",qm=jn.EventType=S_,E_.EventType=ro,ro.OPEN="a",ro.CLOSE="b",ro.ERROR="c",ro.MESSAGE="d",Ye.prototype.listen=Ye.prototype.K,Ns=jn.WebChannel=E_,zm=jn.FetchXmlHttpFactory=ho,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,Hm=jn.XhrIo=Ae}).apply(typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{});var LC="@firebase/firestore";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var Qs="10.13.2";var di=new mr("@firebase/firestore");function Na(){return di.logLevel}function V(t,...e){if(di.logLevel<=le.DEBUG){let n=e.map(kv);di.debug(`Firestore (${Qs}): ${t}`,...n)}}function $n(t,...e){if(di.logLevel<=le.ERROR){let n=e.map(kv);di.error(`Firestore (${Qs}): ${t}`,...n)}}function Fs(t,...e){if(di.logLevel<=le.WARN){let n=e.map(kv);di.warn(`Firestore (${Qs}): ${t}`,...n)}}function kv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t="Unexpected state"){let e=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: `+t;throw $n(e),new Error(e)}function Ie(t,e){t||q()}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ad=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ey=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}},ty=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ny=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new ad(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new qe(e)}},ry=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},iy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ry(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new sy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function qU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var cd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=qU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(t,e){return t<e?-1:t>e?1:0}function Vs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ke=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ke(0,0))}static max(){return new t(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ud=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(),r===void 0?r=e.length-n:r>e.length-n&&q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ce=class t extends ud{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},GU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rt=class t extends ud{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return GU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};var ay=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};ay.UNKNOWN_ID=-1;function WU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new hi(i,B.empty(),e)}function KU(t){return new hi(t.readTime,t.key,-1)}var hi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),B.empty(),-1)}static max(){return new t(X.max(),B.empty(),-1)}};function QU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}var YU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ya(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==YU)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function ZU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Za(t){return t.name==="IndexedDbTransactionError"}var mS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function jd(t){return t==null}function La(t){return t===0&&1/t==-1/0}function JU(t){return typeof t=="number"&&Number.isInteger(t)&&!La(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var XU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],R6=[...XU,"documentOverlays"],ej=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tj=ej,nj=[...tj,"indexConfiguration","indexState","indexEntries"];var N6=[...nj,"globals"];function FC(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ii(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Os(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Os(this.root,e,this.comparator,!1)}getReverseIterator(){return new Os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Os(this.root,e,this.comparator,!0)}},Os=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var nt=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ld(this.data.getIterator())}getIteratorFrom(e){return new ld(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ld=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Lt=class t{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new t([])}unionWith(e){let n=new nt(Rt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var dd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new dd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var rj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(t){if(Ie(!!t),typeof t=="string"){let e=0,n=rj.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}function Lv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fv(t){let e=t.mapValue.fields.__previous_value__;return Lv(e)?Fv(e):e}function Fa(t){let e=Hn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}var uy=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},hd=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lv(t)?4:_S(t)?9007199254740991:vS(t)?10:11:q()}function mn(t,e){if(t===e)return!0;let n=fi(t);if(n!==fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fa(t).isEqual(Fa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Hn(i.timestampValue),a=Hn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Cr(i.bytesValue).isEqual(Cr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),a=be(s.doubleValue);return o===a?La(o)===La(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vs(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(FC(o)!==FC(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!mn(o[u],a[u])))return!1;return!0}(t,e);default:return q()}}function Va(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function Us(t,e){if(t===e)return 0;let n=fi(t),r=fi(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return VC(t.timestampValue,e.timestampValue);case 4:return VC(Fa(t),Fa(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Cr(s),u=Cr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(be(s.latitude),be(o.latitude));return a!==0?a:ge(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return UC(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ge(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:UC(v,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===rd.mapValue&&o===rd.mapValue)return 0;if(s===rd.mapValue)return 1;if(o===rd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ge(u[p],h[p]);if(m!==0)return m;let v=Us(a[u[p]],l[h[p]]);if(v!==0)return v}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw q()}}function VC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);let n=Hn(t),r=Hn(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function UC(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Us(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function js(t){return ly(t)}function ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Hn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=ly(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${ly(n.fields[o])}`;return i+"}"}(t.mapValue):q()}function jC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dy(t){return!!t&&"integerValue"in t}function Vv(t){return!!t&&"arrayValue"in t}function BC(t){return!!t&&"nullValue"in t}function $C(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function sd(t){return!!t&&"mapValue"in t}function vS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function xa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xa(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _S(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var At=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!sd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xa(n)}setAll(e){let n=Rt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xa(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ii(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(xa(this.value))}};function IS(t){let e=[];return Ii(t.fields,(n,r)=>{let i=new Rt([n]);if(sd(r)){let s=IS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Lt(e)}var Wt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),At.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),At.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bs=class{constructor(e,n){this.position=e,this.inclusive=n}};function HC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=B.comparator(B.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function zC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}var $s=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function ij(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var fd=class{},Fe=class t extends fd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fy(e,n,r):n==="array-contains"?new my(e,r):n==="in"?new yy(e,r):n==="not-in"?new vy(e,r):n==="array-contains-any"?new _y(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new py(e,r):new gy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Us(n,this.value)):n!==null&&fi(this.value)===fi(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kt=class t extends fd{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return wS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wS(t){return t.op==="and"}function ES(t){return sj(t)&&wS(t)}function sj(t){for(let e of t.filters)if(e instanceof Kt)return!1;return!0}function hy(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+js(t.value);if(ES(t))return t.filters.map(e=>hy(e)).join(",");{let e=t.filters.map(n=>hy(n)).join(",");return`${t.op}(${e})`}}function DS(t,e){return t instanceof Fe?function(r,i){return i instanceof Fe&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(t,e):t instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&DS(o,i.filters[a]),!0):!1}(t,e):void q()}function TS(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${js(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(TS).join(" ,")+"}"}(t):"Filter"}var fy=class extends Fe{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},py=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=bS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gy=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=bS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function bS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var my=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Vv(n)&&Va(n.arrayValue,this.value)}},yy=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Va(this.value.arrayValue,n)}},vy=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Va(this.value.arrayValue,n)}},_y=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Vv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Va(this.value.arrayValue,r))}};var Iy=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function qC(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Iy(t,e,n,r,i,s,o)}function Uv(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>js(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>js(r)).join(",")),e.ue=n}return e.ue}function jv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ij(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zC(t.startAt,e.startAt)&&zC(t.endAt,e.endAt)}function wy(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var pi=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function oj(t,e,n,r,i,s,o,a){return new pi(t,e,n,r,i,s,o,a)}function Bv(t){return new pi(t)}function GC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return t.collectionGroup!==null}function Pa(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nt(Rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new $s(s,r))}),n.has(Rt.keyField().canonicalString())||e.ce.push(new $s(Rt.keyField(),r))}return e.ce}function fn(t){let e=Y(t);return e.le||(e.le=aj(e,Pa(t))),e.le}function aj(t,e){if(t.limitType==="F")return qC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new $s(i.field,s)});let n=t.endAt?new Bs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bs(t.startAt.position,t.startAt.inclusive):null;return qC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ey(t,e){let n=t.filters.concat([e]);return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dy(t,e,n){return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bd(t,e){return jv(fn(t),fn(e))&&t.limitType===e.limitType}function SS(t){return`${Uv(fn(t))}|lt:${t.limitType}`}function Ms(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>TS(i)).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>js(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>js(i)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function $d(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):B.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Pa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=HC(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Pa(r),i)||r.endAt&&!function(o,a,u){let l=HC(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Pa(r),i))}(t,e)}function cj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AS(t){return(e,n)=>{let r=!1;for(let i of Pa(t)){let s=uj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uj(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Us(u,l):q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Sr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return yS(this.inner)}size(){return this.innerSize}};var lj=new Me(B.comparator);function zn(){return lj}var RS=new Me(B.comparator);function Ma(...t){let e=RS;for(let n of t)e=e.insert(n.key,n);return e}function NS(t){let e=RS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ci(){return Oa()}function MS(){return Oa()}function Oa(){return new Sr(t=>t.toString(),(t,e)=>t.isEqual(e))}var dj=new Me(B.comparator),hj=new nt(B.comparator);function de(...t){let e=hj;for(let n of t)e=e.add(n);return e}var fj=new nt(ge);function pj(){return fj}function $v(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:La(e)?"-0":e}}function xS(t){return{integerValue:""+t}}function gj(t,e){return JU(e)?xS(e):$v(t,e)}var Hs=class{constructor(){this._=void 0}};function mj(t,e,n){return t instanceof zs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Lv(s)&&(s=Fv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof gi?OS(t,e):t instanceof mi?kS(t,e):function(i,s){let o=PS(i,s),a=WC(o)+WC(i.Pe);return dy(o)&&dy(i.Pe)?xS(a):$v(i.serializer,a)}(t,e)}function yj(t,e,n){return t instanceof gi?OS(t,e):t instanceof mi?kS(t,e):n}function PS(t,e){return t instanceof qs?function(r){return dy(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var zs=class extends Hs{},gi=class extends Hs{constructor(e){super(),this.elements=e}};function OS(t,e){let n=LS(e);for(let r of t.elements)n.some(i=>mn(i,r))||n.push(r);return{arrayValue:{values:n}}}var mi=class extends Hs{constructor(e){super(),this.elements=e}};function kS(t,e){let n=LS(e);for(let r of t.elements)n=n.filter(i=>!mn(i,r));return{arrayValue:{values:n}}}var qs=class extends Hs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function WC(t){return be(t.integerValue||t.doubleValue)}function LS(t){return Vv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function vj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof gi&&i instanceof gi||r instanceof mi&&i instanceof mi?Vs(r.elements,i.elements,mn):r instanceof qs&&i instanceof qs?mn(r.Pe,i.Pe):r instanceof zs&&i instanceof zs}(t.transform,e.transform)}var Ty=class{constructor(e,n){this.version=e,this.transformResults=n}},pn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function od(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Gs=class{};function FS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ua(t.key,pn.none()):new yi(t.key,t.data,pn.none());{let n=t.data,r=At.empty(),i=new nt(Rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new yn(t.key,r,new Lt(i.toArray()),pn.none())}}function _j(t,e,n){t instanceof yi?function(i,s,o){let a=i.value.clone(),u=QC(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yn?function(i,s,o){if(!od(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=QC(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(VS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof yi?function(s,o,a,u){if(!od(s.precondition,o))return a;let l=s.value.clone(),h=YC(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof yn?function(s,o,a,u){if(!od(s.precondition,o))return a;let l=YC(s.fieldTransforms,u,o),h=o.data;return h.setAll(VS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return od(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Ij(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=PS(r.transform,i||null);s!=null&&(n===null&&(n=At.empty()),n.set(r.field,s))}return n||null}function KC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vs(r,i,(s,o)=>vj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var yi=class extends Gs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends Gs{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function VS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function QC(t,e,n){let r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,yj(o,a,n[i]))}return r}function YC(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,mj(s,o,e))}return r}var Ua=class extends Gs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},by=class extends Gs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cy=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&_j(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=MS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=FS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(n,r)=>KC(n,r))&&Vs(this.baseMutations,e.baseMutations,(n,r)=>KC(n,r))}},Sy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return dj}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ay=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ry=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,he;function wj(t){switch(t){default:return q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function US(t){if(t===void 0)return $n("GRPC error has no .code"),M.UNKNOWN;switch(t){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return q()}}(he=ke||(ke={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var ZC=null;function Ej(){return new TextEncoder}var Dj=new Tr([4294967295,4294967295],0);function JC(t){let e=Ej().encode(t),n=new $m;return n.update(e),new Uint8Array(n.digest())}function XC(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Tr([n,r],0),new Tr([i,s],0)]}var Ny=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ui(`Invalid padding: ${n}`);if(r<0)throw new ui(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ui(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ui(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Tr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Tr.fromNumber(r)));return i.compare(Dj)===1&&(i=new Tr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=JC(e),[r,i]=XC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=JC(e),[r,i]=XC(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ui=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Me(ge),zn(),de())}},ja=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var ks=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},gd=class{constructor(e,n){this.targetId=e,this.me=n}},md=class{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},yd=class{constructor(){this.fe=0,this.ge=tS(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q()}}),new ja(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=tS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},My=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=zn(),this.qe=eS(),this.Qe=new Me(ge)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(wy(s))if(r===0){let o=new B(s.path);this.Ue(n,o,Wt.newNoDocument(o,X.min()))}else Ie(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}ZC?.et(function(h,p,m,v,C){var N,R,k,U,z,se;let Se={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Se.bloomFilter={applied:C===0,hashCount:(N=Z?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(U=(k=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&U!==void 0?U:0,padding:(se=(z=Z?.bits)===null||z===void 0?void 0:z.padding)!==null&&se!==void 0?se:0,mightContain:D=>{var y;return(y=v?.mightContain(D))!==null&&y!==void 0&&y}}),Se}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Cr(r).toUint8Array()}catch(u){if(u instanceof dd)return Fs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ny(o,i,s)}catch(u){return Fs(u instanceof ui?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&wy(a.target)){let u=new B(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Wt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new pd(e,n,this.Qe,this.ke,r);return this.ke=zn(),this.qe=eS(),this.Qe=new Me(ge),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new yd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function eS(){return new Me(B.comparator)}function tS(){return new Me(B.comparator)}var Tj={asc:"ASCENDING",desc:"DESCENDING"},bj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cj={and:"AND",or:"OR"},xy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Py(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function vd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sj(t,e){return vd(t,e.toTimestamp())}function gn(t){return Ie(!!t),X.fromTimestamp(function(n){let r=Hn(n);return new Ke(r.seconds,r.nanos)}(t))}function Hv(t,e){return Oy(t,e).canonicalString()}function Oy(t,e){let n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BS(t){let e=Ce.fromString(t);return Ie(GS(e)),e}function ky(t,e){return Hv(t.databaseId,e.path)}function Qm(t,e){let n=BS(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(HS(n))}function $S(t,e){return Hv(t.databaseId,e)}function Aj(t){let e=BS(t);return e.length===4?Ce.emptyPath():HS(e)}function Ly(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HS(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nS(t,e,n){return{name:ky(t,e),fields:n.value.mapValue.fields}}function Rj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ie(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:US(l.code);return new L(h,l.message||"")}(o);n=new md(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Qm(t,r.document.name),s=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):X.min(),a=new At({mapValue:{fields:r.document.fields}}),u=Wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ks(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Qm(t,r.document),s=r.readTime?gn(r.readTime):X.min(),o=Wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ks([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Qm(t,r.document),s=r.removedTargetIds||[];n=new ks([],s,i,null)}else{if(!("filter"in e))return q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Ry(i,s),a=r.targetId;n=new gd(a,o)}}return n}function Nj(t,e){let n;if(e instanceof yi)n={update:nS(t,e.key,e.value)};else if(e instanceof Ua)n={delete:ky(t,e.key)};else if(e instanceof yn)n={update:nS(t,e.key,e.data),updateMask:Uj(e.fieldMask)};else{if(!(e instanceof by))return q();n={verify:ky(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof zs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Sj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:q()}(t,e.precondition)),n}function Mj(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gn(i.updateTime):gn(s);return o.isEqual(X.min())&&(o=gn(s)),new Ty(o,i.transformResults||[])}(n,e))):[]}function xj(t,e){return{documents:[$S(t,e.path)]}}function Pj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$S(t,i);let s=function(l){if(l.length!==0)return qS(Kt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:xs(m.field),direction:Lj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Py(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Oj(t){let e=Aj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ie(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=zS(p);return m instanceof Kt&&ES(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new $s(Ps(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,jd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Bs(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Bs(v,m)}(n.endAt)),oj(e,i,o,s,a,"F",u,l)}function kj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ps(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ps(n.unaryFilter.field);return Fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ps(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ps(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Ps(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>zS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(n.compositeFilter.op))}(t):q()}function Lj(t){return Tj[t]}function Fj(t){return bj[t]}function Vj(t){return Cj[t]}function xs(t){return{fieldPath:t.canonicalString()}}function Ps(t){return Rt.fromServerFormat(t.fieldPath)}function qS(t){return t instanceof Fe?function(n){if(n.op==="=="){if($C(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NAN"}};if(BC(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($C(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NOT_NAN"}};if(BC(n.value))return{unaryFilter:{field:xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xs(n.field),op:Fj(n.op),value:n.value}}}(t):t instanceof Kt?function(n){let r=n.getFilters().map(i=>qS(i));return r.length===1?r[0]:{compositeFilter:{op:Vj(n.op),filters:r}}}(t):q()}function Uj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ba=class t{constructor(e,n,r,i,s=X.min(),o=X.min(),a=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Fy=class{constructor(e){this.ct=e}};function jj(t){let e=Oj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dy(e,e.limit,"L"):e}var _d=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),La(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Hn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Cr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?_S(e)?this.dt(n,Number.MAX_SAFE_INTEGER):vS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):q()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(be(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),B.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};_d.vt=new _d;var Vy=class{constructor(){this.un=new Uy}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(hi.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Uy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Ce.comparator)).toArray()}};var x6=new Uint8Array(0);var ln=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var $a=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var jy=class{constructor(){this.changes=new Sr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var By=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var $y=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ka(r.mutation,i,Lt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=ci();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ma();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ci();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=zn(),o=Oa(),a=function(){return Oa()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),ka(h.mutation,l,h.mutation.getFieldMask(),Ke.now())):o.set(l.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new By(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Oa(),i=new Me((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Lt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=MS();h.forEach(m=>{if(!s.has(m)){let v=FS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(ci()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:NS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Ma();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ma();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new pi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Wt.newInvalidDocument(h)))});let a=Ma();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&ka(h.mutation,l,Lt.empty(),Ke.now()),$d(n,l)&&(a=a.insert(u,l))}),a})}};var Hy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:jj(i.bundledQuery),readTime:gn(i.readTime)}}(n)),x.resolve()}};var zy=class{constructor(){this.overlays=new Me(B.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ci();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=ci(),s=n.length+1,o=new B(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=ci(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ci(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ay(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var qy=class{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var Ha=class{constructor(){this.Tr=new nt(Le.Er),this.dr=new nt(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Le(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Le(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new B(new Ce([])),r=new Le(n,e),i=new Le(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new B(new Ce([])),r=new Le(n,e),i=new Le(n,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Le(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Le=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return B.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||B.comparator(e.key,n.key)}};var Gy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(Le.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Cy(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Le(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ge);return n.forEach(i=>{let s=new Le(i,0),o=new Le(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;B.isDocumentKey(s)||(s=s.child(""));let o=new Le(new B(s),0),a=new nt(ge);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Le(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Le(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Wy=class{constructor(e){this.Mr=e,this.docs=function(){return new Me(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=zn(),o=n.path,a=new B(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||QU(KU(h),r)<=0||(i.has(h.key)||$d(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){q()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ky(this)}getSize(e){return x.resolve(this.size)}},Ky=class extends jy{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Qy=class{constructor(e){this.persistence=e,this.Nr=new Sr(n=>Uv(n),jv),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ha,this.targetCount=0,this.kr=$a.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Yy=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mS(0),this.Kr=!1,this.Kr=!0,this.$r=new qy,this.referenceDelegate=e(this),this.Ur=new Qy(this),this.indexManager=new Vy,this.remoteDocumentCache=function(i){return new Wy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Fy(n),this.Gr=new Hy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Gy(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Zy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Zy=class extends cy{constructor(e){super(),this.currentSequenceNumber=e}},Jy=class t{constructor(e){this.persistence=e,this.Jr=new Ha,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Xy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var ev=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Cb()?8:ZU(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ev;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Na()<=le.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(Na()<=le.DEBUG&&V("QueryEngine","Query:",Ms(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Na()<=le.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):x.resolve())}Yi(e,n){if(GC(n))return x.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Dy(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Dy(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return GC(n)||i.isEqual(X.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(Na()<=le.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ms(n)),this.rs(e,o,n,WU(i,-1)).next(a=>a))})}ts(e,n){let r=new nt(AS(e));return n.forEach((i,s)=>{$d(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Na()<=le.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ms(n)),this.Ji.getDocumentsMatchingQuery(e,n,hi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var nv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Me(ge),this._s=new Sr(s=>Uv(s),jv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $y(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function Bj(t,e,n,r){return new nv(t,e,n,r)}function WS(t,e){return w(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function $j(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(C=>{v=v.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);Ie(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function KS(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Hj(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(rt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=zn(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(zj(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(X.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function zj(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=zn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function qj(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gj(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ba(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function rv(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Za(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function rS(t,e,n){let r=Y(t),i=X.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Y(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:X.min(),n?s:de())).next(a=>(Wj(r,cj(e),a),{documents:a,Ts:s})))}function Wj(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Id=class{constructor(){this.activeTargetIds=pj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var iv=class{constructor(){this.so=new Id,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Id,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var sv=class{_o(e){}shutdown(){}};var wd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var id=null;function Ym(){return id===null?id=function(){return 268435456+Math.round(2147483648*Math.random())}():id++,"0x"+id.toString(16)}var Kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ov=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var tt="WebChannelConnection",av=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Ym(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Fs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=Kj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Ym();return new Promise((o,a)=>{let u=new Hm;u.setWithCredentials(!0),u.listenOnce(qm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ra.NO_ERROR:let h=u.getResponseJson();V(tt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ra.TIMEOUT:V(tt,`RPC '${e}' ${s} timed out`),a(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:let p=u.getStatus();if(V(tt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let C=function(R){let k=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(k)>=0?k:M.UNKNOWN}(v.status);a(new L(C,v.message))}else a(new L(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new L(M.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{V(tt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(tt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Ym(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Km(),a=Wm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new zm({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,C=new ov({Io:R=>{v?V(tt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(tt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,k,U)=>{R.listen(k,z=>{try{U(z)}catch(se){setTimeout(()=>{throw se},0)}})};return N(p,Ns.EventType.OPEN,()=>{v||(V(tt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,Ns.EventType.CLOSE,()=>{v||(v=!0,V(tt,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,Ns.EventType.ERROR,R=>{v||(v=!0,Fs(tt,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ns.EventType.MESSAGE,R=>{var k;if(!v){let U=R.data[0];Ie(!!U);let z=U,se=z.error||((k=z[0])===null||k===void 0?void 0:k.error);if(se){V(tt,`RPC '${e}' stream ${i} received error:`,se);let Se=se.status,Z=function(_){let E=ke[_];if(E!==void 0)return US(E)}(Se),D=se.message;Z===void 0&&(Z=M.INTERNAL,D="Unknown error status: "+Se+" with message "+se.message),v=!0,C.So(new L(Z,D)),p.close()}else V(tt,`RPC '${e}' stream ${i} received:`,U),C.bo(U)}}),N(a,Gm.STAT_EVENT,R=>{R.stat===nd.PROXY?V(tt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===nd.NOPROXY&&V(tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Zm(){return typeof document<"u"?document:null}function Hd(t){return new xy(t,!0)}var Ed=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Dd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ed(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cv=class extends Dd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Rj(this.serializer,e),r=function(s){if(!("targetChange"in s))return X.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?gn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Ly(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=wy(u)?{documents:xj(s,u)}:{query:Pj(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jS(s,o.resumeToken);let l=Py(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(X.min())>0){a.readTime=vd(s,o.snapshotVersion.toTimestamp());let l=Py(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=kj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Ly(this.serializer),n.removeTarget=e,this.a_(n)}},uv=class extends Dd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Mj(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Ly(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Nj(this.serializer,r))};this.a_(n)}};var lv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Oy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Oy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},dv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($n(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var hv=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){wi(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Y(u);l.L_.add(4),yield Ja(l),l.q_.set("Unknown"),l.L_.delete(4),yield zd(l)})}(this))}))}),this.q_=new dv(r,i)}};function zd(t){return w(this,null,function*(){if(wi(t))for(let e of t.B_)yield e(!0)})}function Ja(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function QS(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wv(n)?Gv(n):Ys(n).r_()&&qv(n,e))}function zv(t,e){let n=Y(t),r=Ys(n);n.N_.delete(e),r.r_()&&YS(n,e),n.N_.size===0&&(r.r_()?r.o_():wi(n)&&n.q_.set("Unknown"))}function qv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).A_(e)}function YS(t,e){t.Q_.xe(e),Ys(t).R_(e)}function Gv(t){t.Q_=new My({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.q_.v_()}function Wv(t){return wi(t)&&!Ys(t).n_()&&t.N_.size>0}function wi(t){return Y(t).L_.size===0}function ZS(t){t.Q_=void 0}function Qj(t){return w(this,null,function*(){t.q_.set("Online")})}function Yj(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{qv(t,e)})})}function Zj(t,e){return w(this,null,function*(){ZS(t),Wv(t)?(t.q_.M_(e),Gv(t)):t.q_.set("Unknown")})}function Jj(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof md&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Td(t,r)}else if(e instanceof ks?t.Q_.Ke(e):e instanceof gd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield KS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),YS(s,u);let p=new Ba(h.target,u,l,h.sequenceNumber);qv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield Td(t,r)}})}function Td(t,e,n){return w(this,null,function*(){if(!Za(e))throw e;t.L_.add(1),yield Ja(t),t.q_.set("Offline"),n||(n=()=>KS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield zd(t)}))})}function JS(t,e){return e().catch(n=>Td(t,n,e))}function qd(t){return w(this,null,function*(){let e=Y(t),n=Ar(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xj(e);)try{let i=yield qj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,e2(e,i)}catch(i){yield Td(e,i)}XS(e)&&e0(e)})}function Xj(t){return wi(t)&&t.O_.length<10}function e2(t,e){t.O_.push(e);let n=Ar(t);n.r_()&&n.V_&&n.m_(e.mutations)}function XS(t){return wi(t)&&!Ar(t).n_()&&t.O_.length>0}function e0(t){Ar(t).start()}function t2(t){return w(this,null,function*(){Ar(t).p_()})}function n2(t){return w(this,null,function*(){let e=Ar(t);for(let n of t.O_)e.m_(n.mutations)})}function r2(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=Sy.from(r,e,n);yield JS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield qd(t)})}function i2(t,e){return w(this,null,function*(){e&&Ar(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return wj(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Ar(r).s_(),yield JS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield qd(r)}})}(t,e)),XS(t)&&e0(t)})}function iS(t,e){return w(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=wi(n);n.L_.add(3),yield Ja(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield zd(n)})}function s2(t,e){return w(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield zd(n)):e||(n.L_.add(2),yield Ja(n),n.q_.set("Unknown"))})}function Ys(t){return t.K_||(t.K_=function(n,r,i){let s=Y(n);return s.w_(),new cv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Qj.bind(null,t),Ro:Yj.bind(null,t),mo:Zj.bind(null,t),d_:Jj.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),Wv(t)?Gv(t):t.q_.set("Unknown")):(yield t.K_.stop(),ZS(t))}))),t.K_}function Ar(t){return t.U_||(t.U_=function(n,r,i){let s=Y(n);return s.w_(),new uv(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:t2.bind(null,t),mo:i2.bind(null,t),f_:n2.bind(null,t),g_:r2.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield qd(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var fv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Kv(t,e){if($n("AsyncQueue",`${e}: ${t}`),Za(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var bd=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Ma(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Cd=class{constructor(){this.W_=new Me(B.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):q():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Ws=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,bd.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var pv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},gv=class{constructor(){this.queries=sS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),s=i.queries;i.queries=sS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function sS(){return new Sr(t=>SS(t),Bd)}function t0(t,e){return w(this,null,function*(){let n=Y(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new pv,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Kv(o,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Qv(n)})}function n0(t,e){return w(this,null,function*(){let n=Y(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function o2(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Qv(n)}function a2(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function Qv(t){t.Y_.forEach(e=>{e.next()})}var mv,oS;(oS=mv||(mv={})).ea="default",oS.Cache="cache";var Sd=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==mv.Cache}};var Ad=class{constructor(e){this.key=e}},Rd=class{constructor(e){this.key=e}},yv=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=AS(e),this.Ra=new bd(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Cd,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=$d(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?C!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return N(v)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new Ws(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Rd(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ad(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},vv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},_v=class{constructor(e){this.key=e,this.va=!1}},Iv=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Sr(a=>SS(a),Bd),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(B.comparator),this.Na=new Map,this.La=new Ha,this.Ba={},this.ka=new Map,this.qa=$a.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function c2(t,e,n=!0){return w(this,null,function*(){let r=c0(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield r0(r,e,n,!0),i})}function u2(t,e){return w(this,null,function*(){let n=c0(t);yield r0(n,e,!0,!1)})}function r0(t,e,n,r){return w(this,null,function*(){let i=yield Gj(t.localStore,fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield l2(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&QS(t.remoteStore,i),a})}function l2(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,v)=>function(N,R,k,U){return w(this,null,function*(){let z=R.view.ma(k);z.ns&&(z=yield rS(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,z)));let se=U&&U.targetChanges.get(R.targetId),Se=U&&U.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(z,N.isPrimaryClient,se,Se);return cS(N,R.targetId,Z.wa),Z.snapshot})}(t,p,m,v);let s=yield rS(t.localStore,e,!0),o=new yv(e,s.Ts),a=o.ma(s.documents),u=ja.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);cS(t,n,l.wa);let h=new vv(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function d2(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Bd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zv(r.remoteStore,i.targetId),wv(r,i.targetId)}).catch(Ya))):(wv(r,i.targetId),yield rv(r.localStore,i.targetId,!0))})}function h2(t,e){return w(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zv(n.remoteStore,r.targetId))})}function f2(t,e,n){return w(this,null,function*(){let r=I2(t);try{let i=yield function(o,a){let u=Y(o),l=Ke.now(),h=a.reduce((v,C)=>v.add(C.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=zn(),N=de();return u.cs.getEntries(v,h).next(R=>{C=R,C.forEach((k,U)=>{U.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(R=>{p=R;let k=[];for(let U of a){let z=Ij(U,p.get(U.key).overlayedDocument);z!=null&&k.push(new yn(U.key,z,IS(z.value.mapValue),pn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:NS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Me(ge)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Xa(r,i.changes),yield qd(r.remoteStore)}catch(i){let s=Kv(i,"Failed to persist write");n.reject(s)}})}function i0(t,e){return w(this,null,function*(){let n=Y(t);try{let r=yield Hj(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),yield Xa(n,r,e)}catch(r){yield Ya(r)}})}function aS(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Y(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Qv(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function p2(t,e,n){return w(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Me(B.comparator);o=o.insert(s,Wt.newNoDocument(s,X.min()));let a=de().add(s),u=new pd(X.min(),new Map,new Me(ge),o,a);yield i0(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Yv(r)}else yield rv(r.localStore,e,!1).then(()=>wv(r,e,n)).catch(Ya)})}function g2(t,e){return w(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield $j(n.localStore,e);o0(n,r,null),s0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Xa(n,i)}catch(i){yield Ya(i)}})}function m2(t,e,n){return w(this,null,function*(){let r=Y(t);try{let i=yield function(o,a){let u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ie(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);o0(r,e,n),s0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Xa(r,i)}catch(i){yield Ya(i)}})}function s0(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function o0(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function wv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||a0(t,r)})}function a0(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(zv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Yv(t))}function cS(t,e,n){for(let r of n)r instanceof Ad?(t.La.addReference(r.key,e),y2(t,r)):r instanceof Rd?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||a0(t,r.key)):q()}function y2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),Yv(t))}function Yv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new B(Ce.fromString(e)),r=t.qa.next();t.Na.set(r,new _v(n)),t.Oa=t.Oa.insert(n,r),QS(t.remoteStore,new Ba(fn(Bv(n.path)),r,"TargetPurposeLimboResolution",mS.oe))}}function Xa(t,e,n){return w(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Xy.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Za(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),C=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function v2(t,e){return w(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield WS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xa(n,r.hs)}})}function _2(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function c0(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p2.bind(null,e),e.Ca.d_=o2.bind(null,e.eventManager),e.Ca.$a=a2.bind(null,e.eventManager),e}function I2(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=m2.bind(null,e),e}var Nd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Bj(this.persistence,new tv,e.initialUser,this.serializer)}createPersistence(e){return new Yy(Jy.Zr,this.serializer)}createSharedClientState(e){return new iv}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ev=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=v2.bind(null,this.syncEngine),yield s2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new gv}()}createDatastore(e){let n=Hd(e.databaseInfo.databaseId),r=function(s){return new av(s)}(e.databaseInfo);return function(s,o,a,u){return new lv(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new hv(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aS(this.syncEngine,n,0),function(){return wd.D()?new wd:new sv}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new Iv(i,s,o,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e,n;yield function(i){return w(this,null,function*(){let s=Y(i);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ja(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var Md=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Dv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Kv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jm(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield WS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function uS(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield E2(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iS(e.remoteStore,i)),t._onlineComponents=e})}function w2(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function E2(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!w2(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),yield Jm(t,new Nd)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Jm(t,new Nd);return t._offlineComponents})}function u0(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield uS(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield uS(t,new Ev))),t._onlineComponents})}function D2(t){return u0(t).then(e=>e.syncEngine)}function Tv(t){return w(this,null,function*(){let e=yield u0(t),n=e.eventManager;return n.onListen=c2.bind(null,e.syncEngine),n.onUnlisten=d2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h2.bind(null,e.syncEngine),n})}function T2(t,e,n={}){let r=new dn;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,l){let h=new Md({next:m=>{o.enqueueAndForget(()=>n0(s,p)),m.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Sd(a,h,{includeMetadataChanges:!0,_a:!0});return t0(s,p)}(yield Tv(t),t.asyncQueue,e,n,r)})),r.promise}function l0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var lS=new Map;function d0(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b2(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dS(t){if(!B.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hS(t){if(B.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function Bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Gd(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var xd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=l0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ks=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ey;switch(r.type){case"firstParty":return new iy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=lS.get(n);r&&(V("ComponentProvider","Removing Datastore"),lS.delete(n),r.terminate())}(this),Promise.resolve()}};function h0(t,e,n,r={}){var i;let s=(t=Bn(t,Ks))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=qe.MOCK_USER;else{a=Ib(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qe(l)}t._authCredentials=new ty(new ad(a,u))}}var vi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},vt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},br=class t extends vi{constructor(e,n,r){super(e,n,Bv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function f0(t,e,...n){if(t=De(t),d0("collection","path",e),t instanceof Ks){let r=Ce.fromString(e,...n);return hS(r),new br(t,null,r)}{if(!(t instanceof vt||t instanceof br))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return hS(r),new br(t.firestore,null,r)}}function p0(t,e,...n){if(t=De(t),arguments.length===1&&(e=cd.newId()),d0("doc","path",e),t instanceof Ks){let r=Ce.fromString(e,...n);return dS(r),new vt(t,null,new B(r))}{if(!(t instanceof vt||t instanceof br))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return dS(r),new vt(t.firestore,t instanceof br?t.converter:null,new B(r))}}var bv=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ed(this,"async_queue_retry"),this.Eu=()=>{let n=Zm();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Zm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new dn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return w(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Za(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $n("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=fv.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&q()}verifyOperationInProgress(){}mu(){return w(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function fS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Rr=class extends Ks{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new bv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||m0(this),this._firestoreClient.terminate()}};function g0(t,e){let n=typeof t=="object"?t:_r(),r=typeof t=="string"?t:e||"(default)",i=ti(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Nl("firestore");s&&h0(i,...s)}return i}function Wd(t){return t._firestoreClient||m0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function m0(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new uy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,l0(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Dv(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var za=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _i=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qa=class{constructor(e){this._methodName=e}};var Ga=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Wa=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var C2=/^__.*__$/,Cv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new yi(e,this.data,n,this.fieldTransforms)}},Pd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function y0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var Sv=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return kd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(y0(this.wu)&&C2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Av=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hd(e)}Nu(e,n,r,i=!1){return new Sv({wu:e,methodName:n,Ou:r,path:Rt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zv(t){let e=t._freezeSettings(),n=Hd(t._databaseId);return new Av(t._databaseId,!!e.ignoreUndefinedProperties,n)}function S2(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);Jv("Data must be an object, but it was:",o,r);let a=I0(r,o),u,l;if(s.merge)u=new Lt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=Rv(e,p,n);if(!o.contains(m))throw new L(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);E0(h,m)||h.push(m)}u=new Lt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Cv(new At(a),u,l)}var Od=class t extends qa{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function v0(t,e,n,r){let i=t.Nu(1,e,n);Jv("Data must be an object, but it was:",i,r);let s=[],o=At.empty();Ii(r,(u,l)=>{let h=Xv(e,u,n);l=De(l);let p=i.Cu(h);if(l instanceof Od)s.push(h);else{let m=ec(l,p);m!=null&&(s.push(h),o.set(h,m))}});let a=new Lt(s);return new Pd(o,a,i.fieldTransforms)}function _0(t,e,n,r,i,s){let o=t.Nu(1,e,n),a=[Rv(e,r,n)],u=[i];if(s.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Rv(e,s[m])),u.push(s[m+1]);let l=[],h=At.empty();for(let m=a.length-1;m>=0;--m)if(!E0(l,a[m])){let v=a[m],C=u[m];C=De(C);let N=o.Cu(v);if(C instanceof Od)l.push(v);else{let R=ec(C,N);R!=null&&(l.push(v),h.set(v,R))}}let p=new Lt(l);return new Pd(h,p,o.fieldTransforms)}function A2(t,e,n,r=!1){return ec(n,t.Nu(r?4:3,e))}function ec(t,e){if(w0(t=De(t)))return Jv("Unsupported field value:",e,t),I0(t,e);if(t instanceof qa)return function(r,i){if(!y0(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=ec(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ke.fromDate(r);return{timestampValue:vd(i.serializer,s)}}if(r instanceof Ke){let s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vd(i.serializer,s)}}if(r instanceof Ga)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof za)return{bytesValue:jS(i.serializer,r._byteString)};if(r instanceof vt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Wa)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return $v(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Gd(r)}`)}(t,e)}function I0(t,e){let n={};return yS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(t,(r,i)=>{let s=ec(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function w0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Ga||t instanceof za||t instanceof vt||t instanceof qa||t instanceof Wa)}function Jv(t,e,n){if(!w0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Gd(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Rv(t,e,n){if((e=De(e))instanceof _i)return e._internalPath;if(typeof e=="string")return Xv(t,e);throw kd("Field path arguments must be of type string or ",t,!1,void 0,n)}var R2=new RegExp("[~\\*/\\[\\]]");function Xv(t,e,n){if(e.search(R2)>=0)throw kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _i(...e.split("."))._internalPath}catch{throw kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kd(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function E0(t,e){return t.some(n=>n.isEqual(e))}var Ld=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Nv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(e_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Nv=class extends Ld{data(){return super.data()}};function e_(t,e){return typeof e=="string"?Xv(t,e):e instanceof _i?e._internalPath:e._delegate._internalPath}function D0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ka=class{},Mv=class extends Ka{};function T0(t,e,...n){let r=[];e instanceof Ka&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof xv).length,a=s.filter(u=>u instanceof Fd).length;if(o>1||o>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Fd=class t extends Mv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return C0(e._query,n),new vi(e.firestore,e.converter,Ey(e._query,n))}_parse(e){let n=Zv(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gS(p,h);let v=[];for(let C of p)v.push(pS(u,s,C));m={arrayValue:{values:v}}}else m=pS(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gS(p,h),m=A2(a,o,p,h==="in"||h==="not-in");return Fe.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function b0(t,e,n){let r=e,i=e_("where",t);return Fd._create(i,r,n)}var xv=class t extends Ka{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)C0(o,u),o=Ey(o,u)}(e._query,n),new vi(e.firestore,e.converter,Ey(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function pS(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CS(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ce.fromString(n));if(!B.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jC(t,new B(r))}if(n instanceof vt)return jC(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gd(n)}.`)}function gS(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C0(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Pv=class{convertValue(e,n="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ii(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>be(o.doubleValue));return new Wa(s)}convertGeoPoint(e){return new Ga(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Fv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){let n=Hn(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ce.fromString(e);Ie(GS(r));let i=new hd(r.get(1),r.get(3)),s=new B(r.popFirst(5));return i.isEqual(n)||$n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function N2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vd=class extends Ld{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(e_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ls=class extends Vd{data(e={}){return super.data(e)}},Ud=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new li(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ls(this._firestore,this._userDataWriter,r.key,r,new li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Ls(i._firestore,i._userDataWriter,a.doc.key,a.doc,new li(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Ls(i._firestore,i._userDataWriter,a.doc.key,a.doc,new li(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:M2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function M2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}var Qa=class extends Pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new za(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}};function S0(t){t=Bn(t,vi);let e=Bn(t.firestore,Rr),n=Wd(e),r=new Qa(e);return D0(t._query),T2(n,t._query).then(i=>new Ud(e,r,t,i))}function A0(t,e,n,...r){t=Bn(t,vt);let i=Bn(t.firestore,Rr),s=Zv(i),o;return o=typeof(e=De(e))=="string"||e instanceof _i?_0(s,"updateDoc",t._key,e,n,r):v0(s,"updateDoc",t._key,e),R0(i,[o.toMutation(t._key,pn.exists(!0))])}function t_(t,...e){var n,r,i;t=De(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fS(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fS(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof vt)l=Bn(t.firestore,Rr),h=Bv(t._key.path),u={next:p=>{e[o]&&e[o](x2(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Bn(t,vi);l=Bn(p.firestore,Rr),h=p._query;let m=new Qa(l);u={next:v=>{e[o]&&e[o](new Ud(l,m,p,v))},error:e[o+1],complete:e[o+2]},D0(t._query)}return function(m,v,C,N){let R=new Md(N),k=new Sd(v,R,C);return m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return t0(yield Tv(m),k)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return n0(yield Tv(m),k)}))}}(Wd(l),h,a,u)}function R0(t,e){return function(r,i){let s=new dn;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return f2(yield D2(r),i,s)})),s.promise}(Wd(t),e)}function x2(t,e,n){let r=n.docs.get(e._key),i=new Qa(t);return new Vd(t,i,e._key,r,new li(n.hasPendingWrites,n.fromCache),e.converter)}var Ov=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zv(e)}set(e,n,r){this._verifyNotCommitted();let i=Xm(e,this._firestore),s=N2(i.converter,n,r),o=S2(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,pn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let s=Xm(e,this._firestore),o;return o=typeof(n=De(n))=="string"||n instanceof _i?_0(this._dataReader,"WriteBatch.update",s._key,n,r,i):v0(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,pn.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Xm(e,this._firestore);return this._mutations=this._mutations.concat(new Ua(n._key,pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new L(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xm(t,e){if((t=De(t)).firestore!==e)throw new L(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function N0(t){return Wd(t=Bn(t,Rr)),new Ov(t,e=>R0(t,e))}(function(e,n=!0){(function(i){Qs=i})(vr),an(new yt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Rr(new ny(r.getProvider("auth-internal")),new oy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hd(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Te(LC,"4.7.2",e),Te(LC,"4.7.2","esm2017")})();var Kd=function(){return Kd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kd.apply(this,arguments)};var k2={includeMetadataChanges:!1};function M0(t,e){return e===void 0&&(e=k2),new ce(function(n){var r=t_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function x0(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Kd(Kd({},r),(n={},n[e.idField]=t.id,n))}function P0(t){return M0(t,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function O0(t,e){return e===void 0&&(e={}),P0(t).pipe(ne(function(n){return n.map(function(r){return x0(r,e)})}))}var tc=class{constructor(e){return e}},k0="firestore",n_=class{constructor(){return ri(k0)}};var r_=new j("angularfire2.firestore-instances");function L2(t,e){let n=Cs(k0,t,e);return n&&new tc(n)}function F2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new tc(r)}}var V2={provide:n_,deps:[[new Oe,r_]]},U2={provide:tc,useFactory:L2,deps:[[new Oe,r_],qt]};function c5(t,...e){return Te("angularfire",kn.full,"fst"),xt([U2,V2,{provide:r_,useFactory:F2(t),multi:!0,deps:[pe,$e,wr,Ln,[new Oe,ai],[new Oe,Ir],...e]}])}var u5=Be(O0,!0);var l5=Be(f0,!0);var d5=Be(p0,!0);var h5=Be(S0,!0);var f5=Be(g0,!0);var p5=Be(T0,!0);var g5=Be(A0,!0);var m5=Be(b0,!0),y5=Be(N0,!0);var j2="type.googleapis.com/google.protobuf.Int64Value",B2="type.googleapis.com/google.protobuf.UInt64Value";function U0(t,e){let n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function i_(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>i_(e));if(typeof t=="function"||typeof t=="object")return U0(t,e=>i_(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Qd(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case j2:case B2:{let e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Qd(e)):typeof t=="function"||typeof t=="object"?U0(t,e=>Qd(e)):t}var c_="functions";var L0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nr=class extends ht{constructor(e,n,r){super(`${c_}/${e}`,n||""),this.details=r}};function $2(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function H2(t,e){let n=$2(t),r=n,i;try{let s=e&&e.error;if(s){let o=s.status;if(typeof o=="string"){if(!L0[o])return new Nr("internal","internal");n=L0[o],r=o}let a=s.message;typeof a=="string"&&(r=a),i=s.details,i!==void 0&&(i=Qd(i))}}catch{}return n==="ok"?null:new Nr(n,r,i)}var s_=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return w(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return w(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return w(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return w(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var o_="us-central1";function z2(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Nr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}var a_=class{constructor(e,n,r,i,s=o_,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new s_(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=o_}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function q2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function G2(t,e,n){return r=>K2(t,e,r,n||{})}function W2(t,e,n,r){return w(this,null,function*(){n["Content-Type"]="application/json";let i;try{i=yield r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let s=null;try{s=yield i.json()}catch{}return{status:i.status,json:s}})}function K2(t,e,n,r){let i=t._url(e);return Q2(t,i,n,r)}function Q2(t,e,n,r){return w(this,null,function*(){n=i_(n);let i={data:n},s={},o=yield t.contextProvider.getContext(r.limitedUseAppCheckTokens);o.authToken&&(s.Authorization="Bearer "+o.authToken),o.messagingToken&&(s["Firebase-Instance-ID-Token"]=o.messagingToken),o.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=o.appCheckToken);let a=r.timeout||7e4,u=z2(a),l=yield Promise.race([W2(e,i,s,t.fetchImpl),u.promise,t.cancelAllRequests]);if(u.cancel(),!l)throw new Nr("cancelled","Firebase Functions instance was deleted.");let h=H2(l.status,l.json);if(h)throw h;if(!l.json)throw new Nr("internal","Response is not valid JSON object.");let p=l.json.data;if(typeof p>"u"&&(p=l.json.result),typeof p>"u")throw new Nr("internal","Response is missing data field.");return{data:Qd(p)}})}var F0="@firebase/functions",V0="0.11.8";var Y2="auth-internal",Z2="app-check-internal",J2="messaging-internal";function X2(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(Y2),a=r.getProvider(J2),u=r.getProvider(Z2);return new a_(s,o,a,u,i,t)};an(new yt(c_,n,"PUBLIC").setMultipleInstances(!0)),Te(F0,V0,e),Te(F0,V0,"esm2017")}function j0(t=_r(),e=o_){let r=ti(De(t),c_).getImmediate({identifier:e}),i=Nl("functions");return i&&B0(r,...i),r}function B0(t,e,n){q2(De(t),e,n)}function $0(t,e,n){return G2(De(t),e,n)}X2(fetch.bind(self));var nc=class{constructor(e){return e}},H0="functions",u_=class{constructor(){return ri(H0)}};var l_=new j("angularfire2.functions-instances");function eB(t,e){let n=Cs(H0,t,e);return n&&new nc(n)}function tB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new nc(r)}}var nB={provide:u_,deps:[[new Oe,l_]]},rB={provide:nc,useFactory:eB,deps:[[new Oe,l_],qt]};function k5(t,...e){return Te("angularfire",kn.full,"fn"),xt([rB,nB,{provide:l_,useFactory:tB(t),multi:!0,deps:[pe,$e,wr,Ln,[new Oe,ai],[new Oe,Ir],...e]}])}var L5=Be(j0,!0),F5=Be($0,!0);export{F as a,we as b,iB as c,w as d,ce as e,Xe as f,We as g,Ne as h,ne as i,tR as j,nR as k,Dt as l,H as m,Vw as n,$ as o,Fo as p,j as q,W as r,O as s,Oe as t,eE as u,Uo as v,Vu as w,xt as x,XR as y,jo as z,RG as A,NG as B,dp as C,$e as D,fp as E,at as F,pe as G,$o as H,MG as I,Ot as J,Zu as K,Ju as L,OG as M,Kx as N,rP as O,Op as P,mP as Q,yP as R,kG as S,LG as T,FG as U,VG as V,zD as W,qD as X,kp as Y,UG as Z,Lp as _,jG as $,BG as aa,UP as ba,jP as ca,$G as da,BP as ea,HG as fa,QD as ga,zG as ha,qG as ia,us as ja,GG as ka,ls as la,zo as ma,WG as na,Up as oa,ds as pa,w9 as qa,E9 as ra,wO as sa,W9 as ta,Ek as ua,xn as va,pW as wa,gW as xa,mW as ya,z1 as za,q1 as Aa,vb as Ba,W1 as Ca,_W as Da,Nl as Ea,Al as Fa,Ib as Ga,wb as Ha,Tb as Ia,IW as Ja,pb as Ka,wW as La,EW as Ma,DW as Na,TW as Oa,bW as Pa,Rb as Qa,CW as Ra,Ts as Sa,mb as Ta,SW as Ua,AW as Va,RW as Wa,De as Xa,yt as Ya,le as Za,mr as _a,an as $a,ti as ab,vr as bb,_r as cb,Te as db,kn as eb,Cs as fb,ri as gb,Ir as hb,wr as ib,Be as jb,qt as kb,Ln as lb,m3 as mb,y3 as nb,VF as ob,Aa as pb,ai as qb,h6 as rb,f6 as sb,p6 as tb,g6 as ub,tc as vb,c5 as wb,u5 as xb,l5 as yb,d5 as zb,h5 as Ab,f5 as Bb,p5 as Cb,g5 as Db,m5 as Eb,y5 as Fb,nc as Gb,k5 as Hb,L5 as Ib,F5 as Jb};
